{
  "version": 3,
  "sources": ["../node_modules/@webqit/util/js/isObject.js", "../node_modules/@webqit/util/js/internals.js", "../node_modules/@webqit/util/js/isArray.js", "../node_modules/@webqit/util/js/isTypeFunction.js", "../node_modules/@webqit/util/js/isNull.js", "../node_modules/@webqit/util/js/isUndefined.js", "../node_modules/@webqit/util/js/isTypeObject.js", "../node_modules/@webqit/util/js/isEmpty.js", "../node_modules/@webqit/util/js/isFunction.js", "../node_modules/@webqit/util/js/isNumber.js", "../node_modules/@webqit/util/js/isNumeric.js", "../node_modules/@webqit/util/js/isString.js", "../node_modules/@webqit/util/js/isTypeArray.js", "../node_modules/@webqit/util/arr/pushUnique.js", "../node_modules/@webqit/util/obj/getPrototypeChain.js", "../node_modules/@webqit/util/obj/getAllPropertyNames.js", "../node_modules/@webqit/util/obj/mergeCallback.js", "../node_modules/@webqit/util/obj/merge.js", "../node_modules/@webqit/util/arr/from.js", "../node_modules/@webqit/util/obj/get.js", "../node_modules/@webqit/util/obj/set.js", "../src/_Reflow.js", "../src/realtime/Realtime.js", "../src/realtime/AttrRealtime.js", "../src/realtime/DOMRealtime.js", "../src/polyfills.js", "../src/index.js", "../src/targets.browser.js"],
  "sourcesContent": ["\n/**\n * Tells if val is pure object.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !Array.isArray(val) && typeof val === 'object' && val;\n};\n", "\n/**\n * Creates and/or returns an \"internals\" object for the given object.\n * \n * @param Any obj\n * @param String namespace\n * \n * @return Object\n */\nexport default function internals(obj, ...namespaces) {\n    if (!globalThis.WebQitInternalsRegistry) {\n        globalThis.WebQitInternalsRegistry = new Map;\n    }\n    var itnls = globalThis.WebQitInternalsRegistry.get(obj);\n    if (!itnls) {\n        itnls = new Map;\n        if (namespaces[0] === false) {\n            // FALSE means: Return orphan Map if not exists\n            return itnls;\n        }\n        globalThis.WebQitInternalsRegistry.set(obj, itnls);\n    }\n    var _ns, _itnls;\n    while ((_ns = namespaces.shift())) {\n        if ((_itnls = itnls) && !(itnls = itnls.get(_ns))) {\n            itnls = new Map;\n            if (namespaces[0] === false) {\n                // FALSE means: Return orphan Map if not exists\n                return itnls;\n            }\n            _itnls.set(_ns, itnls);\n        }\n    }\n    return itnls;\n}", "\n/**\n * Tells if val is of type \"array\".\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val);\n};\n", "\n/**\n * Tells if val is of type \"function\".\n * This holds true for both regular functions and classes.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn typeof val === 'function';\n};\n", "\n/**\n * Tells if val is undefined or is null.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val === null || val === '';\n};\n", "\n/**\n * Tells if val is undefined or is of type \"undefined\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn arguments.length && (val === undefined || typeof val === 'undefined');\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"object\".\n * This holds true for anything object, including built-ins.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val) || (typeof val === 'object' && val) || _isTypeFunction(val);\n};\n", "\n/**\n * @imports\n */\nimport _isNull from './isNull.js';\nimport _isUndefined from './isUndefined.js';\nimport _isTypeObject from './isTypeObject.js';\n\n/**\n * Tells if val is empty in its own type.\n * This holds true for NULLs, UNDEFINED, FALSE, 0,\n * objects without keys, empty arrays.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNull(val) || _isUndefined(val) || val === false || val === 0 \n\t\t|| (_isTypeObject(val) && !Object.keys(val).length);\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"function\".\n *\n * @param object \t\tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isTypeFunction(val) || (val && {}.toString.call(val) === '[object function]');\n};\n", "\n/**\n * Tells if val is of type \"number\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof Number || (typeof val === 'number');\n};\n", "\n/**\n * @imports\n */\nimport _isNumber from './isNumber.js';\n/**\n * Tells if val is of type \"string\" or a numeric string.\n * This holds true for both numbers and numeric strings.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNumber(val) || (val !== true && val !== false && val !== null && val !== '' && !isNaN(val * 1));\n};\n", "\n/**\n * Tells if val is of type \"string\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof String || (typeof val === 'string' && val !== null);\n};\n", "\n/**\n * @imports\n */\nimport _isString from './isString.js';\nimport _isUndefined from './isUndefined.js';\n\n/**\n * Tells if val is \"array-like\".\n * This holds true for anything that has a length property.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !_isString(val) && !_isUndefined(val.length);\n};\n", "\n/**\n * Adds an item if not already exist.\n *\n * @param array \tarr\n * @param array\t \t...itms\n *\n * @return array\n */\nexport default function(arr, ...items) {\n\titems.forEach(itm => {\n\t\tif (arr.indexOf(itm) < 0) {\n\t\t\tarr.push(itm);\n\t\t}\n\t});\n\treturn arr;\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\n\n/**\n * Returns the prototype chain.\n *\n * @param object \t\tobj\n * @param object\t \tuntil\n *\n * @return bool\n */\nexport default function(obj, until) {\n\tuntil = until || Object.prototype;\n\tuntil = until && !_isArray(until) ? [until] : until;\n\t// We get the chain of inheritance\n\tvar prototypalChain = [];\n\tvar obj = obj;\n\twhile((obj && (!until || until.indexOf(obj) < 0) && obj.name !== 'default')) {\n\t\tprototypalChain.push(obj);\n\t\tobj = obj ? Object.getPrototypeOf(obj) : null;\n\t}\n\treturn prototypalChain;\n};\n", "\n/**\n * @imports\n */\nimport _pushUnique from '../arr/pushUnique.js';\nimport _getPrototypeChain from './getPrototypeChain.js';\n\n/**\n * Eagerly retrieves object members all down the prototype chain.\n *\n * @param object\t \tobj\n * @param object\t \tuntil\n *\n * @return array\n */\nexport default function(obj, until) {\n\tvar keysAll = [];\n\t_getPrototypeChain(obj, until).forEach(obj => {\n\t\t_pushUnique(keysAll, ...Object.getOwnPropertyNames(obj));\n\t});\n\treturn keysAll;\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isObject from '../js/isObject.js';\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _getAllPropertyNames from './getAllPropertyNames.js';\n\n/**\n  * Merges values from subsequent arrays/objects first array/object;\n  * optionally recursive\n  *\n  * @param array ...objs\n  *\n  * @return void\n  */\nexport default function mergeCallback(objs, callback, deepProps = false, isReplace = false, withSymbols = false) {\n\tvar depth = 0;\n\tvar obj1 = objs.shift();\n\tif (_isNumeric(obj1) || obj1 === true || obj1 === false) {\n\t\tdepth = obj1;\n\t\tobj1 = objs.shift();\n\t}\n\tif (!objs.length) {\n\t\tthrow new Error('_merge() requires two or more array/objects.');\n\t}\n\tobjs.forEach((obj2, i) => {\n\t\tif (!_isTypeObject(obj2) && !_isFunction(obj2)) {\n\t\t\treturn;\n\t\t}\n\t\t(deepProps ? _getAllPropertyNames(obj2) : Object.keys(obj2)).forEach(key => {\n\t\t\tif (!callback(key, obj1, obj2, i)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar valAtObj1 = obj1[key];\n\t\t\tvar valAtObj2 = obj2[key];\n\t\t\tif (((_isArray(valAtObj1) && _isArray(valAtObj2)) || (_isObject(valAtObj1) && _isObject(valAtObj2))) \n\t\t\t&& (depth === true || depth > 0)) {\n\t\t\t\t// RECURSE...\n\t\t\t\tobj1[key] = _isArray(valAtObj1) && _isArray(valAtObj2) ? [] : {};\n\t\t\t\tmergeCallback([_isNumeric(depth) ? depth - 1 : depth, obj1[key], valAtObj1, valAtObj2], callback, deepProps, isReplace, withSymbols);\n\t\t\t} else {\n\t\t\t\tif (_isArray(obj1) && _isArray(obj2)) {\n\t\t\t\t\tif (isReplace) {\n\t\t\t\t\t\tobj1[key] = valAtObj2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj1.push(valAtObj2);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// In case we're setting a read-only property\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (withSymbols) {\n\t\t\t\t\t\t\tObject.defineProperty(obj1, key, Object.getOwnPropertyDescriptor(obj2, key));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tobj1[key] = obj2[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\treturn obj1;\n};\n", "\n/**\n * @imports\n */\nimport _mergeCallback from './mergeCallback.js';\n\n/**\n  * Merges values from subsequent arrays/objects first array/object;\n  * optionally recursive\n  *\n  * @param array ...objs\n  *\n  * @return void\n  */\nexport default function(...objs) {\n\treturn _mergeCallback(objs, (k, obj1, obj2) => {\n\t\treturn true;\n\t}, false/*deepProps*/, false/*isReplace*/, false/*withSymbols*/);\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isTypeArray from '../js/isTypeArray.js';\nimport _isEmpty from '../js/isEmpty.js';\nimport _isObject from '../js/isObject.js';\n\n/**\n * Casts an array-like object to an array.\n *\n * @param mixed \tval\n * @param bool\t \tcastObject\n *\n * @return array\n */\nexport default function(val, castObject = true) {\n\tif (_isArray(val)) {\n\t\treturn val;\n\t};\n\tif (!castObject && _isObject(val)) {\n\t\treturn [val];\n\t};\n\tif (val !== false && val !== 0 && _isEmpty(val)) {\n\t\treturn [];\n\t};\n\tif (_isTypeArray(val)) {\n\t\treturn Array.prototype.slice.call(val);\n\t};\n\tif (_isObject(val)) {\n\t\treturn Object.values(val);\n\t};\n\treturn [val];\n};\n", "\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isUndefined from '../js/isUndefined.js';\nimport _isNull from '../js/isNull.js';\nimport _arrFrom from '../arr/from.js';\n\n/**\n * Retrieves the value at the given path.\n *\n * A return value of undefined is ambiguous, and can mean either that the\n * path does not exist, or that the path actually exists but with a value of undefined. If it is required to\n * know whether the path actually exists, pass an object as a third argument.\n * This object will have an \"exists\" key set to true/false.\n *\n * @param object \t\t\t\tctxt\n * @param array \t\t\t\tpath\n * @param object \t\t\t\ttrap\n * @param object \t\t\t\treciever\n *\n * @return mixed\n */\nexport default function(ctxt, path, trap = {}, reciever = {}) {\n\tpath = _arrFrom(path).slice();\n\tvar _ctxt = ctxt;\n\twhile(!_isUndefined(_ctxt) && !_isNull(_ctxt) && path.length) {\n\t\tvar _key = path.shift();\n\t\tif (!(trap.get ? trap.get(_ctxt, _key) : (_isTypeObject(_ctxt) ? _key in _ctxt : _ctxt[_key]))) {\n\t\t\treciever.exists = false;\n\t\t\treturn;\n\t\t}\n\t\t_ctxt = trap.get ? trap.get(_ctxt, _key) : _ctxt[_key];\n\t}\n\treciever.exists = true;\n\treturn _ctxt;\n};\n", "\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _isArray from '../js/isArray.js';\nimport _arrFrom from '../arr/from.js';\nimport _get from './get.js';\n\n/**\n * Sets a value to the given path.\n *\n * @param object \t\t\t\tobj\n * @param array \t\t\t\tpath\n * @param mixed \t\t\t\tval\n * @param object|function \t\tbuildTree\n * @param object \t\t\t\ttrap\n *\n * @return bool\n */\nexport default function(obj, path, val, buildTree = {}, trap = {}) {\n\tconst _set = (target, key, val) => {\n\t\tif (trap.set) {\n\t\t\treturn trap.set(target, key, val);\n\t\t} else {\n\t\t\tif (_isNumeric(path[i]) && _isArray(target)) {\n\t\t\t\ttarget.push(val);\n\t\t\t} else {\n\t\t\t\ttarget[key] = val;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t};\n\tpath = _arrFrom(path);\n\tvar target = obj;\n\tfor(var i = 0; i < path.length; i ++) {\n\t\tif (i < path.length - 1) {\n\t\t\tif (!target || (!_isTypeObject(target) && !_isFunction(target))) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar branch = _get(target, path[i], trap);\n\t\t\tif (!_isTypeObject(branch)) {\n\t\t\t\tif (trap.buildTree === false) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tbranch = _isFunction(trap.buildTree) ? trap.buildTree(i) : (_isNumeric(path[i + 1]) ? [] : {});\n\t\t\t\tvar branchSuccess = _set(target, path[i], branch);\n\t\t\t\tif (!branchSuccess) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttarget = branch;\n\t\t} else {\n\t\t\treturn _set(target, path[i], val);\n\t\t}\n\t}\n};\n", "\r\n/**\r\n * ---------------------------\r\n * Binds callbacks to requestAnimationFrame()\r\n * to create a central \"read/write\" phases for Ctxt access.\r\n * ---------------------------\r\n */\r\n\t\t\t\r\nexport default window => class Reflow {\r\n\r\n\t/**\r\n\t * Starts the loop.\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tconstructor( asyncDOM = true ) {\r\n\t\tObject.defineProperty( this, 'window', { value: window } );\r\n\t\tObject.defineProperty( this, 'readCallbacks', { value: new Set } );\r\n\t\tObject.defineProperty( this, 'writeCallbacks', { value: new Set } );\r\n\t\tthis.async = asyncDOM;\r\n\t\tif ( this.window.requestAnimationFrame ) {\r\n\t\t\tthis._run();\r\n\t\t} else {\r\n\t\t\tthis.async = false;\r\n\t\t}\r\n\t}\r\n\r\n\t_run() {\r\n\t\tthis.window.requestAnimationFrame( () => {\r\n\t\t\tthis.readCallbacks.forEach( callback => {\r\n\t\t\t\tif ( !callback() ) {\r\n\t\t\t\t\tthis.readCallbacks.delete( callback );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t\tthis.writeCallbacks.forEach( callback => {\r\n\t\t\t\tif ( !callback() ) {\r\n\t\t\t\t\tthis.writeCallbacks.delete( callback );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t\tthis._run();\r\n\t\t} );\r\n\t}\r\n\t\r\n\t/**\r\n\t * Binds a callback to the \"read\" phase.\r\n\t *\r\n\t * @param function \tcallback\r\n\t * @param bool\t\twithPromise\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tonread( callback, withPromise = false ) {\r\n\t\tif ( withPromise ) {\r\n\t\t\treturn new Promise( ( resolve, reject ) => {\r\n\t\t\t\tif ( this.async === false ) {\r\n\t\t\t\t\tcallback( resolve, reject );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.readCallbacks.add( () => {\r\n\t\t\t\t\t\tcallback( resolve, reject );\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\t\tif ( this.async === false ) {\r\n\t\t\tcallback();\r\n\t\t} else {\r\n\t\t\tthis.readCallbacks.add( callback );\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Binds a callback to the \"write\" phase.\r\n\t *\r\n\t * @param function \tcallback\r\n\t * @param bool\t\twithPromise\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tonwrite( callback, withPromise = false ) {\r\n\t\tif ( withPromise ) {\r\n\t\t\treturn new Promise( ( resolve, reject ) => {\r\n\t\t\t\tif ( this.async === false ) {\r\n\t\t\t\t\tcallback( resolve, reject );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.writeCallbacks.add( () => {\r\n\t\t\t\t\t\tcallback( resolve, reject );\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\t\tif ( this.async === false ) {\r\n\t\t\tcallback();\r\n\t\t} else {\r\n\t\t\tthis.writeCallbacks.add( callback );\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * A special construct for Ctxt manipulations that span\r\n\t * one or more read/write cycles.\r\n\t *\r\n\t * @param function \tread\r\n\t * @param function \twrite\r\n\t * @param mixed\t\tprevTransaction\r\n\t *\r\n\t * @return void|mixed\r\n\t */\r\n\tcycle( onread, onwrite, prevTransaction ) {\r\n\t\tthis.onread( () => {\r\n\t\t\t// Record initial values\r\n\t\t\tconst readReturn = onread( prevTransaction );\r\n\t\t\t// Call erite, the transation\r\n\t\t\tconst callWrite = ( readReturn ) => {\r\n\t\t\t\tif ( readReturn === undefined ) return;\r\n\t\t\t\tthis.onwrite( () => {\r\n\t\t\t\t\tconst writeReturn = onwrite( readReturn, prevTransaction );\r\n\t\t\t\t\t// Repeat transaction\r\n\t\t\t\t\tconst repeatTransaction = ( writeReturn ) => {\r\n\t\t\t\t\t\tif ( writeReturn === undefined ) return;\r\n\t\t\t\t\t\tthis.cycle( onread, onwrite, writeReturn );\r\n\t\t\t\t\t};\r\n\t\t\t\t\t// ---------------------------------------\r\n\t\t\t\t\t// If \"write\" returns a promise, we wait until it is resolved\r\n\t\t\t\t\t// ---------------------------------------\r\n\t\t\t\t\tif ( writeReturn instanceof Promise ) {\r\n\t\t\t\t\t\twriteReturn.then( repeatTransaction );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trepeatTransaction( writeReturn );\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t};\r\n\t\t\t// ---------------------------------------\r\n\t\t\t// If \"read\" returns a promise, we wait until it is resolved\r\n\t\t\t// ---------------------------------------\r\n\t\t\tif ( readReturn instanceof Promise ) {\r\n\t\t\t\treadReturn.then( callWrite );\r\n\t\t\t} else {\r\n\t\t\t\tcallWrite( readReturn );\r\n\t\t\t}\r\n\t\t} );\r\n\t}\r\n\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isFunction, _isObject, _internals } from '@webqit/util/js/index.js';\r\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\r\n\r\n/**\r\n *\r\n * @class Realtime\r\n */\r\nexport default class Realtime {\r\n\r\n\t/**\r\n\t * @constructor\r\n\t *\r\n\t * @param document|Element\tcontext\r\n\t */\r\n\tconstructor( context, namespace, window ) {\r\n\t\tthis.context = context;\r\n\t\tthis.namespace = namespace;\r\n\t\tthis.window = context.defaultView || context.ownerDocument?.defaultView || window;\r\n\t\tthis.document = this.window.document;\r\n\t\tthis.wq = this.window.wq;\r\n\t\tObject.defineProperty( this, '#', { value: {} } );\r\n\t}\r\n\r\n\t/**\r\n\t * Resolves arguments\r\n\t * \r\n\t * @param Array \t\t\targs \r\n\t * \r\n\t * @returns Array\r\n\t */\r\n\tresolveArgs( args ) {\r\n\t\tif ( _isFunction( args[ 0 ] ) ) { args = [ [], ...args ]; }\r\n\t\telse if ( _isObject( args[ 0 ] ) && args.length === 1 ) {\r\n\t\t\targs = [ [], undefined, args[ 0 ] ];\r\n\t\t} else if ( _isObject( args[ 1 ] ) && args.length === 2 ) {\r\n\t\t\targs = [ _arrFrom( args[ 0 ], false/*castObject*/ ), undefined, args[ 1 ] ];\r\n\t\t} else { args[ 0 ] = _arrFrom( args[ 0 ], false/*castObject*/ ); }\r\n\t\treturn args;\r\n\t}\r\n\r\n\t/**\r\n\t * @registry\r\n\t *\r\n\t * @param Array\t\t\t\t...args\r\n\t * \r\n\t * @returns Map\r\n\t */\r\n\tregistry( ...args ) {\r\n\t\treturn _internals( this.window, 'dom.realtime', this.namespace, ...args );\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * @createSignalGenerator\r\n\t * \r\n\t * @param Object \t\t\tmo \r\n\t * \r\n\t * @returns Object\r\n\t */\r\n\tcreateSignalGenerator() {\r\n\t\treturn {\r\n\t\t\tgenerate() {\r\n\t\t\t\t// Abort previous\r\n\t\t\t\tthis.lastController?.abort();\r\n\t\t\t\tthis.lastController = new AbortController;\r\n\t\t\t\tconst flags = { signal: this.lastController.signal };\r\n\t\t\t\treturn flags;\r\n\t\t\t},\r\n\t\t\tdisconnect() { this.lastController?.abort(); }\r\n\t\t}\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * Loops through registration objects whose contexts match the event context.\r\n\t * \r\n\t * @param String \t\tinterceptionTiming\r\n\t * @param Object|Array \trecord_s\r\n\t * @param Function \t\tcallback \r\n\t * \r\n\t * @returns void\r\n\t */\r\n\tforEachMatchingContext( interceptionTiming, record_s, callback ) {\r\n\t\tconst { window } = this, records = Array.isArray( record_s ) ? record_s : [ record_s ];\r\n\t\tthis.registry( interceptionTiming ).forEach( ( registries, depth ) => {\r\n\t\t\tregistries.forEach( ( registry, context ) => {\r\n\t\t\t\t// Ensure event target is/within context\r\n\t\t\t\tconst matches = records.filter( record => {\r\n\t\t\t\t\treturn record.target === context || (\r\n\t\t\t\t\t\tdepth === 'subtree' && ( context === window.document && record.target.isConnected || context.contains( record.target ) )\r\n\t\t\t\t\t);\r\n\t\t\t\t} );\r\n\t\t\t\tif ( matches.length ) {\r\n\t\t\t\t\tregistry.forEach( registration => callback.call( this, registration, Array.isArray( record_s ) ? matches : matches[ 0 ], context ) );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t} );\r\n\t}\r\n\r\n\t/**\r\n\t * @disconnectables\r\n\t * \r\n\t * @param AbortSignal \t\tsignal\r\n\t * @param Array \t\t\t...objects \r\n\t * \r\n\t * @returns Object\r\n\t */\r\n\tdisconnectables( signal, ...objects ) {\r\n\t\tconst disconnectable = { disconnect() {\r\n\t\t\tobjects.forEach( d => (\r\n\t\t\t\td && _isFunction( d.disconnect ) && d.disconnect() \r\n\t\t\t\t|| _isFunction( d ) && d() \r\n\t\t\t\t|| _isObject( d ) && ( d.disconnected = true )\r\n\t\t\t) );\r\n\t\t} };\r\n\t\tif ( signal ) signal.addEventListener( 'abort', () => disconnectable.disconnect() );\r\n\t\treturn disconnectable;\r\n\t}\r\n}\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport Realtime from './Realtime.js';\r\n\r\n/**\r\n *\r\n * @class AttrRealtime\r\n */\r\nexport default class AttrRealtime extends Realtime {\r\n\r\n\t/**\r\n\t * @constructor\r\n\t */\r\n\tconstructor( context, ...args ) {\r\n\t\tsuper( context, 'attr', ...args );\r\n\t}\r\n\t\r\n\t/**\r\n\t * Runs a query.\r\n\t *\r\n\t * @param array|string\t\t\t\tfilter\r\n\t * @param function\t\t\t\t\tcallback\r\n\t * @param object\t\t\t\t\tparams\r\n\t *\r\n\t * @return Disconnectable|Void\r\n\t */\r\n\tget( filter, callback = undefined, params = {} ) {\r\n\t\tconst originalFilterIsString = typeof filter === 'string';\r\n\t\t[ filter = [], callback = undefined, params = {} ] = this.resolveArgs( arguments );\r\n\t\tconst { context } = this;\r\n\t\t// -------------\r\n\t\tconst records = attrIntersection( context, filter );\r\n\t\tconst record_s = originalFilterIsString ? records[ 0 ] : records;\r\n\t\tif ( !callback ) return record_s;\r\n\t\tcallback( record_s, {}, context );\r\n\t\t// -------------\r\n\t\tif ( params.live ) {\r\n\t\t\tconst disconnectable_live = this.observe( filter, callback, params );\r\n\t\t\treturn this.disconnectables( params.signal, disconnectable_live );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Mutation Observer\r\n\t * \r\n\t * @param array|string\t\t\t\tfilter\r\n\t * @param function\t\t\t\t\tcallback\r\n\t * @param object\t\t\t\t\tparams\r\n\t * \r\n\t * @returns Disconnectable\r\n\t */\r\n\tobserve( filter, callback, params = {} ) {\r\n\t\tconst originalFilterIsString = typeof filter === 'string';\r\n\t\t[ filter = [], callback, params = {} ] = this.resolveArgs( arguments );\r\n\t\t// ------------------------\r\n\t\tif ( [ 'sync', 'intercept' ].includes( params.timing ) ) return this.observeSync( filter, callback, params );\r\n\t\tif ( params.timing && params.timing !== 'async' ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\r\n\t\t// ------------------------\r\n\t\tconst { context, window, wq } = this;\r\n\t\t// ------------------\r\n\t\tif ( params.eventDetails && !wq.attrInterceptionHooks?.intercepting ) {\r\n\t\t\tattrInterception.call( window, 'intercept', () => {} );\r\n\t\t}\r\n\t\t// -------------\r\n\t\tconst disconnectable = new window.MutationObserver( records => {\r\n\t\t\trecords = dedup( records ).map( rcd => withAttrEventDetails.call( window, rcd ) );\r\n\t\t\tdispatch.call( window, registration, records, context );\r\n\t\t} );\r\n\t\t// ------------------\r\n\t\tconst $params = { attributes: true, attributeOldValue: params.oldValue, subtree: params.subtree };\r\n\t\tif ( filter.length ) { $params.attributeFilter = filter; }\r\n\t\tdisconnectable.observe( context, $params );\r\n\t\t// -------------\r\n\t\tconst signalGenerator = params.lifecycleSignals && this.createSignalGenerator();\r\n\t\tconst registration = { context, filter, callback, params, parrallels: new Map, originalFilterIsString, signalGenerator, disconnectable };\r\n\t\t// -------------\r\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\r\n\t}\r\n\t\r\n\t/**\r\n\t * Mutation Interceptor\r\n\t * \r\n\t * @param array|string\t\t\t\tfilter\r\n\t * @param function\t\t\t\t\tcallback\r\n\t * @param object\t\t\t\t\tparams\r\n\t * \r\n\t * @returns Disconnectable\r\n\t */\r\n\tobserveSync( filter, callback, params = {} ) {\r\n\t\tconst originalFilterIsString = typeof filter === 'string';\r\n\t\t[ filter, callback, params = {} ] = this.resolveArgs( arguments );\r\n\t\tconst { context, window } = this;\r\n\t\t// -------------\r\n\t\tif ( params.timing && ![ 'sync', 'intercept' ].includes( params.timing ) ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\r\n\t\tconst interceptionTiming = params.timing === 'intercept' ? 'intercept' : 'sync';\r\n\t\tconst intersectionDepth = params.subtree ? 'subtree' : 'children';\r\n\t\tif ( !this.registry( interceptionTiming ).size ) {\r\n\t\t\t// One handler per intercept/sync registry\r\n\t\t\tattrInterception.call( window, interceptionTiming, records => {\r\n\t\t\t\tthis.forEachMatchingContext( interceptionTiming, records, dispatch );\r\n\t\t\t} );\r\n\t\t}\r\n\t\t// -------------\r\n\t\tconst disconnectable = { disconnect() {\r\n\t\t\tregistry.delete( registration );\r\n\t\t\tif ( !registry.size ) { registries.delete( context ); }\r\n\t\t} };\r\n\t\tconst signalGenerator = params.lifecycleSignals && this.createSignalGenerator();\r\n\t\tconst registration = { context, filter, callback, params, parrallels: new Map, originalFilterIsString, signalGenerator, disconnectable };\r\n\t\t// -------------\r\n\t\tconst registries = this.registry( interceptionTiming, intersectionDepth );\r\n\t\tif ( !registries.has( context ) ) { registries.set( context, new Set ); }\r\n\t\tconst registry = registries.get( context );\r\n\t\tregistry.add( registration );\r\n\t\t// -------------\r\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\r\n\t}\r\n}\r\n\r\n/**\r\n * Deduplicates records.\r\n * \r\n * @param Array \t\t\trecords\r\n * \r\n * @returns Array\r\n */\r\nfunction dedup( records ) {\r\n\treturn records.reduce( ( rcds, rcd, i ) => {\r\n\t\tif ( rcds[ i - 1 ]?.attributeName === rcd.attributeName ) return rcds;\r\n\t\treturn rcds.concat( rcd );\r\n\t}, [] );\r\n}\r\n\r\n/**\r\n * Dispatches a mutation record if it matches the observed.\r\n * \r\n * @param Object \t\t\tregistration\r\n * @param Array \t\t\trecords\r\n * \r\n * @returns Void\r\n */\r\nfunction dispatch( registration, records ) {\r\n\tconst { context, filter, callback, params, parrallels, originalFilterIsString, signalGenerator } = registration;\r\n\tif ( params.parrallels && !parrallels.size ) {\r\n\t\trecords = attrIntersection( context, filter, records );\r\n\t}\r\n\t// Should we care about old / new values being present?\r\n\tif ( !( params.newValue === null && params.oldValue === null ) ) {\r\n\t\trecords = records.map( rcd => {\r\n\t\t\tlet exclusion;\r\n\t\t\tif ( !params.oldValue && 'oldValue' in rcd ) {\r\n\t\t\t\t( { oldValue: exclusion, ...rcd } = rcd );\r\n\t\t\t} else if ( !params.newValue && 'value' in rcd ) {\r\n\t\t\t\t( { value: exclusion, ...rcd } = rcd );\r\n\t\t\t} else if ( params.newValue && typeof rcd.value === 'undefined' ) {\r\n\t\t\t\trcd = {  ...rcd, value: rcd.target.getAttribute( rcd.name ) };\r\n\t\t\t}\r\n\t\t\treturn rcd;\r\n\t\t} );\r\n\t}\r\n\tif ( params.parrallels ) {\r\n\t\trecords.forEach( record => parrallels.set( record.name, record ) );\r\n\t\trecords = Array.from( parrallels.entries() ).map( ( [ , value ] ) => value );\r\n\t}\r\n\tconst record_s = originalFilterIsString ? records[ 0 ] : records;\r\n\tconst flags = signalGenerator?.generate() || {};\r\n\tcallback( record_s, flags, context );\r\n}\r\n\r\n/**\r\n * Helper to determining which records to deliver.\r\n * \r\n * @param Object \t\t\tcontext\r\n * @param Array \t\t\tfilter\r\n * @param Array \t\t\trecords\r\n * \r\n * @returns Array\r\n */\r\nfunction attrIntersection( context, filter, records = [] ) {\r\n\tconst _type = { event: null, type: 'attribute' };\r\n\tif ( filter.length ) {\r\n\t\treturn filter.map( attrName => {\r\n\t\t\treturn records.find( r => r.name === attrName ) || { target: context, name: attrName, value: context.getAttribute( attrName ), ..._type };\r\n\t\t} );\r\n\t}\r\n\tconst attrs = Array.from( context.attributes );\r\n\treturn attrs.map( attr => {\r\n\t\treturn records.find( r => r.name === attr.nodeName ) || { target: context, name: attr.nodeName, value: attr.nodeValue, ..._type };\r\n\t} );\r\n}\r\n\r\n/**\r\n * Determines the event for an attr mutation record.\r\n * \r\n * @param MutationRecord \t{ target, attributeName }\r\n * \r\n * @returns Object\r\n */\r\nfunction withAttrEventDetails( { target, attributeName, value, oldValue } ) {\r\n\tconst window = this, registry = window.wq.attrInterceptionRecords?.get( target ) || {};\r\n\tconst event = registry[ attributeName ] || 'mutation';\r\n\tconst record = { target, name: attributeName, value, oldValue, type: 'observation', event };\r\n\treturn record;\r\n}\r\n\r\n/**\r\n * Attributes intersection engine.\r\n * \r\n * @param String \t\t\ttiming \r\n * @param Function \t\t\tcallback \r\n * \r\n * @returns \r\n */\r\nfunction attrInterception( timing, callback ) {\r\n\tconst window = this;\r\n\tconst { wq, document, Element } = window;\r\n\tif ( !wq.attrInterceptionHooks ) { wq.attrInterceptionHooks = new Map; }\r\n\tif ( !wq.attrInterceptionHooks.has( timing ) ) { wq.attrInterceptionHooks.set( timing, new Set ); }\r\n\twq.attrInterceptionHooks.get( timing ).add( callback );\r\n\tconst rm = () => wq.attrInterceptionHooks.get( timing ).delete( callback );\r\n\tif ( wq.attrInterceptionHooks?.intercepting ) return rm;\r\n\tconsole.warn( `Attr mutation APIs are now being intercepted.` );\r\n\twq.attrInterceptionHooks.intercepting = true;\r\n\twq.attrInterceptionRecords = new Map;\r\n\r\n\t// Interception hooks\r\n\tconst attrIntercept = ( record, defaultAction ) => {\r\n\t\tif ( !wq.attrInterceptionRecords.has( record.target ) ) { wq.attrInterceptionRecords.set( record.target, {} ); }\r\n\t\tconst registry = wq.attrInterceptionRecords.get( record.target );\r\n\t\t// ------------------\r\n\t\tclearTimeout( registry[ record.name ]?.timeout ); // Clear any previous that's still active\r\n\t\tregistry[ record.name ] = record.event; // Main: set event details... and next to timeout details\r\n\t\tconst timeout = setTimeout( () => { delete registry[ record.name ]; }, 0 );\r\n\t\tObject.defineProperty( record.event, 'timeout', { value: timeout } );\r\n\t\t// ------------------\r\n\t\twq.attrInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( [ record ] ) );\r\n\t\tconst returnValue = defaultAction();\r\n\t\twq.attrInterceptionHooks.get( 'sync' )?.forEach( callback => callback( [ record ] ) );\r\n\t\treturn returnValue;\r\n\t};\r\n\r\n\t// Interception observer WILL need to know non-API-based mutations\r\n\tconst mo = new window.MutationObserver( records => {\r\n\t\trecords = dedup( records ).map( rcd => withAttrEventDetails.call( window, rcd ) ).filter( ( rcd, i ) => {\r\n\t\t\treturn !Array.isArray( rcd.event );\r\n\t\t} );\r\n\t\tif ( !records.length ) return;\r\n\t\twq.attrInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( records ) );\r\n\t\twq.attrInterceptionHooks.get( 'sync' )?.forEach( callback => callback( records ) );\r\n\t} );\r\n\tmo.observe( document, { attributes: true, subtree: true, attributeOldValue: true } );\r\n\r\n\t// Intercept DOM attr mutation methods\r\n\tconst originalApis = Object.create( null );\r\n\t[ 'setAttribute', 'removeAttribute', 'toggleAttribute', ].forEach( apiName => {\r\n\t\toriginalApis[ apiName ] = Element.prototype[ apiName ];\r\n\t\tElement.prototype[ apiName ] = function( ...args ) {\r\n\t\t\tlet value, oldValue = this.getAttribute( args[ 0 ] );\r\n\t\t\tif ( [ 'setAttribute', 'toggleAttribute' ].includes( apiName ) ) { value = args[ 1 ]; }\r\n\t\t\tif ( apiName === 'toggleAttribute' && value === undefined ) {\r\n\t\t\t\tvalue = oldValue === null ? true : false;\r\n\t\t\t}\r\n\t\t\tconst record = { target: this, name: args[ 0 ], value, oldValue, type: 'interception', event: [ this, apiName ] };\r\n\t\t\tconst exec = () => originalApis[ apiName ].call( this, ...args );\r\n\t\t\treturn attrIntercept( record, exec );\r\n\t\t}\r\n\t} );\r\n\r\n\treturn rm;\r\n}\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isObject } from '@webqit/util/js/index.js';\r\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\r\nimport AttrRealtime from './AttrRealtime.js';\r\nimport Realtime from './Realtime.js';\r\n\r\n/**\r\n *\r\n * @class DOMRealtime\r\n */\r\nexport default class DOMRealtime extends Realtime {\r\n\r\n\t/**\r\n\t * @constructor\r\n\t */\r\n\tconstructor( context, ...args ) {\r\n\t\tsuper( context, 'tree', ...args );\r\n\t}\r\n\r\n\t/**\r\n\t * Alias for ( new AttrRealtime() ).all( ... )\r\n\t */\r\n\tattr( filter, callback = undefined, params = {} ) {\r\n\t\tconst { context, window } = this;\r\n\t\treturn ( new AttrRealtime( context, window ) ).get( ...arguments );\r\n\t}\r\n\r\n\t/**\r\n\t * Runs a query.\r\n\t *\r\n\t * @param array|Element|string\t\tselectors\r\n\t * @param function\t\t\t\t\tcallback\r\n\t * @param object\t\t\t\t\tparams\r\n\t *\r\n\t * @return Disconnectable|Void\r\n\t */\r\n\tquery( selectors, callback = undefined, params = {} ) {\r\n\t\t[ selectors, callback = undefined, params = {} ] = this.resolveArgs( arguments );\r\n\t\tconst { context } = this;\r\n\t\t// ------------------\r\n\t\tconst records = new Map, getRecord = target => {\r\n\t\t\tif ( !records.has( target ) ) { records.set( target, { target, entrants: [], exits: [], type: 'query', event: null } ); }\r\n\t\t\treturn records.get( target );\r\n\t\t};\r\n\t\t// ------------------\r\n\t\tif ( !params.on || params.on === 'connected' ) {\r\n\t\t\tif ( !selectors.length ) {\r\n\t\t\t\t//if ( params.subtree ) throw new Error( `The subtree option requires a selector to work.` );\r\n\t\t\t\t[ ...context.children ].forEach( node => getRecord( context ).entrants.push( node ) );\r\n\t\t\t} else if ( selectors.every( selector => typeof selector === 'string' ) && ( selectors = selectors.join( ',' ) ) ) {\r\n\t\t\t\tconst matches = params.subtree \r\n\t\t\t\t\t? context.querySelectorAll( selectors ) \r\n\t\t\t\t\t: [ ...context.children ].filter( node => node.matches( selectors ) );\r\n\t\t\t\tmatches.forEach( node => getRecord( node.parentNode || context ).entrants.push( node ) );\r\n\t\t\t}\r\n\t\t}\r\n\t\t// ------------------\r\n\t\tif ( !callback ) return records;\r\n\t\tconst disconnectable = { disconnected: false };\r\n\t\tconst signalGenerator = callback && params.lifecycleSignals && this.createSignalGenerator();\r\n\t\tfor ( let [ , record ] of records ) {\r\n\t\t\tif ( disconnectable.disconnected ) break;\r\n\t\t\tconst flags = signalGenerator?.generate() || {};\r\n\t\t\tcallback( record, flags, context );\r\n\t\t}\r\n\t\t// ------------------\r\n\t\tif ( params.live ) {\r\n\t\t\tconst disconnectable_live = this.observe( selectors, callback, params );\r\n\t\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator, disconnectable_live );\r\n\t\t}\r\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\r\n\t}\r\n\r\n\t/**\r\n\t * Alias for query( ..., { subtree: false } )\r\n\t */\r\n\tchildren( selectors, callback = undefined, params = {} ) {\r\n\t\t[ selectors, callback = undefined, params = {} ] = this.resolveArgs( arguments );\r\n\t\treturn this.query( selectors, callback, { ...params, subtree: false } );\r\n\t}\r\n\r\n\t/**\r\n\t * Alias for query( ..., { subtree: true } )\r\n\t */\r\n\tsubtree( selectors, callback = undefined, params = {} ) {\r\n\t\t[ selectors, callback = undefined, params = {} ] = this.resolveArgs( arguments );\r\n\t\treturn this.query( selectors, callback, { ...params, subtree: true } );\r\n\t}\r\n\r\n\t/**\r\n\t * Mutation Observer\r\n\t * \r\n\t * @param array|Element|string\t\tselectors\r\n\t * @param function\t\t\t\t\tcallback\r\n\t * @param object\t\t\t\t\tparams\r\n\t * \r\n\t * @returns Disconnectable\r\n\t */\r\n\tobserve( selectors, callback, params = {} ) {\r\n\t\t[ selectors, callback, params = {} ] = this.resolveArgs( arguments );\r\n\t\t// ------------------------\r\n\t\tif ( [ 'sync', 'intercept' ].includes( params.timing ) ) return this.observeSync( selectors, callback, params );\r\n\t\tif ( params.timing && params.timing !== 'async' ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\r\n\t\t// ------------------------\r\n\t\tconst { context, window, wq, document } = this;\r\n\t\t// ------------------\r\n\t\tif ( params.eventDetails ) { wq.domInterceptionRecordsAlwaysOn = true; }\r\n\t\tif ( ( document.readyState === 'loading' || wq.domInterceptionRecordsAlwaysOn ) && !wq.domInterceptionHooks?.intercepting ) {\r\n\t\t\tdomInterception.call( window, 'sync', () => {} );\r\n\t\t}\r\n\t\t// -------------\r\n\t\tconst disconnectable = new window.MutationObserver( records => records.forEach( record => {\r\n\t\t\tdispatch.call( window, registration, withEventDetails.call( window, record ), context );\r\n\t\t} ) );\r\n\t\tdisconnectable.observe( context, { childList: true, subtree: params.subtree, } );\r\n\t\tconst signalGenerator = params.lifecycleSignals && this.createSignalGenerator();\r\n\t\tconst registration = { context, selectors, callback, params, signalGenerator, disconnectable };\r\n\t\t// -------------\r\n\t\tif ( params.staticSensitivity ) {\r\n\t\t\tconst disconnectable_attr = staticSensitivity.call( window, registration );\r\n\t\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator, disconnectable_attr );\r\n\t\t}\r\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\r\n\t}\r\n\t\r\n\t/**\r\n\t * Mutation Interceptor\r\n\t * \r\n\t * @param array|Element|string\t\tselectors\r\n\t * @param function\t\t\t\t\tcallback\r\n\t * @param object\t\t\t\t\tparams\r\n\t * \r\n\t * @returns Disconnectable\r\n\t */\r\n\tobserveSync( selectors, callback, params = {} ) {\r\n\t\t[ selectors, callback, params = {} ] = this.resolveArgs( arguments );\r\n\t\tconst { context, window } = this;\r\n\t\t// -------------\r\n\t\tif ( params.timing && ![ 'sync', 'intercept' ].includes( params.timing ) ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\r\n\t\tconst interceptionTiming = params.timing === 'intercept' ? 'intercept' : 'sync';\r\n\t\tconst intersectionDepth = params.subtree ? 'subtree' : 'children';\r\n\t\tif ( !this.registry( interceptionTiming ).size ) {\r\n\t\t\t// One handler per intercept/sync registry\r\n\t\t\tdomInterception.call( window, interceptionTiming, record => {\r\n\t\t\t\tthis.forEachMatchingContext( interceptionTiming, record, dispatch );\r\n\t\t\t} );\r\n\t\t}\r\n\t\t// -------------\r\n\t\tconst disconnectable = { disconnect() {\r\n\t\t\tregistry.delete( registration );\r\n\t\t\tif ( !registry.size ) { registries.delete( context ); }\r\n\t\t} };\r\n\t\tconst signalGenerator = params.lifecycleSignals && this.createSignalGenerator();\r\n\t\tconst registration = { context, selectors, callback, params, signalGenerator, disconnectable };\r\n\t\t// -------------\r\n\t\tconst registries = this.registry( interceptionTiming, intersectionDepth );\r\n\t\tif ( !registries.has( context ) ) { registries.set( context, new Set ); }\r\n\t\tconst registry = registries.get( context );\r\n\t\tregistry.add( registration );\r\n\t\t// -------------\r\n\t\tif ( params.staticSensitivity ) {\r\n\t\t\tconst disconnectable_attr = staticSensitivity.call( window, registration );\r\n\t\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator, disconnectable_attr );\r\n\t\t}\r\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\r\n\t}\r\n}\r\n\r\n/**\r\n * Sensitivty for attribute changes for attribute selectors.\r\n * \r\n * @param object registration\r\n * \r\n * @returns Disconnectable\r\n */\r\nfunction staticSensitivity( registration ) {\r\n\tconst window = this;\r\n\tconst { context, selectors, callback, params, signalGenerator } = registration;\r\n\tconst parse = selector => [ ...selector.matchAll(/\\[([^\\=\\]]+)(\\=[^\\]]+)?\\]/g) ].map( x => x[ 1 ] );\r\n\tif ( !( registration.$attrs = selectors.filter( s => typeof s === 'string' && s.includes( '[' ) ).reduce( ( attrs, selector ) => attrs.concat( parse( selector ) ), [] ) ).length ) return;\r\n\t// ---------\r\n\tconst entrants = new Set, exits = new Set;\r\n\tentrants.push = val => ( exits.delete( val ), entrants.add( val ) );\r\n\texits.push = val => ( entrants.delete( val ), exits.add( val ) );\r\n\tregistration.$deliveryCache = { entrants, exits };\r\n\t// ---------\r\n\treturn ( new AttrRealtime( context, window ) ).observe( registration.$attrs, _records => {\r\n\t\tconst records = new Map, getRecord = target => {\r\n\t\t\tif ( !records.has( target ) ) { records.set( target, { target, entrants: [], exits: [], type: 'static', event: null } ); }\r\n\t\t\treturn records.get( target );\r\n\t\t};\r\n\t\t// ---------\r\n\t\tconst matchesCache = new WeakMap;\r\n\t\tconst matches = node => {\r\n\t\t\tif ( !matchesCache.has( node ) ) { matchesCache.set( node, selectors.some( selector => node.matches( selector ) ) ); }\r\n\t\t\treturn matchesCache.get( node );\r\n\t\t};\r\n\t\t// ---------\r\n\t\tfor ( let _record of _records ) {\r\n\t\t\t[ 'entrants', 'exits' ].forEach( generation => {\r\n\t\t\t\tif ( params.generation && generation !== params.generation ) return;\r\n\t\t\t\tif ( registration.$deliveryCache[ generation ].has( _record.target ) || ( generation === 'entrants' ? !matches( _record.target ) : matches( _record.target ) ) ) return;\r\n\t\t\t\tregistration.$deliveryCache[ generation ].push( _record.target );\r\n\t\t\t\tgetRecord( _record.target )[ generation ].push( _record.target );\r\n\t\t\t\tgetRecord( _record.target ).event = _record.event;\r\n\t\t\t} );\r\n\t\t}\r\n\t\t// ---------\r\n\t\tfor ( const [ , record ] of records ) {\r\n\t\t\tconst flags = signalGenerator?.generate() || {};\r\n\t\t\tcallback( record, flags, context );\r\n\t\t}\r\n\t}, { subtree: params.subtree, timing: params.timing, eventDetails: params.eventDetails } );\r\n}\r\n\r\n/**\r\n * Dispatches a mutation record if it matches the observed.\r\n * \r\n * @param Object \t\t\tregistration \r\n * @param Object \t\t\trecord \r\n * \r\n * @returns Void\r\n */\r\nfunction dispatch( registration, _record ) {\r\n\tconst { context, selectors, callback, params, signalGenerator, $deliveryCache } = registration;\r\n\t// ---------\r\n\tconst record = { ..._record, entrants: [], exits: [] };\r\n\t[ 'entrants', 'exits' ].forEach( generation => {\r\n\t\tif ( params.generation && generation !== params.generation ) return;\r\n\t\tif ( selectors.length ) {\r\n\t\t\trecord[ generation ] = nodesIntersection( selectors, _record[ generation ], _record.event !== 'parse' );\r\n\t\t} else {\r\n\t\t\trecord[ generation ] = [ ..._record[ generation ] ];\r\n\t\t}\r\n\t\tif ( !$deliveryCache ) return;\r\n\t\tfor ( let node of record[ generation ] ) {\r\n\t\t\t$deliveryCache[ generation ].push( node );\r\n\t\t}\r\n\t} );\r\n\t// ---------\r\n\tif ( !record.entrants.length && !record.exits.length ) return;\r\n\tconst flags = signalGenerator?.generate() || {};\r\n\tcallback( record, flags, context );\r\n}\r\n\r\n/**\r\n * Aggregates instances of els in sources\r\n * \r\n * @param Array \t\t\ttargets \r\n * @param Array \t\t\tsources \r\n * @param Bool \t\t\t\tdeepIntersect \r\n * \r\n * @returns \r\n */\r\nfunction nodesIntersection( targets, sources, deepIntersect ) {\r\n\tsources = Array.isArray( sources ) ? sources : [ ...sources ];\r\n\tconst match = ( sources, target ) => {\r\n\t\t// Filter out text nodes\r\n\t\tsources = sources.filter( source => source.matches );\r\n\t\tif ( typeof target === 'string' ) {\r\n\t\t\t// Is directly mutated...\r\n\t\t\tlet matches = sources.filter( source => source.matches( target ) );\r\n\t\t\t// Is contextly mutated...\r\n\t\t\tif ( deepIntersect ) {\r\n\t\t\t\tmatches = sources.reduce( ( collection, source ) => {\r\n\t\t\t\t\treturn [ ...collection, ...source.querySelectorAll( target ) ];\r\n\t\t\t\t}, matches );\r\n\t\t\t}\r\n\t\t\tif ( matches.length ) return matches;\r\n\t\t} else {\r\n\t\t\t// Is directly mutated...\r\n\t\t\tif ( sources.includes( target ) || (\r\n\t\t\t\tdeepIntersect && sources.some( source => source.contains( target ) )\r\n\t\t\t) ) { return [ target ]; }\r\n\t\t}\r\n\t};\r\n\t// Search can be expensive...\r\n\t// Multiple listeners searching the same thing in the same list?\r\n\tif ( !sources.$$searchCache ) { sources.$$searchCache = new Map; }\r\n\treturn targets.reduce( ( matches, target ) => {\r\n\t\tlet _matches;\r\n\t\tif ( sources.$$searchCache.has( target ) ) {\r\n\t\t\t_matches = sources.$$searchCache.get( target );\r\n\t\t} else {\r\n\t\t\t_matches = match( sources, target ) || [];\r\n\t\t\tif ( _isObject( target ) ) {\r\n\t\t\t\tsources.$$searchCache.set( target, _matches );\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn matches.concat( _matches );\r\n\t}, [] );\r\n}\r\n\r\n/**\r\n * Determines the event for a mutation record\r\n * \r\n * @param MutationRecord \t{ target, entrants, exits }\r\n * \r\n * @returns Object\r\n */\r\nfunction withEventDetails( { target, addedNodes, removedNodes } ) {\r\n\tlet window = this, event;\r\n\tevent = _arrFrom( addedNodes ).reduce( ( prev, node ) => prev || window.wq.domInterceptionRecords?.get( node ), null );\r\n\tevent = _arrFrom( removedNodes ).reduce( ( prev, node ) => prev || window.wq.domInterceptionRecords?.get( node ), event );\r\n\tevent = event || window.document.readyState === 'loading' && 'parse' || 'mutation';\r\n\treturn { target, entrants: addedNodes, exits: removedNodes, type: 'observation', event };\r\n}\r\n\r\n/**\r\n * DOM intersection engine.\r\n * \r\n * @param String \t\t\ttiming \r\n * @param Function \t\t\tcallback \r\n * \r\n * @returns \r\n */\r\nfunction domInterception( timing, callback ) {\r\n\tconst window = this;\r\n\tconst { wq, document, Node, Element, HTMLElement, HTMLTemplateElement, DocumentFragment } = window;\r\n\tif ( !wq.domInterceptionHooks ) { wq.domInterceptionHooks = new Map; }\r\n\tif ( !wq.domInterceptionHooks.has( timing ) ) { wq.domInterceptionHooks.set( timing, new Set ); }\r\n\twq.domInterceptionHooks.get( timing ).add( callback );\r\n\tconst rm = () => wq.domInterceptionHooks.get( timing ).delete( callback );\r\n\tif ( wq.domInterceptionHooks?.intercepting ) return rm;\r\n\tconsole.warn( `DOM mutation APIs are now being intercepted.` );\r\n\twq.domInterceptionHooks.intercepting = true;\r\n\twq.domInterceptionRecords = new Map;\r\n\r\n\t// Interception hooks\r\n\tconst intercept = ( record, defaultAction ) => {\r\n\t\tif ( document.readyState === 'loading' || wq.domInterceptionRecordsAlwaysOn ) {\r\n\t\t\trecord.entrants.concat( record.exits ).forEach( node => {\r\n\t\t\t\tclearTimeout( wq.domInterceptionRecords.get( node )?.timeout ); // Clear any previous that's still active\r\n\t\t\t\twq.domInterceptionRecords.set( node, record.event ); // Main: set event details... and next to timeout details\r\n\t\t\t\tconst timeout = setTimeout( () => { wq.domInterceptionRecords.delete( node ); }, 0 );\r\n\t\t\t\tObject.defineProperty( record.event, 'timeout', { value: timeout } );\r\n\t\t\t} );\r\n\t\t} else { wq.domInterceptionRecords.clear(); }\r\n\t\twq.domInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( record ) );\r\n\t\tconst returnValue = defaultAction();\r\n\t\twq.domInterceptionHooks.get( 'sync' )?.forEach( callback => callback( record ) );\r\n\t\treturn returnValue;\r\n\t};\r\n\r\n\t// Interception observer WILL need to know non-API-based mutations\r\n\tif ( document.readyState === 'loading' ) {\r\n\t\tconst mo = new window.MutationObserver( records => records.forEach( record => {\r\n\t\t\tif ( Array.isArray( ( record = withEventDetails.call( window, record ) ).event ) ) return;\r\n\t\t\twq.domInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( record ) );\r\n\t\t\twq.domInterceptionHooks.get( 'sync' )?.forEach( callback => callback( record ) );\r\n\t\t} ) );\r\n\t\tmo.observe( document, { childList: true, subtree: true, } );\r\n\t\tdocument.addEventListener( 'readystatechange', () => mo.disconnect() );\r\n\t}\r\n\r\n\t// Intercept DOM mutation methods\r\n\tconst originalApis = Object.create( null );\r\n\t[ 'insertBefore'/*Node*/, 'insertAdjacentElement', 'insertAdjacentHTML', 'setHTML',\r\n\t\t'replaceChildren', 'replaceWith', 'remove', 'replaceChild'/*Node*/, 'removeChild'/*Node*/, \r\n\t\t'before', 'after', 'append', 'prepend', 'appendChild'/*Node*/, \r\n\t].forEach( apiName => {\r\n\t\t// We'll be sure to monkey the correct interface\r\n\t\tconst Interface = [ 'insertBefore', 'replaceChild', 'removeChild', 'appendChild' ].includes( apiName ) ? Node : Element;\r\n\t\toriginalApis[ apiName ] = Interface.prototype[ apiName ];\r\n\t\t// In case newer methods like setHTML() are not supported\r\n\t\tif ( !originalApis[ apiName ] ) return;\r\n\t\t// Monkey now...\r\n\t\tInterface.prototype[ apiName ] = function( ...args ) {\r\n\t\t\t// Instance of Node interface? Abort!\r\n\t\t\tconst exec = () => originalApis[ apiName ].call( this, ...args );\r\n\t\t\tif ( !( this instanceof Element || this instanceof DocumentFragment ) ) return exec();\r\n\t\t\t// --------------\r\n\t\t\t// Obtain exits and entrants\r\n\t\t\tlet exits = [], entrants = [], target = this;\r\n\t\t\tif ( [ 'insertBefore' ].includes( apiName ) ) {\r\n\t\t\t\tentrants = [ args[ 0 ] ];\r\n\t\t\t} else if ( [ 'insertAdjacentElement', 'insertAdjacentHTML' ].includes( apiName ) ) {\r\n\t\t\t\tentrants = [ args[ 1 ] ];\r\n\t\t\t\tif ( [ 'beforebegin', 'afterend' ].includes( args[ 0 ] ) ) {\r\n\t\t\t\t\ttarget = this.parentNode;\r\n\t\t\t\t}\r\n\t\t\t} else if ( [ 'setHTML', 'replaceChildren' ].includes( apiName ) ) {\r\n\t\t\t\texits = [ ...this.childNodes ];\r\n\t\t\t\tentrants = apiName === 'replaceChildren' ? [ ...args ] : [ args[ 0 ] ];\r\n\t\t\t} else if ( [ 'replaceWith', 'remove' ].includes( apiName ) ) {\r\n\t\t\t\texits = [ this ];\r\n\t\t\t\tentrants = apiName === 'replaceWith' ? [ ...args ] : [];\r\n\t\t\t\ttarget = this.parentNode;\r\n\t\t\t} else if ( [ 'replaceChild' ].includes( apiName ) ) {\r\n\t\t\t\texits = [ args[ 1 ] ];\r\n\t\t\t\tentrants = [ args[ 0 ] ];\r\n\t\t\t} else if ( [ 'removeChild' ].includes( apiName ) ) {\r\n\t\t\t\texits = [ ...args ];\r\n\t\t\t} else {\r\n\t\t\t\t// 'before', 'after', 'append', 'prepend', 'appendChild'\r\n\t\t\t\tentrants = [ ...args ];\r\n\t\t\t\tif ( [ 'before', 'after' ].includes( apiName ) ) {\r\n\t\t\t\t\ttarget = this.parentNode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// --------------\r\n\t\t\t// Parse HTML to entrants\r\n\t\t\tlet apiNameFinal = apiName;\r\n\t\t\tif ( [ 'insertAdjacentHTML', 'setHTML' ].includes( apiName ) ) {\r\n\t\t\t\tlet tempNodeName = this.nodeName;\r\n\t\t\t\tif ( apiName === 'insertAdjacentHTML' && [ 'beforebegin', 'afterend' ].includes( args[ 0 ] ) ) {\r\n\t\t\t\t\t// We can't handle this... and this is going to throw afterall\r\n\t\t\t\t\tif ( !this.parentNode ) return originalApis[ apiName ].call( this, ...args );\r\n\t\t\t\t\ttempNodeName = this.parentNode.nodeName;\r\n\t\t\t\t}\r\n\t\t\t\tconst temp = document.createElement( tempNodeName );\r\n\t\t\t\toriginalApis.setHTML.call( temp, entrants[ 0 ], apiName === 'setHTML' ? args[ 1 ] : {} );\r\n\t\t\t\tentrants = [ ...temp.childNodes ];\r\n\t\t\t\t// --------------  \r\n\t\t\t\tif ( apiName === 'insertAdjacentHTML' ) {\r\n\t\t\t\t\tapiNameFinal = 'insertAdjacentElement';\r\n\t\t\t\t\targs[ 1 ] = new DocumentFragment;\r\n\t\t\t\t\targs[ 1 ].______isTemp = true;\r\n\t\t\t\t\targs[ 1 ].append( ...temp.childNodes );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tapiNameFinal = 'replaceChildren';\r\n\t\t\t\t\targs = [ ...temp.childNodes ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// --------------\r\n\t\t\tconst record = { target, entrants, exits, type: 'interception', event: [ this, apiName ] };\r\n\t\t\treturn intercept( record, () => {\r\n\t\t\t\treturn originalApis[ apiNameFinal ].call( this, ...args );\r\n\t\t\t} );\r\n\t\t}\r\n\t} );\r\n\r\n\t// Intercept DOM mutation properties\r\n\t[ 'outerHTML', 'outerText'/*HTMLElement*/, 'innerHTML', \r\n\t\t'innerText'/*HTMLElement*/,'textContent'/*Node*/, 'nodeValue'/*Node*/\r\n\t].forEach( apiName => {\r\n\t\t// We'll be sure to monkey the correct interface\r\n\t\tconst Interface = [ 'textContent', 'nodeValue' ].includes( apiName ) ? Node : (\r\n\t\t\t[ 'outerText', 'innerText' ].includes( apiName ) ? HTMLElement : Element\r\n\t\t);\r\n\t\toriginalApis[ apiName ] = Object.getOwnPropertyDescriptor( Interface.prototype, apiName );\r\n\t\tObject.defineProperty( Interface.prototype, apiName, { ...originalApis[ apiName ], set: function( value ) {\r\n\t\t\tlet exec = () => originalApis[ apiName ].set.call( this, value );\r\n\t\t\t// Instance of Node interface? Abort!\r\n\t\t\tif ( !( this instanceof Element ) ) return exec();\r\n\t\t\t// --------------\r\n\t\t\t// Obtain exits and entrants\r\n\t\t\tlet exits = [], entrants = [], target = this;\r\n\t\t\tif ( [ 'outerHTML', 'outerText' ].includes( apiName ) ) {\r\n\t\t\t\texits = [ this ];\r\n\t\t\t\ttarget = this.parentNode;\r\n\t\t\t} else {\r\n\t\t\t\t// 'innerHTML', 'innerText', 'textContent', 'nodeValue'\r\n\t\t\t\texits = /*this instanceof HTMLTemplateElement \r\n\t\t\t\t\t? [ ...this.content.childNodes ]\r\n\t\t\t\t\t: */[ ...this.childNodes ];\r\n\t\t\t}\r\n\t\t\t// --------------\r\n\t\t\t// Parse HTML to nodes\r\n\t\t\tif ( [ 'outerHTML', 'innerHTML' ].includes( apiName ) ) {\r\n\t\t\t\tlet tempNodeName = this.nodeName;\r\n\t\t\t\tif ( apiName === 'outerHTML' ) {\r\n\t\t\t\t\t// We can't handle this... and this is going to throw afterall\r\n\t\t\t\t\tif ( !this.parentNode ) return exec();\r\n\t\t\t\t\ttempNodeName = this.parentNode.nodeName;\r\n\t\t\t\t}\r\n\t\t\t\tconst temp = document.createElement( tempNodeName === 'TEMPLATE' ? 'div' : tempNodeName );\r\n\t\t\t\toriginalApis[ apiName ].set.call( temp, value );\r\n\t\t\t\tentrants = /*[ ...temp.childNodes ];*/this instanceof HTMLTemplateElement ? [] : [ ...temp.childNodes ];\r\n\t\t\t\t// -------------- \r\n\t\t\t\tif ( apiName === 'outerHTML' ) {\r\n\t\t\t\t\tvalue = new DocumentFragment;\r\n\t\t\t\t\tvalue.______isTemp = true;\r\n\t\t\t\t\tvalue.append( ...temp.childNodes );\r\n\t\t\t\t\texec = () => originalApis.replaceWith.call( this, value );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ( this instanceof HTMLTemplateElement ) {\r\n\t\t\t\t\t\texec = () => this.content.replaceChildren( ...temp.childNodes );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\texec = () => originalApis.replaceChildren.call( this, ...temp.childNodes );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// -------------- \r\n\t\t\tconst record = { target, entrants, exits, type: 'interception', event: [ this, apiName ] };\r\n\t\t\treturn intercept( record, exec );\r\n\t\t} } );\r\n\t} );\r\n\r\n\t// Intercept document mutation methods\r\n\t[ 'append', 'prepend', 'replaceChildren' ].forEach( apiName => {\r\n\t\t[ document, DocumentFragment.prototype ].forEach( target => {\r\n\t\t\tconst originalApi = target[ apiName ];\r\n\t\t\ttarget[ apiName ] = function( ...args ) {\r\n\t\t\t\tif ( this.______isTemp ) return originalApi.call( this, ...args );\r\n\t\t\t\tconst exits = apiName === 'replaceChildren' ? [ ...this.childNodes ] : [];\r\n\t\t\t\tconst record = {\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tentrants: args,\r\n\t\t\t\t\texits,\r\n\t\t\t\t\ttype: 'interception', \r\n\t\t\t\t\tevent: [ this, apiName ]\r\n\t\t\t\t};\r\n\t\t\t\treturn intercept( record, () => {\r\n\t\t\t\t\treturn originalApi.call( this, ...args );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t} );\r\n\t} );\r\n\r\n\treturn rm;\r\n}\r\n", "\r\n/**\r\n * Applies all supported polyfills\r\n */\r\nexport default function() {\r\n    CSS_escape.call( this );\r\n    Node_isConnected.call( this );\r\n    Element_matches.call( this );\r\n}\r\n\r\n/**\r\n * Polyfills the window.CSS object.\r\n *  \r\n * @return void\r\n */\r\nexport function CSS_escape() {\r\n    const window = this;\r\n    if ( !window.CSS ) { window.CSS = {} }\r\n    if ( !window.CSS.escape ) {\r\n        /**\r\n         * Polyfills the window.CSS.escape() function.\r\n         *  \r\n         * @param string str \r\n         * \r\n         * @return string\r\n         */\r\n        window.CSS.escape = str => str.replace( /([\\:@\\~\\$\\&])/g, '\\\\$1' );\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Node.prototype.isConnected property\r\n * \r\n * @see MDN\r\n  *  \r\n * @return bool\r\n*/\r\nexport function Node_isConnected() {\r\n    const window = this;\r\n    if ( !( 'isConnected' in window.Node.prototype ) ) {\r\n        Object.defineProperty( window.Node.prototype, 'isConnected', { get: function() {\r\n            return !this.ownerDocument || !(\r\n                this.ownerDocument.compareDocumentPosition( this )\r\n                & this.DOCUMENT_POSITION_DISCONNECTED);\r\n        } } );\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Element.prototype.matches() method\r\n * \r\n * @see MDN\r\n  *  \r\n * @return void\r\n*/\r\nexport function Element_matches() {\r\n    const window = this;\r\n    if ( !window.Element.prototype.matches ) {\r\n        window.Element.prototype.matches = \r\n        window.Element.prototype.matchesSelector || \r\n        window.Element.prototype.mozMatchesSelector ||\r\n        window.Element.prototype.msMatchesSelector || \r\n        window.Element.prototype.oMatchesSelector || \r\n        window.Element.prototype.webkitMatchesSelector ||\r\n        function( s ) {\r\n            var matches = ( this.document || this.ownerDocument ).querySelectorAll( s ),\r\n                i = matches.length;\r\n            while ( --i >= 0 && matches.item( i ) !== this ) {}\r\n            return i > -1;            \r\n        }\r\n    }\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isNumeric } from '@webqit/util/js/index.js';\r\nimport { _set, _get, _merge } from '@webqit/util/obj/index.js';\r\nimport _Reflow from './_Reflow.js';\r\nimport DOMRealtime from './realtime/DOMRealtime.js';\r\nimport AttrRealtime from './realtime/AttrRealtime.js';\r\nimport polyfill from './polyfills.js';\r\n\r\nexport default function() {\r\n    const window = this;\r\n    if ( !window.wq ) window.wq = {};\r\n    if ( window.wq.dom ) return window.wq.dom;\r\n    window.wq.dom = {};\r\n    polyfill.call( window );\r\n    // ------\r\n    const Reflow = _Reflow( window );\r\n    window.wq.dom.Reflow = new Reflow;\r\n    // ------\r\n    window.wq.dom.DOMRealtime = DOMRealtime;\r\n    window.wq.dom.AttrRealtime = AttrRealtime;\r\n    window.wq.dom.realtime = ( context, namespace = 'tree' ) => {\r\n        if ( namespace === 'tree' ) return new DOMRealtime( context, window );\r\n        if ( namespace === 'attr' ) return new AttrRealtime( context, window );\r\n    };\r\n    // ------\r\n    window.wq.dom.ready = ready.bind( window );\r\n    window.wq.dom.meta = meta.bind( window );\r\n    // ------\r\n    return window.wq.dom;\r\n}\r\n\r\n\r\n/**\r\n * DOM-ready listeners.\r\n * \r\n * @param Function\t    \t\tcallback\r\n * \r\n * @return void\r\n */\r\nfunction ready( callback ) {\r\n\tconst window = this;\r\n\tif ( window.document.readyState === 'complete' ) {\r\n\t\tcallback( window );\r\n\t} else {\r\n\t\tif ( !window.document.domReadyCallbacks ) {\r\n\t\t\twindow.document.domReadyCallbacks = [];\r\n\t\t\twindow.document.addEventListener( 'DOMContentLoaded', () => {\r\n\t\t\t\twindow.document.domReadyCallbacks.splice( 0 ).forEach( cb => cb( window ) );\r\n\t\t\t}, false );\r\n\t\t}\r\n\t\twindow.document.domReadyCallbacks.push( callback );\r\n\t}\r\n}\r\n\r\n/**\r\n * A wq's meta tag props reader.\r\n *  \r\n * @param String name\r\n * @param Bool\t readWrite\r\n * \r\n * @return Object\r\n */\r\nfunction meta( name, readWrite = false ) {\r\n    const window = this;\r\n    const metaInstance = { content: {} };\r\n    // Initialize reader\r\n    if ( !(metaInstance.el = window.document.querySelector( `meta[name=\"${ name }\"]` ) ) && readWrite ) {\r\n        metaInstance.el = window.document.createElement( 'meta' );\r\n        metaInstance.el.setAttribute( 'name', name );\r\n        window.document.head.append( metaInstance.el );\r\n    }\r\n    if ( metaInstance.el ) {\r\n        metaInstance.content = ( metaInstance.el.getAttribute( 'content' ) || '' ).split( ';' ).filter( v => v ).reduce( ( _metaVars, directive ) => {\r\n            const directiveSplit = directive.split( '=' ).map( d => d.trim() );\r\n            _set( _metaVars, directiveSplit[ 0 ].split( '.' ), directiveSplit[ 1 ] === 'true' \r\n                ? true : (directiveSplit[ 1 ] === 'false' ? false : (\r\n                    _isNumeric( directiveSplit[ 1 ] ) ? parseInt( directiveSplit[ 1 ] ) : directiveSplit[ 1 ]\r\n                ) )\r\n            );\r\n            return _metaVars;\r\n        }, {} );\r\n    }\r\n    // Read prop...\r\n    metaInstance.get = function( prop ) { return JSON.parse( JSON.stringify( _get( this.content, prop.split( '.' ) ) ) ); }\r\n    // Copy...\r\n    metaInstance.copy = function() {\r\n\t\treturn JSON.parse( JSON.stringify( this.content ) );\r\n    };\r\n\t// Copy with defaults...\r\n    metaInstance.copyWithDefaults = function( ...defaults ) {\r\n\t\tif ( defaults.length ) return _merge( true, {}, ...defaults.reverse().concat( this.content ) );\r\n\t\treturn this.copy();\r\n    };\r\n    return metaInstance;\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport init from './index.js';\r\n\r\ninit.call( window );"],
  "mappings": "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",
  "names": ["isObject_default", "val", "internals", "obj", "namespaces", "itnls", "_ns", "_itnls", "isArray_default", "val", "isTypeFunction_default", "val", "isNull_default", "val", "isUndefined_default", "val", "isTypeObject_default", "val", "isTypeFunction_default", "isEmpty_default", "val", "isNull_default", "isUndefined_default", "isTypeObject_default", "isFunction_default", "val", "isTypeFunction_default", "isNumber_default", "val", "isNumeric_default", "val", "isNumber_default", "isString_default", "val", "isTypeArray_default", "val", "isString_default", "isUndefined_default", "pushUnique_default", "arr", "items", "itm", "getPrototypeChain_default", "obj", "until", "isArray_default", "prototypalChain", "getAllPropertyNames_default", "obj", "until", "keysAll", "getPrototypeChain_default", "pushUnique_default", "mergeCallback", "objs", "callback", "deepProps", "isReplace", "withSymbols", "depth", "obj1", "isNumeric_default", "obj2", "i", "isTypeObject_default", "isFunction_default", "getAllPropertyNames_default", "key", "valAtObj1", "valAtObj2", "isArray_default", "isObject_default", "merge_default", "objs", "mergeCallback", "k", "obj1", "obj2", "from_default", "val", "castObject", "isArray_default", "isObject_default", "isEmpty_default", "isTypeArray_default", "get_default", "ctxt", "path", "trap", "reciever", "from_default", "_ctxt", "isUndefined_default", "isNull_default", "_key", "isTypeObject_default", "set_default", "obj", "path", "val", "buildTree", "trap", "_set", "target", "key", "isNumeric_default", "i", "isArray_default", "from_default", "isTypeObject_default", "isFunction_default", "branch", "get_default", "branchSuccess", "Reflow_default", "window", "asyncDOM", "callback", "withPromise", "resolve", "reject", "onread", "onwrite", "prevTransaction", "readReturn", "callWrite", "writeReturn", "repeatTransaction", "Realtime", "context", "namespace", "window", "args", "isFunction_default", "isObject_default", "from_default", "internals", "interceptionTiming", "record_s", "callback", "records", "registries", "depth", "registry", "matches", "record", "registration", "signal", "objects", "disconnectable", "d", "AttrRealtime", "Realtime", "context", "args", "filter", "callback", "params", "originalFilterIsString", "records", "attrIntersection", "record_s", "disconnectable_live", "window", "wq", "attrInterception", "disconnectable", "dedup", "rcd", "withAttrEventDetails", "dispatch", "registration", "$params", "signalGenerator", "interceptionTiming", "intersectionDepth", "registry", "registries", "rcds", "i", "parrallels", "exclusion", "record", "value", "flags", "_type", "attrName", "r", "attr", "target", "attributeName", "oldValue", "event", "timing", "document", "Element", "rm", "attrIntercept", "defaultAction", "timeout", "returnValue", "originalApis", "apiName", "DOMRealtime", "Realtime", "context", "args", "filter", "callback", "params", "window", "AttrRealtime", "selectors", "records", "getRecord", "target", "selector", "node", "disconnectable", "signalGenerator", "record", "flags", "disconnectable_live", "wq", "document", "domInterception", "dispatch", "registration", "withEventDetails", "disconnectable_attr", "staticSensitivity", "interceptionTiming", "intersectionDepth", "registry", "registries", "parse", "x", "attrs", "entrants", "exits", "val", "_records", "matchesCache", "matches", "_record", "generation", "$deliveryCache", "nodesIntersection", "targets", "sources", "deepIntersect", "match", "source", "collection", "_matches", "isObject_default", "addedNodes", "removedNodes", "event", "from_default", "prev", "timing", "Node", "Element", "HTMLElement", "HTMLTemplateElement", "DocumentFragment", "rm", "intercept", "defaultAction", "timeout", "returnValue", "mo", "originalApis", "apiName", "Interface", "exec", "apiNameFinal", "tempNodeName", "temp", "value", "originalApi", "polyfills_default", "CSS_escape", "Node_isConnected", "Element_matches", "window", "str", "s", "matches", "i", "src_default", "window", "polyfills_default", "Reflow", "Reflow_default", "DOMRealtime", "AttrRealtime", "context", "namespace", "ready", "meta", "callback", "cb", "name", "readWrite", "metaInstance", "v", "_metaVars", "directive", "directiveSplit", "d", "set_default", "isNumeric_default", "prop", "get_default", "defaults", "merge_default", "src_default"]
}
