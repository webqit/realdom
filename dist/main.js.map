{
  "version": 3,
  "sources": ["../node_modules/@webqit/util/js/isObject.js", "../node_modules/@webqit/util/js/isArray.js", "../node_modules/@webqit/util/js/isTypeFunction.js", "../node_modules/@webqit/util/js/isNull.js", "../node_modules/@webqit/util/js/isUndefined.js", "../node_modules/@webqit/util/js/isTypeObject.js", "../node_modules/@webqit/util/js/isEmpty.js", "../node_modules/@webqit/util/js/isFunction.js", "../node_modules/@webqit/util/js/isNumber.js", "../node_modules/@webqit/util/js/isNumeric.js", "../node_modules/@webqit/util/js/isString.js", "../node_modules/@webqit/util/js/isTypeArray.js", "../node_modules/@webqit/util/js/wq.js", "../node_modules/@webqit/util/arr/from.js", "../node_modules/@webqit/util/obj/get.js", "../node_modules/@webqit/util/obj/set.js", "../src/Scheduler.js", "../src/realtime/Util.js", "../src/realtime/DOMSpec.js", "../src/realtime/Realtime.js", "../src/realtime/AttrRealtime.js", "../src/realtime/DOMRealtime.js", "../src/polyfills.js", "../src/index.js", "../src/targets.browser.js"],
  "sourcesContent": ["\n/**\n * Tells if val is pure object.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !Array.isArray(val) && typeof val === 'object' && val;\n};\n", "\n/**\n * Tells if val is of type \"array\".\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val);\n};\n", "\n/**\n * Tells if val is of type \"function\".\n * This holds true for both regular functions and classes.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn typeof val === 'function';\n};\n", "\n/**\n * Tells if val is undefined or is null.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val === null || val === '';\n};\n", "\n/**\n * Tells if val is undefined or is of type \"undefined\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn arguments.length && (val === undefined || typeof val === 'undefined');\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"object\".\n * This holds true for anything object, including built-ins.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val) || (typeof val === 'object' && val) || _isTypeFunction(val);\n};\n", "\n/**\n * @imports\n */\nimport _isNull from './isNull.js';\nimport _isUndefined from './isUndefined.js';\nimport _isTypeObject from './isTypeObject.js';\n\n/**\n * Tells if val is empty in its own type.\n * This holds true for NULLs, UNDEFINED, FALSE, 0,\n * objects without keys, empty arrays.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNull(val) || _isUndefined(val) || val === false || val === 0 \n\t\t|| (_isTypeObject(val) && !Object.keys(val).length);\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"function\".\n *\n * @param object \t\tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isTypeFunction(val) || (val && {}.toString.call(val) === '[object function]');\n};\n", "\n/**\n * Tells if val is of type \"number\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof Number || (typeof val === 'number');\n};\n", "\n/**\n * @imports\n */\nimport _isNumber from './isNumber.js';\n/**\n * Tells if val is of type \"string\" or a numeric string.\n * This holds true for both numbers and numeric strings.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNumber(val) || (val !== true && val !== false && val !== null && val !== '' && !isNaN(val * 1));\n};\n", "\n/**\n * Tells if val is of type \"string\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof String || (typeof val === 'string' && val !== null);\n};\n", "\n/**\n * @imports\n */\nimport _isString from './isString.js';\nimport _isUndefined from './isUndefined.js';\n\n/**\n * Tells if val is \"array-like\".\n * This holds true for anything that has a length property.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !_isString(val) && !_isUndefined(val.length);\n};\n", "export default function wq(obj, ...namespaces) {\n    if (!obj || !['object', 'function'].includes(typeof obj)) {\n        throw new Error(`Argument #1 must be of type object`);\n    }\n    let wq = obj[Symbol.for('wq')];\n    if (!wq) {\n        wq = new WQInternals;\n        Object.defineProperty(obj, Symbol.for('wq'), {\n            value: wq,\n            // Defaults, but to be explicit...\n            enumerable: false,\n            configurable: false,\n            writable: false\n        });\n    }\n    if (!namespaces.length) {\n        return wq;\n    }\n    let _ns, _wq;\n    while ((_ns = namespaces.shift())) {\n        if ((_wq = wq) && !(wq = wq.get(_ns))) {\n            wq = new WQInternals;\n            _wq.set(_ns, wq);\n        }\n    }\n    return wq;\n}\n\nclass WQInternals extends Map {}", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isTypeArray from '../js/isTypeArray.js';\nimport _isEmpty from '../js/isEmpty.js';\nimport _isObject from '../js/isObject.js';\n\n/**\n * Casts an array-like object to an array.\n *\n * @param mixed \tval\n * @param bool\t \tcastObject\n *\n * @return array\n */\nexport default function(val, castObject = true) {\n\tif (_isArray(val)) {\n\t\treturn val;\n\t};\n\tif (!castObject && _isObject(val)) {\n\t\treturn [val];\n\t};\n\tif (val !== false && val !== 0 && _isEmpty(val)) {\n\t\treturn [];\n\t};\n\tif (_isTypeArray(val)) {\n\t\treturn Array.prototype.slice.call(val);\n\t};\n\tif (_isObject(val)) {\n\t\treturn Object.values(val);\n\t};\n\treturn [val];\n};\n", "\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isUndefined from '../js/isUndefined.js';\nimport _isNull from '../js/isNull.js';\nimport _arrFrom from '../arr/from.js';\n\n/**\n * Retrieves the value at the given path.\n *\n * A return value of undefined is ambiguous, and can mean either that the\n * path does not exist, or that the path actually exists but with a value of undefined. If it is required to\n * know whether the path actually exists, pass an object as a third argument.\n * This object will have an \"exists\" key set to true/false.\n *\n * @param object \t\t\t\tctxt\n * @param array \t\t\t\tpath\n * @param object \t\t\t\ttrap\n * @param object \t\t\t\treciever\n *\n * @return mixed\n */\nexport default function(ctxt, path, trap = {}, reciever = {}) {\n\tpath = _arrFrom(path).slice();\n\tvar _ctxt = ctxt;\n\twhile(!_isUndefined(_ctxt) && !_isNull(_ctxt) && path.length) {\n\t\tvar _key = path.shift();\n\t\tif (!(trap.get ? trap.get(_ctxt, _key) : (_isTypeObject(_ctxt) ? _key in _ctxt : _ctxt[_key]))) {\n\t\t\treciever.exists = false;\n\t\t\treturn;\n\t\t}\n\t\t_ctxt = trap.get ? trap.get(_ctxt, _key) : _ctxt[_key];\n\t}\n\treciever.exists = true;\n\treturn _ctxt;\n};\n", "\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _isArray from '../js/isArray.js';\nimport _arrFrom from '../arr/from.js';\nimport _get from './get.js';\n\n/**\n * Sets a value to the given path.\n *\n * @param object \t\t\t\tobj\n * @param array \t\t\t\tpath\n * @param mixed \t\t\t\tval\n * @param object|function \t\tbuildTree\n * @param object \t\t\t\ttrap\n *\n * @return bool\n */\nexport default function(obj, path, val, buildTree = {}, trap = {}) {\n\tconst _set = (target, key, val) => {\n\t\tif (trap.set) {\n\t\t\treturn trap.set(target, key, val);\n\t\t} else {\n\t\t\tif (_isNumeric(path[i]) && _isArray(target)) {\n\t\t\t\ttarget.push(val);\n\t\t\t} else {\n\t\t\t\ttarget[key] = val;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t};\n\tpath = _arrFrom(path);\n\tvar target = obj;\n\tfor(var i = 0; i < path.length; i ++) {\n\t\tif (i < path.length - 1) {\n\t\t\tif (!target || (!_isTypeObject(target) && !_isFunction(target))) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar branch = _get(target, path[i], trap);\n\t\t\tif (!_isTypeObject(branch)) {\n\t\t\t\tif (trap.buildTree === false) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tbranch = _isFunction(trap.buildTree) ? trap.buildTree(i) : (_isNumeric(path[i + 1]) ? [] : {});\n\t\t\t\tvar branchSuccess = _set(target, path[i], branch);\n\t\t\t\tif (!branchSuccess) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttarget = branch;\n\t\t} else {\n\t\t\treturn _set(target, path[i], val);\n\t\t}\n\t}\n};\n", "\n/**\n * ---------------------------\n * Binds callbacks to requestAnimationFrame()\n * to create a central \"read/write\" phases for Ctxt access.\n * ---------------------------\n */\n\t\t\t\nexport default class Scheduler {\n\n\t/**\n\t * Starts the loop.\n\t *\n\t * @return this\n\t */\n\tconstructor( window, synthesis = false ) {\n\t\tObject.defineProperty( this, 'window', { value: window } );\n\t\tObject.defineProperty( this, 'readCallbacks', { value: new Set } );\n\t\tObject.defineProperty( this, 'writeCallbacks', { value: new Set } );\n\t\tObject.defineProperty( this, '_synthesis', { value: 0, writable: true } );\n\t\tif ( !synthesis && this.window.requestAnimationFrame ) {\n\t\t\tthis._loop();\n\t\t} else { this._synthesis ++; }\n\t}\n\n\tget synthesis() { return this._synthesis; }\n\n\tasync synthesizeWhile( callback ) {\n\t\tthis._synthesis ++;\n\t\tthis._fulfill();\n\t\tconst returnValue = await callback();\n\t\tthis._synthesis --;\n\t\treturn returnValue;\n\t}\n\n\t_fulfill() {\n\t\tfor ( const callback of this.readCallbacks ) {\n\t\t\tcallback();\n\t\t\tthis.readCallbacks.delete( callback );\n\t\t}\n\t\tfor ( const callback of this.writeCallbacks ) {\n\t\t\tcallback();\n\t\t\tthis.writeCallbacks.delete( callback );\n\t\t}\n\t}\n\n\t_loop() {\n\t\tthis.window.requestAnimationFrame( () => {\n\t\t\tthis._fulfill();\n\t\t\tthis._loop();\n\t\t} );\n\t}\n\t\n\t/**\n\t * Binds a callback to the \"read\" phase.\n\t *\n\t * @param function \tcallback\n\t * @param bool\t\twithPromise\n\t *\n\t * @return void\n\t */\n\tonread( callback, withPromise = false ) {\n\t\tif ( withPromise ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tif ( this.synthesis ) {\n\t\t\t\t\tresolve( callback() );\n\t\t\t\t} else {\n\t\t\t\t\tthis.readCallbacks.add( () => {\n\t\t\t\t\t\tresolve( callback() );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\tif ( this.synthesis ) {\n\t\t\tPromise.resolve().then( callback );\n\t\t} else {\n\t\t\tthis.readCallbacks.add( callback );\n\t\t}\n\t}\n\t\n\t/**\n\t * Binds a callback to the \"write\" phase.\n\t *\n\t * @param function \tcallback\n\t * @param bool\t\twithPromise\n\t *\n\t * @return void\n\t */\n\tonwrite( callback, withPromise = false ) {\n\t\tif ( withPromise ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tif ( this.synthesis ) {\n\t\t\t\t\tresolve( callback() );\n\t\t\t\t} else {\n\t\t\t\t\tthis.writeCallbacks.add( () => {\n\t\t\t\t\t\tresolve( callback() );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\tif ( this.synthesis ) {\n\t\t\tPromise.resolve().then( callback );\n\t\t} else {\n\t\t\tthis.writeCallbacks.add( callback );\n\t\t}\n\t}\n\t\n\t/**\n\t * A special construct for Ctxt manipulations that span\n\t * one or more read/write cycles.\n\t *\n\t * @param function \tread\n\t * @param function \twrite\n\t * @param mixed\t\tprevTransaction\n\t *\n\t * @return void|mixed\n\t */\n\tcycle( onread, onwrite, prevTransaction ) {\n\t\tthis.onread( () => {\n\t\t\t// Record initial values\n\t\t\tconst readReturn = onread( prevTransaction );\n\t\t\t// Call erite, the transation\n\t\t\tconst callWrite = ( readReturn ) => {\n\t\t\t\tif ( readReturn === undefined ) return;\n\t\t\t\tthis.onwrite( () => {\n\t\t\t\t\tconst writeReturn = onwrite( readReturn, prevTransaction );\n\t\t\t\t\t// Repeat transaction\n\t\t\t\t\tconst repeatTransaction = ( writeReturn ) => {\n\t\t\t\t\t\tif ( writeReturn === undefined ) return;\n\t\t\t\t\t\tthis.cycle( onread, onwrite, writeReturn );\n\t\t\t\t\t};\n\t\t\t\t\t// ---------------------------------------\n\t\t\t\t\t// If \"write\" returns a promise, we wait until it is resolved\n\t\t\t\t\t// ---------------------------------------\n\t\t\t\t\tif ( writeReturn instanceof Promise ) {\n\t\t\t\t\t\twriteReturn.then( repeatTransaction );\n\t\t\t\t\t} else {\n\t\t\t\t\t\trepeatTransaction( writeReturn );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t};\n\t\t\t// ---------------------------------------\n\t\t\t// If \"read\" returns a promise, we wait until it is resolved\n\t\t\t// ---------------------------------------\n\t\t\tif ( readReturn instanceof Promise ) {\n\t\t\t\treadReturn.then( callWrite );\n\t\t\t} else {\n\t\t\t\tcallWrite( readReturn );\n\t\t\t}\n\t\t} );\n\t}\n\n}", "\n\nexport function isXpath( expr ) { return ( expr = expr.trim() ) && expr.startsWith( '(' ) && expr.endsWith( ')' ) }\n\nexport function xpathQuery( window, context, expr, subtree = true ) {\n    expr = ( Array.isArray( expr ) ? expr : [ expr ] ).map( x => ( x + '' ).replace( '(', subtree ? '(.//' : '(./' ) ).join( '|' );\n    let nodes = [], node;\n    try {\n        // Throws in firefox and safari where context is a text node\n        const result = window.document.evaluate( expr, context, null, window.XPathResult.ANY_TYPE );\n        while ( node = result.iterateNext() ) nodes.push( node );\n    } catch( e ) {}\n    return nodes;\n}\n\nexport function xpathMatch( window, node, expr ) {\n    expr = ( Array.isArray( expr ) ? expr : [ expr ] ).map( x => ( x + '' ).replace( '(', '(self::' ) ).join( '|' );\n    try {\n        // Throws in firefox and safari where context is a text node and query isn't\n        return window.document.evaluate( `${ expr }`, node, null, window.XPathResult.BOOLEAN_TYPE ).booleanValue;\n    } catch( e ) {}\n}\n\nexport function containsNode( window, a, b, crossRoots = false, testCache = null ) {\n    const prevTest = testCache?.get( a )?.get( b );\n    if ( typeof prevTest !== 'undefined' ) return prevTest;\n    const response = val => {\n        if ( !testCache?.has( a ) ) testCache?.set( a, new WeakMap );\n        testCache?.get( a )?.set( b, val );\n        return val;\n    };\n    const rootNodeA = a.getRootNode();\n    const rootNodeB = b.getRootNode();\n    if ( rootNodeA === rootNodeB ) return response( a.contains( b ) );\n    if ( crossRoots && rootNodeB instanceof window.ShadowRoot ) return response( containsNode( window, a, rootNodeB.host, crossRoots, testCache ) );\n    return response( false );\n}\n\nexport function splitOuter( str, delim = '|' ) {\n    return [ ...str ].reduce( ( [ quote, depth, splits, skip ], x ) => {\n        if ( !quote && depth === 0 && ( Array.isArray( delim ) ? delim : [ delim ] ).includes( x ) ) {\n            return [ quote, depth, [ '' ].concat( splits ) ];\n        }\n        if ( !quote && [ '(', '[', '{' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth++;\n        if ( !quote && [ ')', ']', '}' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth--;\n        if ( [ '\"', \"'\", '`' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) {\n            quote = quote === x ? null : ( quote || x );\n        }\n        splits[ 0 ] += x;\n        return [ quote, depth, splits ]\n    }, [ null, 0, [ '' ] ] )[ 2 ].reverse();\n}", "\n/**\n * @imports\n */\nimport * as Util from './Util.js';\n\nexport default class DOMSpec {\n    constructor( content ) {\n        this.content = content;\n        this.type = typeof content === 'string' ? 'selector' : 'instance';\n        this.kind = this.type === 'instance' ? null : Util.isXpath( content ) ? 'xpath' : 'css';\n        if ( this.kind === 'xpath' ) {\n            this.isXpathAttr = Util.splitOuter( content.trim().slice( 1, -1 ), '@' ).length > 1;\n        }\n    }\n    toString() { return this.content; }\n}", "\n/**\n * @imports\n */\nimport { _isFunction, _isObject, _wq } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport DOMSpec from './DOMSpec.js';\nimport * as Util from './Util.js';\n\n/**\n *\n * @class Realtime\n */\nexport default class Realtime {\n\n\t/**\n\t * @constructor\n\t *\n\t * @param document|Element\tcontext\n\t */\n\tconstructor( context, namespace, window ) {\n\t\tthis.context = context;\n\t\tthis.namespace = namespace;\n\t\tthis.window = context.defaultView || context.ownerDocument?.defaultView || window;\n\t\tthis.document = this.window.document;\n\t\tthis.webqit = this.window.webqit;\n\t\tObject.defineProperty( this, '#', { value: {} } );\n\t}\n\t\n\t/**\n\t * Resolves arguments\n\t * \n\t * @param Array \t\t\targs \n\t * \n\t * @returns Array\n\t */\n\tresolveArgs( args ) {\n\t\tif ( _isFunction( args[ 0 ] ) ) { args = [ [], ...args ]; }\n\t\telse if ( _isObject( args[ 0 ] ) && !( args[ 0 ] instanceof DOMSpec ) && args.length === 1 ) {\n\t\t\targs = [ [], undefined, args[ 0 ] ];\n\t\t} else if ( _isObject( args[ 1 ] ) && args.length === 2 ) {\n\t\t\targs = [ _arrFrom( args[ 0 ], false/*castObject*/ ), undefined, args[ 1 ] ];\n\t\t} else { args[ 0 ] = _arrFrom( args[ 0 ], false/*castObject*/ ); }\n\t\tif ( args[ 0 ].filter( x => typeof x !== 'string' && !( x instanceof DOMSpec ) && !( x instanceof this.window.Node ) ).length ) {\n\t\t\tthrow new Error( `Argument #2 must be either a string or a Node object, or a list of those.` );\n\t\t}\n\t\targs[ 0 ] = args[ 0 ].map( s => s instanceof DOMSpec ? s : new DOMSpec( s ) );\n\t\treturn args;\n\t}\n\n\t/**\n\t * @registry\n\t *\n\t * @param Array\t\t\t\t...args\n\t * \n\t * @returns Map\n\t */\n\tregistry( ...args ) {\n\t\treturn _wq( this.window, 'realdom', this.namespace, ...args );\n\t}\n\t\t\n\t/**\n\t * @createSignalGenerator\n\t * \n\t * @param Object \t\t\tmo \n\t * \n\t * @returns Object\n\t */\n\tcreateSignalGenerator() {\n\t\treturn {\n\t\t\tgenerate() {\n\t\t\t\t// Abort previous\n\t\t\t\tthis.lastController?.abort();\n\t\t\t\tthis.lastController = new AbortController;\n\t\t\t\tconst flags = { signal: this.lastController.signal };\n\t\t\t\treturn flags;\n\t\t\t},\n\t\t\tdisconnect() { this.lastController?.abort(); }\n\t\t}\n\t}\n\t\t\n\t/**\n\t * Loops through registration objects whose contexts match the event context.\n\t * \n\t * @param String \t\tinterceptionTiming\n\t * @param Object|Array \trecord_s\n\t * @param Function \t\tcallback \n\t * \n\t * @returns void\n\t */\n\tforEachMatchingContext( interceptionTiming, record_s, callback ) {\n\t\tconst { window } = this, deferreds = new Set, testCache = new WeakMap;\n\t\tfor ( const [ registration, deferred ] of this.registry( interceptionTiming ) ) {\n\t\t\tlet $records = [].concat( record_s ).filter( record => Util.containsNode( window, registration.context, record.target, registration.params.subtree === 'cross-roots', testCache ) );\n\t\t\tif ( !$records.length ) continue;\n\t\t\tconst args = [ registration, Array.isArray( record_s ) ? $records : $records[ 0 ] ];\n\t\t\tif ( deferred ) deferreds.add( args ); else callback.call( window, ...args );\n\t\t}\n\t\tfor ( const args of deferreds ) callback.call( window, ...args );\n\t\tdeferreds.clear();\n\t}\n\n\t/**\n\t * @disconnectables\n\t * \n\t * @param AbortSignal \t\tsignal\n\t * @param Array \t\t\t...objects \n\t * \n\t * @returns Object\n\t */\n\tdisconnectables( signal, ...objects ) {\n\t\tconst disconnectable = { disconnect() {\n\t\t\tobjects.forEach( d => (\n\t\t\t\td && _isFunction( d.disconnect ) && d.disconnect() \n\t\t\t\t|| _isFunction( d ) && d() \n\t\t\t\t|| _isObject( d ) && ( d.disconnected = true )\n\t\t\t) );\n\t\t} };\n\t\tif ( signal ) signal.addEventListener( 'abort', () => disconnectable.disconnect() );\n\t\treturn disconnectable;\n\t}\n}\n", "\n/**\n * @imports\n */\nimport { _wq } from '@webqit/util/js/index.js';\nimport Realtime from './Realtime.js';\nimport DOMSpec from './DOMSpec.js';\n\n/**\n *\n * @class AttrRealtime\n */\nexport default class AttrRealtime extends Realtime {\n\n\ttype = 'attr';\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor( context, ...args ) {\n\t\tsuper( context, 'attr', ...args );\n\t}\n\t\n\t/**\n\t * Runs a query.\n\t *\n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable|Void\n\t */\n\tget( spec, callback = undefined, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec = [], callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context } = this;\n\t\t// -------------\n\t\tconst records = attrIntersection( context, spec );\n\t\tif ( !callback ) return records;\n\t\tconst signalGenerator = params.lifecycleSignals && this.createSignalGenerator();\n\t\tif ( !originalFilterIsString ) {\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( records, flags, context );\n\t\t} else {\n\t\t\tfor ( const record of records ) {\n\t\t\t\tconst flags = signalGenerator ? signalGenerator.generate() : {};\n\t\t\t\tcallback( record, flags, context );\n\t\t\t}\n\t\t}\n\t\t// -------------\n\t\tif ( params.live ) {\n\t\t\tif ( signalGenerator ) { params = { ...params, signalGenerator }; }\n\t\t\tconst disconnectable_live = this.observe( originalFilterIsString ? spec[ 0 ] : spec, callback, { newValue: true, ...params } );\n\t\t\treturn this.disconnectables( params.signal, disconnectable_live );\n\t\t}\n\t}\n\n\t/**\n\t * Mutation Observer\n\t * \n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserve( spec, callback, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec = [], callback, params = {} ] = this.resolveArgs( arguments );\n\t\t// ------------------------\n\t\tif ( [ 'sync', 'intercept' ].includes( params.timing ) ) return this.observeSync( originalFilterIsString ? spec[ 0 ] : spec, callback, params );\n\t\tif ( params.timing && params.timing !== 'async' ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\t// ------------------------\n\t\tconst { context, window, webqit } = this;\n\t\t// ------------------\n\t\tif ( params.eventDetails && !webqit.realdom.attrInterceptionHooks?.intercepting ) {\n\t\t\tattrInterception.call( window, 'intercept', () => {} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = new window.MutationObserver( records => {\n\t\t\trecords = dedupAndIgnoreInternals( records ).map( rcd => withAttrEventDetails.call( window, rcd ) );\n\t\t\tdispatch.call( window, registration, records, context );\n\t\t} );\n\t\t// ------------------\n\t\tconst $params = { attributes: true, attributeOldValue: params.oldValue, subtree: params.subtree && true };\n\t\tif ( spec.length ) { $params.attributeFilter = spec.map( a => a + '' ); }\n\t\tdisconnectable.observe( context, $params );\n\t\t// -------------\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, atomics: new Map, originalFilterIsString, signalGenerator, disconnectable };\n\t\t// -------------\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\t\n\t/**\n\t * Mutation Interceptor\n\t * \n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserveSync( spec, callback, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context, window } = this;\n\t\t// -------------\n\t\tif ( params.timing && ![ 'sync', 'intercept' ].includes( params.timing ) ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\tconst interceptionTiming = params.timing === 'intercept' ? 'intercept' : 'sync';\n\t\tif ( !this.registry( interceptionTiming ).size ) {\n\t\t\t// One handler per intercept/sync registry\n\t\t\tattrInterception.call( window, interceptionTiming, records => {\n\t\t\t\tthis.forEachMatchingContext( interceptionTiming, records, dispatch );\n\t\t\t} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = { disconnect() { registry.delete( registration ); } };\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, atomics: new Map, originalFilterIsString, signalGenerator, disconnectable };\n\t\tconst registry = this.registry( interceptionTiming );\n\t\tregistry.set( registration, !!registration.params.deferred );\n\t\t// -------------\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n}\n\n/**\n * Deduplicates records.\n * \n * @param Array \t\t\trecords\n * \n * @returns Array\n */\nfunction dedupAndIgnoreInternals( records ) {\n\treturn records.reduce( ( rcds, rcd, i ) => {\n\t\tif ( rcds[ i - 1 ]?.attributeName === rcd.attributeName ) return rcds;\n\t\tif ( _wq( rcd.target, 'realdom', 'internalAttrInteractions' ).get( rcd.attributeName ) ) return rcds;\n\t\treturn rcds.concat( rcd );\n\t}, [] );\n}\n\n/**\n * Dispatches a mutation record if it matches the observed.\n * \n * @param Object \t\t\tregistration\n * @param Array \t\t\trecords\n * \n * @returns Void\n */\nfunction dispatch( registration, records ) {\n\tconst { context, spec, callback, params, atomics, originalFilterIsString, signalGenerator } = registration;\n\tif (!params.subtree) {\n\t\trecords = records.filter((r) => {\n\t\t\treturn r.target === context;\n\t\t}); \n\t}\n\tif ( !records.length ) return;\n\tconst $spec = spec.map( a => a + '' );\n\tif ( params.atomic && !atomics.size ) {\n\t\trecords = attrIntersection( context, spec, records );\n\t} else if ( params.timing !== 'async' && spec.length ) {\n\t\trecords = records.filter( r => $spec.includes( r.name ) );\n\t}\n\tif ( !records.length ) return;\n\t// Should we care about old / new values being present?\n\tif ( !( params.newValue === null && params.oldValue === null && params.eventDetails ) ) {\n\t\trecords = records.map( rcd => {\n\t\t\tlet exclusion;\n\t\t\tif ( !params.eventDetails ) {\n\t\t\t\t( { event: exclusion, ...rcd } = rcd );\n\t\t\t}\n\t\t\tif ( !params.oldValue && ( 'oldValue' in rcd ) ) {\n\t\t\t\t( { oldValue: exclusion, ...rcd } = rcd );\n\t\t\t}\n\t\t\tif ( !params.newValue && ( 'value' in rcd ) ) {\n\t\t\t\t( { value: exclusion, ...rcd } = rcd );\n\t\t\t} else if ( params.newValue && typeof rcd.value === 'undefined' ) {\n\t\t\t\trcd = {  ...rcd, value: internalAttrInteraction( rcd.target, rcd.name, () => rcd.target.getAttribute( rcd.name ) ) };\n\t\t\t}\n\t\t\treturn rcd;\n\t\t} );\n\t}\n\tif ( params.atomic ) {\n\t\trecords.forEach( record => atomics.set( record.name, record ) );\n\t\trecords = Array.from( atomics.entries() ).map( ( [ , value ] ) => value );\n\t}\n\tconst record_s = originalFilterIsString ? records[ 0 ] : records;\n\tconst flags = signalGenerator ? signalGenerator.generate() : {};\n\tcallback( record_s, flags, context );\n}\n\n/**\n */\nfunction internalAttrInteraction( node, attrName, callback ) {\n\tconst savedAttrLocking = _wq( node, 'realdom', 'internalAttrInteractions' ).get( attrName );\n\t_wq( node, 'realdom', 'internalAttrInteractions' ).set( attrName, true );\n\tconst value = callback();\n\t_wq( node, 'realdom', 'internalAttrInteractions' ).set( attrName, savedAttrLocking );\n\treturn value;\n}\n\n/**\n * Helper to determining which records to deliver.\n * \n * @param Object \t\t\tcontext\n * @param Array \t\t\tspec\n * @param Array \t\t\trecords\n * \n * @returns Array\n */\nfunction attrIntersection( context, spec, records = [] ) {\n\tconst _type = { event: null, type: 'attribute' };\n\tif ( spec.length ) {\n\t\treturn spec.map( attrName => {\n\t\t\tattrName = attrName + '';\n\t\t\treturn records.find( r => r.name === attrName ) || { target: context, name: attrName, value: internalAttrInteraction( context, attrName, () => context.getAttribute( attrName ) ), ..._type };\n\t\t} );\n\t}\n\tconst attrs = Array.from( context.attributes );\n\treturn attrs.map( attr => {\n\t\treturn records.find( r => r.name === attr.nodeName ) || { target: context, name: attr.nodeName, value: internalAttrInteraction( context, attr.nodeName, () => attr.nodeValue ), ..._type };\n\t} );\n}\n\n/**\n * Determines the event for an attr mutation record.\n * \n * @param MutationRecord \t{ target, attributeName }\n * \n * @returns Object\n */\nfunction withAttrEventDetails( { target, attributeName, value, oldValue } ) {\n\tconst window = this, registry = window.webqit.realdom.attrInterceptionRecords?.get( target ) || {};\n\tconst event = registry[ attributeName ]?.[ 0 ] || 'mutation';\n\tconst record = { target, name: attributeName, value, oldValue, type: 'observation', event };\n\treturn record;\n}\n\n/**\n * Attributes intersection engine.\n * \n * @param String \t\t\ttiming \n * @param Function \t\t\tcallback \n * \n * @returns \n */\nfunction attrInterception( timing, callback ) {\n\tconst window = this;\n\tconst { webqit, document, Element } = window;\n\tif ( !webqit.realdom.attrInterceptionHooks ) { Object.defineProperty( webqit.realdom, 'attrInterceptionHooks', { value: new Map } ); }\n\tif ( !webqit.realdom.attrInterceptionHooks.has( timing ) ) { webqit.realdom.attrInterceptionHooks.set( timing, new Set ); }\n\twebqit.realdom.attrInterceptionHooks.get( timing ).add( callback );\n\tconst rm = () => webqit.realdom.attrInterceptionHooks.get( timing ).delete( callback );\n\tif ( webqit.realdom.attrInterceptionHooks?.intercepting ) return rm;\n\tconsole.warn( `Attr mutation APIs are now being intercepted.` );\n\twebqit.realdom.attrInterceptionHooks.intercepting = true;\n\tObject.defineProperty( webqit.realdom, 'attrInterceptionRecords', { value: new Map } );\n\n\t// Interception hooks\n\tconst attrIntercept = ( record, defaultAction ) => {\n\t\tif ( !webqit.realdom.attrInterceptionRecords.has( record.target ) ) { webqit.realdom.attrInterceptionRecords.set( record.target, {} ); }\n\t\tconst registry = webqit.realdom.attrInterceptionRecords.get( record.target );\n\t\t// ------------------\n\t\tregistry[ record.name ] = registry[ record.name ] || [];\n\t\tregistry[ record.name ].unshift( record.event );\n\t\tif ( _wq( record.target, 'realdom', 'internalAttrInteractions' ).get( record.name ) ) return defaultAction();\n\t\t// ------------------\n\t\twebqit.realdom.attrInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( [ record ] ) );\n\t\tconst returnValue = defaultAction();\n\t\twebqit.realdom.attrInterceptionHooks.get( 'sync' )?.forEach( callback => callback( [ record ] ) );\n\t\treturn returnValue;\n\t};\n\n\t// Interception observer WILL need to know non-API-based mutations\n\tconst mo = new window.MutationObserver( records => {\n\t\trecords = records.filter( rcd => {\n\t\t\tconst registry = window.webqit.realdom.attrInterceptionRecords?.get( rcd.target ) || {};\n\t\t\treturn !registry[ rcd.attributeName ]?.shift();\n\t\t} );\n\t\trecords = dedupAndIgnoreInternals( records ).map( rcd => withAttrEventDetails.call( window, rcd ) );\n\t\tif ( !records.length ) return;\n\t\twebqit.realdom.attrInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( records ) );\n\t\twebqit.realdom.attrInterceptionHooks.get( 'sync' )?.forEach( callback => callback( records ) );\n\t} );\n\tmo.observe( document, { attributes: true, subtree: true, attributeOldValue: true } );\n\n\t// Intercept DOM attr mutation methods\n\tconst originalApis = Object.create( null );\n\t[ 'setAttribute', 'removeAttribute', 'toggleAttribute', ].forEach( apiName => {\n\t\toriginalApis[ apiName ] = Element.prototype[ apiName ];\n\t\tElement.prototype[ apiName ] = function( ...args ) {\n\t\t\tlet value, oldValue = internalAttrInteraction( this, args[ 0 ], () => this.getAttribute( args[ 0 ] ) );\n\t\t\tif ( [ 'setAttribute', 'toggleAttribute' ].includes( apiName ) ) { value = args[ 1 ]; }\n\t\t\tif ( apiName === 'toggleAttribute' && value === undefined ) {\n\t\t\t\tvalue = oldValue === null ? true : false;\n\t\t\t}\n\t\t\tconst record = { target: this, name: args[ 0 ], value, oldValue, type: 'interception', event: [ this, apiName ] };\n\t\t\tconst exec = () => originalApis[ apiName ].call( this, ...args );\n\t\t\treturn attrIntercept( record, exec );\n\t\t}\n\t} );\n\n\treturn rm;\n}\n", "\n/**\n * @imports\n */\nimport { _isObject } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport AttrRealtime from './AttrRealtime.js';\nimport Realtime from './Realtime.js';\nimport * as Util from './Util.js';\n\n/**\n *\n * @class DOMRealtime\n */\nexport default class DOMRealtime extends Realtime {\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor( context, ...args ) {\n\t\tsuper( context, 'tree', ...args );\n\t}\n\n\t/**\n\t * Alias for ( new AttrRealtime() ).all( ... )\n\t */\n\tattr( filter, callback = undefined, params = {} ) {\n\t\tconst { context, window } = this;\n\t\treturn ( new AttrRealtime( context, window ) ).get( ...arguments );\n\t}\n\n\t/**\n\t * Runs a query.\n\t *\n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable|Void\n\t */\n\tquery( spec, callback = undefined, params = {} ) {\n\t\t[ spec, callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context } = this;\n\t\t// ------------------\n\t\tconst records = new Map, getRecord = target => {\n\t\t\tif ( !records.has( target ) ) { records.set( target, { target, entrants: [], exits: [], type: 'query', event: null } ); }\n\t\t\treturn records.get( target );\n\t\t};\n\t\t// ------------------\n\t\tif ( !params.generation || params.generation === 'entrants' ) {\n\t\t\tif ( !spec.length ) {\n\t\t\t\t//if ( params.subtree ) throw new Error( `The subtree option requires a selector to work.` );\n\t\t\t\t[ ...context.children ].forEach( node => getRecord( context ).entrants.push( node ) );\n\t\t\t} else if ( spec.every( s => s.type === 'selector' ) ) {\n\t\t\t\tconst [ cssSelectors, xpathQueries ] = spec.reduce( ( [ css, xpath ], s ) => {\n\t\t\t\t\treturn s.kind === 'xpath' ? [ css, xpath.concat( s ) ] : [ css.concat( s ), xpath ];\n\t\t\t\t}, [ [], [] ] );\n\t\t\t\tconst matches = [];\n\t\t\t\tif ( params.subtree ) {\n\t\t\t\t\tif ( cssSelectors.length ) { matches.push( ...context.querySelectorAll( cssSelectors.join( ',' ) ) ); }\n\t\t\t\t\tif ( xpathQueries.length ) { matches.push( ...Util.xpathQuery( this.window, context, xpathQueries ) ); }\n\t\t\t\t} else {\n\t\t\t\t\tif ( cssSelectors.length ) { matches.push( ...[ ...context.children ].filter( node => node.matches( cssSelectors ) ) ); }\n\t\t\t\t\tif ( xpathQueries.length ) { matches.push( ...Util.xpathQuery( this.window, context, xpathQueries, false ) ); }\n\t\t\t\t}\n\t\t\t\tmatches.forEach( node => getRecord( node.parentNode || context ).entrants.push( node ) );\n\t\t\t}\n\t\t}\n\t\t// ------------------\n\t\tif ( !callback ) return records;\n\t\tconst disconnectable = { disconnected: false };\n\t\tconst signalGenerator = callback && params.lifecycleSignals && this.createSignalGenerator();\n\t\tfor ( const [ , record ] of records ) {\n\t\t\tif ( disconnectable.disconnected ) break;\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( record, flags, context );\n\t\t}\n\t\t// ------------------\n\t\tif ( params.live ) {\n\t\t\tif ( signalGenerator ) { params = { ...params, signalGenerator }; }\n\t\t\tconst disconnectable_live = this.observe( spec, callback, params );\n\t\t\treturn this.disconnectables( params.signal, disconnectable, disconnectable_live );\n\t\t}\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\n\t/**\n\t * Alias for query( ..., { subtree: false } )\n\t */\n\tchildren( spec, callback = undefined, params = {} ) {\n\t\t[ spec, callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\treturn this.query( spec, callback, { ...params, subtree: false } );\n\t}\n\n\t/**\n\t * Alias for query( ..., { subtree: true } )\n\t */\n\tsubtree( spec, callback = undefined, params = {} ) {\n\t\t[ spec, callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\treturn this.query( spec, callback, { ...params, subtree: true } );\n\t}\n\n\t/**\n\t * Mutation Observer\n\t * \n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserve( spec, callback, params = {} ) {\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\t// ------------------------\n\t\tif ( [ 'sync', 'intercept' ].includes( params.timing ) ) return this.observeSync( spec, callback, params );\n\t\tif ( params.timing && params.timing !== 'async' ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\t// ------------------------\n\t\tconst { context, window, webqit, document } = this;\n\t\t// ------------------\n\t\tif ( params.eventDetails ) { webqit.realdom.domInterceptionRecordsAlwaysOn = true; }\n\t\tif ( ( document.readyState === 'loading' || webqit.realdom.domInterceptionRecordsAlwaysOn ) && !webqit.realdom.domInterceptionHooks?.intercepting ) {\n\t\t\tdomInterception.call( window, 'sync', () => {} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = new window.MutationObserver( records => records.forEach( record => {\n\t\t\tdispatch.call( window, registration, withEventDetails.call( window, record ), context );\n\t\t} ) );\n\t\tdisconnectable.observe( context, { childList: true, subtree: params.subtree && true, } );\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, signalGenerator, disconnectable };\n\t\t// -------------\n\t\tif ( params.staticSensitivity ) {\n\t\t\tconst disconnectable_attr = staticSensitivity.call( window, registration );\n\t\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator, disconnectable_attr );\n\t\t}\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\t\n\t/**\n\t * Mutation Interceptor\n\t * \n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserveSync( spec, callback, params = {} ) {\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context, window } = this;\t\t\n\t\t// -------------\n\t\tif ( params.timing && ![ 'sync', 'intercept' ].includes( params.timing ) ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\tconst interceptionTiming = params.timing === 'intercept' ? 'intercept' : 'sync';\n\t\tif ( !this.registry( interceptionTiming ).size ) {\n\t\t\t// One handler per intercept/sync registry\n\t\t\tdomInterception.call( window, interceptionTiming, record => {\n\t\t\t\tthis.forEachMatchingContext( interceptionTiming, record, dispatch );\n\t\t\t} );\n\t\t}\n\t\tconst mo = new window.MutationObserver( records => records.forEach( record => {\n\t\t\tif ( Array.isArray( ( record = withEventDetails.call( window, record ) ).event ) ) return;\n\t\t\tdispatch.call( window, registration, record, context );\n\t\t} ) );\n\t\tmo.observe( context, { childList: true, subtree: params.subtree && true } );\n\t\t// -------------\n\t\tconst disconnectable = { disconnect() {\n\t\t\tregistry.delete( registration );\n\t\t\tmo.disconnect();\n\t\t} };\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, signalGenerator, disconnectable };\n\t\tconst registry = this.registry( interceptionTiming );\n\t\tregistry.set( registration, !!registration.params.deferred );\n\t\t// -------------\n\t\tif ( params.staticSensitivity ) {\n\t\t\tconst disconnectable_attr = staticSensitivity.call( window, registration );\n\t\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator, disconnectable_attr );\n\t\t}\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\n\t/**\n\t * Tracks the connectedness of element references.\n\t *\n\t * @param array|Element\t\t\t\telements\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable\n\t */\n\ttrack( elements, callback, params = {} ) {\n\t\tparams = { subtree: true, ...params };\n\t\treturn this.observe( elements, record => {\n\t\t\tif ( record.entrants.length ) callback( true, Array.isArray( elements ) ? record.entrants : record.entrants[ 0 ] );\n\t\t\tif ( record.exits.length ) callback( false, Array.isArray( elements ) ? record.exits : record.exits[ 0 ] );\n\t\t}, params );\n\t}\n}\n\n/**\n * Sensitivty for attribute changes for attribute spec.\n * \n * @param object registration\n * \n * @returns Disconnectable\n */\nfunction staticSensitivity( registration ) {\n\tconst window = this;\n\tconst { context, spec, callback, params, signalGenerator } = registration;\n\tconst cssSelectors = spec.filter( s => s.kind === 'css' );\n\tconst parseDot = selector => selector.match( /\\.([\\w-]+)/g )?.length ? [ 'class' ] : [];\n\tconst parseHash = selector => selector.match( /#([\\w-]+)/g )?.length ? [ 'id' ] : [];\n\tconst parse = selector => [ ...selector.matchAll( /\\[([^\\=\\]]+)(\\=[^\\]]+)?\\]/g ) ].map( x => x[ 1 ] ).concat( parseDot( selector ) ).concat( parseHash( selector ) );\n\tif ( !( registration.$attrs = Array.from( new Set( cssSelectors.filter( s => ( s + '' ).includes( '[' ) ).reduce( ( attrs, selector ) => attrs.concat( parse( selector + '' ) ), [] ) ) ) ).length ) return;\n\t// ---------\n\tconst entrants = new Set, exits = new Set;\n\tentrants.push = val => ( exits.delete( val ), entrants.add( val ) );\n\texits.push = val => ( entrants.delete( val ), exits.add( val ) );\n\tregistration.$deliveryCache = { entrants, exits };\n\t// ---------\n\treturn ( new AttrRealtime( context, window ) ).observe( registration.$attrs, _records => {\n\t\tconst records = new Map, getRecord = target => {\n\t\t\tif ( !records.has( target ) ) { records.set( target, { target, entrants: [], exits: [], type: 'static', event: null } ); }\n\t\t\treturn records.get( target );\n\t\t};\n\t\t// ---------\n\t\tconst matchesCache = new WeakMap;\n\t\tconst matches = node => {\n\t\t\tif ( !matchesCache.has( node ) ) { matchesCache.set( node, cssSelectors.some( s => node.matches( s + '' ) ) ); }\n\t\t\treturn matchesCache.get( node );\n\t\t};\n\t\t// ---------\n\t\tfor ( const _record of _records ) {\n\t\t\t[ 'entrants', 'exits' ].forEach( generation => {\n\t\t\t\tif ( params.generation && generation !== params.generation ) return;\n\t\t\t\tif ( registration.$deliveryCache[ generation ].has( _record.target ) || ( generation === 'entrants' ? !matches( _record.target ) : matches( _record.target ) ) ) return;\n\t\t\t\tregistration.$deliveryCache[ generation ].push( _record.target );\n\t\t\t\tgetRecord( _record.target )[ generation ].push( _record.target );\n\t\t\t\tgetRecord( _record.target ).event = _record.event;\n\t\t\t} );\n\t\t}\n\t\t// ---------\n\t\tfor ( const [ , record ] of records ) {\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( record, flags, context );\n\t\t}\n\t}, { subtree: params.subtree, timing: params.timing, eventDetails: params.eventDetails } );\n}\n\n/**\n * Dispatches a mutation record if it matches the observed.\n * \n * @param Object \t\t\tregistration \n * @param Object \t\t\trecord \n * \n * @returns Void\n */\nfunction dispatch( registration, _record ) {\n\tconst { context, spec, callback, params, signalGenerator, $deliveryCache } = registration;\n\t// ---------\n\tconst record = { ..._record, entrants: [], exits: [] };\n\tif ( !params.eventDetails ) { delete record.event; }\n\t[ 'entrants', 'exits' ].forEach( generation => {\n\t\tif ( params.generation && generation !== params.generation ) return;\n\t\tif ( spec.length ) {\n\t\t\trecord[ generation ] = nodesIntersection.call( this, spec, params.subtree === 'cross-roots', _record[ generation ], _record.event !== 'parse' );\n\t\t} else {\n\t\t\trecord[ generation ] = [ ..._record[ generation ] ];\n\t\t}\n\t\tif ( !$deliveryCache ) return;\n\t\tfor ( const node of record[ generation ] ) {\n\t\t\t$deliveryCache[ generation ].push( node );\n\t\t}\n\t} );\n\t// ---------\n\tif ( !record.entrants.length && !record.exits.length ) return;\n\tconst flags = signalGenerator?.generate() || {};\n\tcallback( record, flags, context );\n}\n\n/**\n * Aggregates instances of els in sources\n * \n * @param Array \t\t\tspec \n * @param Bool \t\t\t\tcrossRoots \n * @param Array \t\t\tsources \n * @param Bool \t\t\t\tdeepIntersect \n * \n * @returns \n */\nfunction nodesIntersection( spec, crossRoots, sources, deepIntersect ) {\n\tsources = Array.isArray( sources ) ? sources : [ ...sources ];\n\tconst match = ( sources, s ) => {\n\t\t// Filter out text nodes\n\t\tif ( s.type === 'selector' ) {\n\t\t\t// Is directly mutated...\n\t\t\tlet matches = s.isXpathAttr ? [] : sources.filter( source => s.kind === 'xpath' ? Util.xpathMatch( this, source, s + '' ) : source.matches && source.matches( s + '' ) );\n\t\t\t// Is contextly mutated...\n\t\t\tif ( deepIntersect || s.isXpathAttr ) {\n\t\t\t\tmatches = sources.reduce( ( collection, source ) => {\n\t\t\t\t\tif ( s.kind === 'xpath' ) { return [ ...collection, ...Util.xpathQuery( this, source, s, deepIntersect ) ]; }\n\t\t\t\t\treturn source.querySelectorAll ? [ ...collection, ...source.querySelectorAll( s + '' ) ] : collection;\n\t\t\t\t}, matches );\n\t\t\t}\n\t\t\tif ( matches.length ) return matches;\n\t\t} else {\n\t\t\t// Is directly mutated...\n\t\t\tif ( sources.includes( s.content ) || (\n\t\t\t\tdeepIntersect && sources.some( source => Util.containsNode( this/* window */, source, s.content, crossRoots ) )\n\t\t\t) ) { return [ s.content ]; }\n\t\t}\n\t};\n\t// Search can be expensive...\n\t// Multiple listeners searching the same thing in the same list?\n\tif ( !sources.$$searchCache ) { sources.$$searchCache = new Map; }\n\treturn spec.reduce( ( matches, s ) => {\n\t\tlet _matches;\n\t\tif ( sources.$$searchCache.has( s.content ) ) {\n\t\t\t_matches = sources.$$searchCache.get( s.content );\n\t\t} else {\n\t\t\t_matches = match( sources, s ) || [];\n\t\t\tif ( s.type === 'instance' ) {\n\t\t\t\tsources.$$searchCache.set( s.content, _matches );\n\t\t\t}\n\t\t}\n\t\treturn matches.concat( _matches );\n\t}, [] );\n}\n\n/**\n * Determines the event for a mutation record\n * \n * @param MutationRecord \t{ target, entrants, exits }\n * \n * @returns Object\n */\nfunction withEventDetails( { target, addedNodes, removedNodes } ) {\n\tlet window = this, event;\n\tevent = _arrFrom( addedNodes ).reduce( ( prev, node ) => prev || window.webqit.realdom.domInterceptionRecords?.get( node ), null );\n\tevent = _arrFrom( removedNodes ).reduce( ( prev, node ) => prev || window.webqit.realdom.domInterceptionRecords?.get( node ), event );\n\tevent = event || window.document.readyState === 'loading' && 'parse' || 'mutation';\n\treturn { target, entrants: addedNodes, exits: removedNodes, type: 'observation', event };\n}\n\n/**\n * DOM intersection engine.\n * \n * @param String \t\t\ttiming \n * @param Function \t\t\tcallback \n * \n * @returns \n */\nfunction domInterception( timing, callback ) {\n\tconst window = this;\n\tconst { webqit, document, Node, CharacterData, Element, HTMLElement, HTMLTemplateElement, DocumentFragment } = window;\n\tif ( !webqit.realdom.domInterceptionHooks ) { Object.defineProperty( webqit.realdom, 'domInterceptionHooks', { value: new Map } ); }\n\tif ( !webqit.realdom.domInterceptionNoRecurse ) { Object.defineProperty( webqit.realdom, 'domInterceptionNoRecurse', { value: new Map } ); }\n\tif ( !webqit.realdom.domInterceptionHooks.has( timing ) ) { webqit.realdom.domInterceptionHooks.set( timing, new Set ); }\n\twebqit.realdom.domInterceptionHooks.get( timing ).add( callback );\n\tconst rm = () => webqit.realdom.domInterceptionHooks.get( timing ).delete( callback );\n\tif ( webqit.realdom.domInterceptionHooks?.intercepting ) return rm;\n\tconsole.warn( `DOM mutation APIs are now being intercepted.` );\n\twebqit.realdom.domInterceptionHooks.intercepting = true;\n\tObject.defineProperty( webqit.realdom, 'domInterceptionRecords', { value: new Map } );\n\n\t// No recursion helper\n\tconst noRecurse = ( node, method, callback ) => {\n\t\twebqit.realdom.domInterceptionNoRecurse.set( node, method );\n\t\tconst returnValue = callback();\n\t\twebqit.realdom.domInterceptionNoRecurse.delete( node );\n\t\treturn returnValue;\n\t};\n\n\t// Interception hooks\n\tconst intercept = ( record, defaultAction ) => {\n\t\trecord.entrants.concat( record.exits ).forEach( node => {\n\t\t\tclearTimeout( webqit.realdom.domInterceptionRecords.get( node )?.timeout ); // Clear any previous that's still active\n\t\t\twebqit.realdom.domInterceptionRecords.set( node, record.event ); // Main: set event details... and next to timeout details\n\t\t\tconst timeout = setTimeout( () => { webqit.realdom.domInterceptionRecords.delete( node ); }, 0 );\n\t\t\tObject.defineProperty( record.event, 'timeout', { value: timeout, configurable: true } );\n\t\t} );\n\t\twebqit.realdom.domInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( record ) );\n\t\tconst returnValue = defaultAction();\n\t\twebqit.realdom.domInterceptionHooks.get( 'sync' )?.forEach( callback => callback( record ) );\n\t\treturn returnValue;\n\t};\n\n\t// Intercept DOM mutation methods\n\tconst _apiNames = {\n\t\t// Note the order\n\t\tShadowRoot: [ 'innerHTML', 'setHTMLUnsafe' ],\n\t\tDocumentFragment: [ 'replaceChildren', 'append', 'prepend' ],\n\t\tDocument: [ 'replaceChildren', 'append', 'prepend' ],\n\t\tHTMLElement: [ 'outerText', 'innerText' ],\n\t\tElement: [ 'append', 'prepend', 'before', 'after', 'insertAdjacentElement', 'insertAdjacentHTML', 'remove', 'replaceChildren', 'replaceWith', 'setHTMLUnsafe', 'innerHTML', 'outerHTML' ],\n\t\tCharacterData: [ 'before', 'after', 'remove', 'replaceWith' ],\n\t\tNode: [ 'insertBefore', 'replaceChild', 'removeChild', 'appendChild', 'textContent', 'nodeValue' ],\n\t};\n\tconst _apiOriginals = {\n\t\t// Note the order\n\t\tShadowRoot: Object.create( null ), // extends DocumentFragment\n\t\tDocumentFragment: Object.create( null ), // extends Node\n\t\tDocument: Object.create( null ), // extends Node\n\t\tHTMLElement: Object.create( null ), // extends Element,\n\t\tElement: Object.create( null ), // extends Node\n\t\tCharacterData: Object.create( null ), // extends Node\n\t\tNode: Object.create( null ),\n\t};\n\n\tconst _apiNamesUnique = new Set( Object.values( _apiNames ).reduce( ( all, apis ) => all.concat( apis ), [] ) );\n\t_apiNamesUnique.forEach( apiName => {\n\t\t\n\t\tObject.keys( _apiNames ).forEach( DOMClassName => {\n\t\t\tif ( !_apiNames[ DOMClassName ].includes( apiName ) ) return;\n\t\t\tconst _apiOriginal = Object.getOwnPropertyDescriptor( window[ DOMClassName ].prototype, apiName );\n\t\t\tif ( !_apiOriginal ) return; // Typically: Element:setHTMLUnsafe\n\t\t\tObject.defineProperty( window[ DOMClassName ].prototype, apiName, 'value' in _apiOriginal ? { ..._apiOriginal, value: method } : { ..._apiOriginal, set: setter } );\n\t\t\t_apiOriginals[ DOMClassName ][ apiName ] = _apiOriginal;\n\t\t} );\n\n\t\tfunction method( ...args ) {\n\t\t\tconst DOMClassName = Object.keys( _apiOriginals ).find( name => this instanceof window[ name ] && ( apiName in _apiOriginals[ name ] ) );\n\t\t\tconst $apiOriginals = _apiOriginals[ DOMClassName ];\n\t\t\t// Instance of Node interface? Abort!\n\t\t\tlet exec = () => $apiOriginals[ apiName ].value.call( this, ...args );\n\t\t\tif ( webqit.realdom.domInterceptionNoRecurse.get( this ) === apiName ) return exec();\n\t\t\t// --------------\n\t\t\t// Obtain exits and entrants\n\t\t\tlet exits = [], entrants = [], target = this;\n\t\t\tif ( [ 'insertBefore' ].includes( apiName ) ) {\n\t\t\t\tentrants = [ args[ 0 ] ];\n\t\t\t} else if ( [ 'insertAdjacentElement', 'insertAdjacentHTML' ].includes( apiName ) ) {\n\t\t\t\tentrants = [ args[ 1 ] ];\n\t\t\t\tif ( [ 'beforebegin', 'afterend' ].includes( args[ 0 ] ) ) {\n\t\t\t\t\ttarget = this.parentNode;\n\t\t\t\t}\n\t\t\t} else if ( [ 'setHTMLUnsafe', 'replaceChildren' ].includes( apiName ) ) {\n\t\t\t\texits = [ ...this.childNodes ];\n\t\t\t\tentrants = apiName === 'replaceChildren' ? [ ...args ] : [ args[ 0 ] ];\n\t\t\t} else if ( [ 'replaceWith', 'remove' ].includes( apiName ) ) {\n\t\t\t\texits = [ this ];\n\t\t\t\tentrants = apiName === 'replaceWith' ? [ ...args ] : [];\n\t\t\t\ttarget = this.parentNode;\n\t\t\t} else if ( [ 'replaceChild' ].includes( apiName ) ) {\n\t\t\t\texits = [ args[ 1 ] ];\n\t\t\t\tentrants = [ args[ 0 ] ];\n\t\t\t} else if ( [ 'removeChild' ].includes( apiName ) ) {\n\t\t\t\texits = [ ...args ];\n\t\t\t} else {\n\t\t\t\t// 'before', 'after', 'append', 'prepend', 'appendChild'\n\t\t\t\tentrants = [ ...args ];\n\t\t\t\tif ( [ 'before', 'after' ].includes( apiName ) ) {\n\t\t\t\t\ttarget = this.parentNode;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\t// Parse HTML to entrants\n\t\t\tlet apiNameFinal = apiName;\n\t\t\tif ( [ 'insertAdjacentHTML', 'setHTMLUnsafe' ].includes( apiName ) ) {\n\t\t\t\tlet tempNodeName = this.nodeName;\n\t\t\t\tif ( apiName === 'insertAdjacentHTML' && [ 'beforebegin', 'afterend' ].includes( args[ 0 ] ) ) {\n\t\t\t\t\t// We can't handle this... and this is going to throw afterall\n\t\t\t\t\tif ( !this.parentNode ) return $apiOriginals[ apiName ].value.call( this, ...args );\n\t\t\t\t\ttempNodeName = this.parentNode.nodeName;\n\t\t\t\t}\n\t\t\t\tconst temp = document.createElement( tempNodeName.includes( '-' )/* custom-element | #document-fragment */ ? 'div' : tempNodeName );\n\t\t\t\t$apiOriginals.setHTMLUnsafe.value.call( temp, entrants[ 0 ], apiName === 'setHTMLUnsafe' ? args[ 1 ] : {} );\n\t\t\t\tentrants = [ ...temp.childNodes ];\n\t\t\t\t// --------------  \n\t\t\t\tif ( apiName === 'insertAdjacentHTML' ) {\n\t\t\t\t\tapiNameFinal = 'insertAdjacentElement';\n\t\t\t\t\targs[ 1 ] = new DocumentFragment;\n\t\t\t\t\tnoRecurse( args[ 1 ], 'append', () => args[ 1 ].append( ...temp.childNodes ) );\n\t\t\t\t} else {\n\t\t\t\t\tapiNameFinal = 'replaceChildren';\n\t\t\t\t\targs = [ ...temp.childNodes ];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\tconst record = { target, entrants, exits, type: 'interception', event: [ this, apiName ] };\n\t\t\treturn intercept( record, () => {\n\t\t\t\treturn $apiOriginals[ apiNameFinal ].value.call( this, ...args );\n\t\t\t} );\n\t\t}\n\n\t\tfunction setter( value ) {\n\t\t\tconst DOMClassName = Object.keys( _apiOriginals ).find( name => this instanceof window[ name ] && ( apiName in _apiOriginals[ name ] ) );\n\t\t\tconst $apiOriginals = _apiOriginals[ DOMClassName ];\n\t\t\t// Instance of Node interface? Abort!\n\t\t\tlet exec = () => $apiOriginals[ apiName ].set.call( this, value );\n\t\t\tif ( this instanceof HTMLScriptElement || webqit.realdom.domInterceptionNoRecurse.get( this ) === apiName ) return exec();\n\t\t\t// --------------\n\t\t\t// Obtain exits and entrants\n\t\t\tlet exits = [], entrants = [], target = this;\n\t\t\tif ( [ 'outerHTML', 'outerText' ].includes( apiName ) ) {\n\t\t\t\texits = [ this ];\n\t\t\t\ttarget = this.parentNode;\n\t\t\t} else {\n\t\t\t\t// 'innerHTML', 'innerText', 'textContent', 'nodeValue'\n\t\t\t\tif ( this instanceof HTMLTemplateElement ) {\n\t\t\t\t\ttarget = this.content;\n\t\t\t\t\texits = [ ...this.content.childNodes ];\n\t\t\t\t} else {\n\t\t\t\t\texits = [ ...this.childNodes ];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\t// Parse HTML to nodes\n\t\t\tif ( [ 'outerHTML', 'innerHTML' ].includes( apiName ) ) {\n\t\t\t\tlet tempNodeName = this.nodeName;\n\t\t\t\tif ( apiName === 'outerHTML' ) {\n\t\t\t\t\t// We can't handle this... and this is going to throw afterall\n\t\t\t\t\tif ( !this.parentNode ) return exec();\n\t\t\t\t\ttempNodeName = this.parentNode.nodeName;\n\t\t\t\t}\n\t\t\t\tconst temp = document.createElement( tempNodeName.includes( '-' )/* custom-element | #document-fragment */ ? 'div' : tempNodeName );\n\t\t\t\tnoRecurse( temp, apiName, () => temp[ apiName ] = value );\n\t\t\t\tentrants = this instanceof HTMLTemplateElement ? [ ...temp.content.childNodes ] : [ ...temp.childNodes ];\n\t\t\t\tif ( ( this instanceof HTMLTemplateElement && this.hasAttribute( 'src' ) ) || this instanceof ShadowRoot ) {\n\t\t\t\t\tconst getScripts = nodes => nodes.reduce( ( scripts, el ) => {\n\t\t\t\t\t\tif ( el instanceof HTMLScriptElement ) return scripts.concat( el );\n\t\t\t\t\t\tif ( el instanceof HTMLTemplateElement ) return scripts.concat( getScripts( [ el.content ] ) );\n\t\t\t\t\t\tscripts = scripts.concat( getScripts( [ ...( el.querySelectorAll?.( 'template' ) || [] ) ].map( t => t.content ) ) );\n\t\t\t\t\t\treturn scripts.concat( ...( el.querySelectorAll?.( 'script' ) || [] ) );\n\t\t\t\t\t}, [] );\n\t\t\t\t\tfor ( const script of getScripts( entrants ) ) {\n\t\t\t\t\t\tif (this instanceof ShadowRoot) {\n\t\t\t\t\t\t\tscript.setAttribute('data-handling', 'manual');\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst $script = document.createElement( 'script' );\n\t\t\t\t\t\t[ ...script.attributes ].forEach( attr => $script.setAttribute( attr.name, attr.value ) );\n\t\t\t\t\t\t$script.textContent = script.textContent;\n\t\t\t\t\t\tnoRecurse( script, 'replaceWith', () => script.replaceWith( $script ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// -------------- \n\t\t\t\tif ( apiName === 'outerHTML' ) {\n\t\t\t\t\tvalue = new DocumentFragment;\n\t\t\t\t\tnoRecurse( value, 'append', () => value.append( ...entrants ) );\n\t\t\t\t\texec = () => noRecurse( this, 'replaceWith', () => Element.prototype.replaceWith.call( this, value ) );\n\t\t\t\t} else {\n\t\t\t\t\tif ( this instanceof HTMLTemplateElement ) {\n\t\t\t\t\t\texec = () => noRecurse( this.content, 'replaceChildren', () => this.content.replaceChildren( ...entrants ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\texec = () => noRecurse( this, 'replaceChildren', () => Element.prototype.replaceChildren.call( this, ...entrants ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\tconst record = { target, entrants, exits, type: 'interception', event: [ this, apiName ] };\n\t\t\treturn intercept( record, exec );\n\t\t}\n\t} );\n\n\treturn rm;\n}\n", "\r\n/**\r\n * Applies all supported polyfills\r\n */\r\nexport default function() {\r\n    CSS_escape.call( this );\r\n    Node_isConnected.call( this );\r\n    Element_matches.call( this );\r\n}\r\n\r\n/**\r\n * Polyfills the window.CSS object.\r\n *  \r\n * @return void\r\n */\r\nexport function CSS_escape() {\r\n    const window = this;\r\n    if ( !window.CSS ) { window.CSS = {} }\r\n    if ( !window.CSS.escape ) {\r\n        /**\r\n         * Polyfills the window.CSS.escape() function.\r\n         *  \r\n         * @param string str \r\n         * \r\n         * @return string\r\n         */\r\n        window.CSS.escape = str => str.replace( /([\\:@\\~\\$\\&])/g, '\\\\$1' );\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Node.prototype.isConnected property\r\n * \r\n * @see MDN\r\n  *  \r\n * @return bool\r\n*/\r\nexport function Node_isConnected() {\r\n    const window = this;\r\n    if ( !( 'isConnected' in window.Node.prototype ) ) {\r\n        Object.defineProperty( window.Node.prototype, 'isConnected', { get: function() {\r\n            return !this.ownerDocument || !(\r\n                this.ownerDocument.compareDocumentPosition( this )\r\n                & this.DOCUMENT_POSITION_DISCONNECTED);\r\n        } } );\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Element.prototype.matches() method\r\n * \r\n * @see MDN\r\n  *  \r\n * @return void\r\n*/\r\nexport function Element_matches() {\r\n    const window = this;\r\n    if ( !window.Element.prototype.matches ) {\r\n        window.Element.prototype.matches = \r\n        window.Element.prototype.matchesSelector || \r\n        window.Element.prototype.mozMatchesSelector ||\r\n        window.Element.prototype.msMatchesSelector || \r\n        window.Element.prototype.oMatchesSelector || \r\n        window.Element.prototype.webkitMatchesSelector ||\r\n        function( s ) {\r\n            var matches = ( this.document || this.ownerDocument ).querySelectorAll( s ),\r\n                i = matches.length;\r\n            while ( --i >= 0 && matches.item( i ) !== this ) {}\r\n            return i > -1;            \r\n        }\r\n    }\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isNumeric, _isString, _isFunction } from '@webqit/util/js/index.js';\r\nimport { _set } from '@webqit/util/obj/index.js';\r\nimport Scheduler from './Scheduler.js';\r\nimport DOMRealtime from './realtime/DOMRealtime.js';\r\nimport AttrRealtime from './realtime/AttrRealtime.js';\r\nimport polyfill from './polyfills.js';\r\n\r\nexport default function() {\r\n    const window = this;\r\n    if ( !window.webqit ) window.webqit = {};\r\n    if ( window.webqit.realdom ) return window.webqit.realdom;\r\n    window.webqit.realdom = {};\r\n    polyfill.call( window );\r\n    // ------\r\n    window.webqit.realdom.meta = ( ...args ) => meta.call( window, ...args );\r\n    window.webqit.realdom.ready = ( ...args ) => ready.call( window, ...args );\r\n    // ------\r\n    window.webqit.realdom.realtime = ( context, namespace = 'dom' ) => {\r\n        if ( namespace === 'dom' ) return new DOMRealtime( context, window );\r\n        if ( namespace === 'attr' ) return new AttrRealtime( context, window );\r\n    };\r\n    // ------\r\n    const scheduler = new Scheduler( window );\r\n    window.webqit.realdom.schedule = ( type, ...args ) => {\r\n        return scheduler[ `on${ type }` ]( ...args );\r\n    };\r\n    window.webqit.realdom.synthesizeWhile = ( ...args ) => {\r\n        return scheduler.synthesizeWhile( ...args );\r\n    };\r\n    // ------\r\n    return window.webqit.realdom;\r\n}\r\n\r\n\r\n/**\r\n * DOM-ready listeners.\r\n * \r\n * @param Function\t    \t\tcallback\r\n * \r\n * @return void\r\n */\r\nfunction ready( ...args ) {\r\n    let timing = 'interactive', callback;\r\n    if ( _isString( args[ 0 ] ) ) {\r\n        timing = args[ 0 ];\r\n        if ( _isFunction( args[ 1 ] ) ) { callback = args[ 1 ]; }\r\n    } else if ( _isFunction( args[ 0 ] ) ) { callback = args[ 0 ]; }\r\n    // --------------\r\n    const timings = { interactive: [ 'interactive', 'complete' ], complete: [ 'complete' ], };\r\n    if ( !timings[ timing ] ) throw new Error( `Invalid ready-state timing: ${ timing }.` );\r\n\tconst window = this;\r\n    // --------------\r\n    if ( !callback ) {\r\n        if ( !window.webqit.realdom.readyStatePromises ) {\r\n            window.webqit.realdom.readyStatePromises = {\r\n                interactive: new Promise( res => ready.call( this, 'interactive', res ) ),\r\n                complete: new Promise( res => ready.call( this, 'complete', res ) ),\r\n            };\r\n        }\r\n        return window.webqit.realdom.readyStatePromises[ timing ];\r\n    }\r\n    // --------------\r\n\tif ( timings[ timing ].includes( window.document.readyState ) ) return callback( window );\r\n    if ( !window.webqit.realdom.readyStateCallbacks ) {\r\n        window.webqit.realdom.readyStateCallbacks = { interactive: [], complete: [] };\r\n        window.document.addEventListener( 'readystatechange', () => {\r\n            const state = window.document.readyState;\r\n            for ( const callback of window.webqit.realdom.readyStateCallbacks[ state ].splice( 0 ) ) {\r\n                callback( window );\r\n            }\r\n        }, false );\r\n    }\r\n    window.webqit.realdom.readyStateCallbacks[ timing ].push( callback );\r\n}\r\n\r\n/**\r\n * A webqit's meta tag props reader.\r\n *  \r\n * @param String name\r\n * \r\n * @return Object\r\n */\r\nfunction meta( name ) {\r\n    const window = this;\r\n    let _content = {}, _el;\r\n    if ( _el = window.document.querySelector( `meta[name=\"${ name }\"]` ) ) {\r\n        _content = ( _el.content || '' ).split( ';' ).filter( v => v ).reduce( ( _metaVars, directive ) => {\r\n            const directiveSplit = directive.split( '=' ).map( d => d.trim() );\r\n            _set( _metaVars, directiveSplit[ 0 ].split( '.' ), directiveSplit[ 1 ] === 'true' ? true : (directiveSplit[ 1 ] === 'false' ? false : (\r\n                    _isNumeric( directiveSplit[ 1 ] ) ? parseInt( directiveSplit[ 1 ] ) : directiveSplit[ 1 ]\r\n                ) )\r\n            );\r\n            return _metaVars;\r\n        }, {} );\r\n    }\r\n    return { get name() { return name; }, get content() { return _el.content; }, json() {\r\n\t\treturn JSON.parse( JSON.stringify( _content ) );\r\n    } };\r\n}", "\n/**\n * @imports\n */\nimport init from './index.js';\n\ninit.call( window );"],
  "mappings": "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",
  "names": ["isObject_default", "val", "isArray_default", "val", "isTypeFunction_default", "val", "isNull_default", "val", "isUndefined_default", "val", "isTypeObject_default", "val", "isTypeFunction_default", "isEmpty_default", "val", "isNull_default", "isUndefined_default", "isTypeObject_default", "isFunction_default", "val", "isTypeFunction_default", "isNumber_default", "val", "isNumeric_default", "val", "isNumber_default", "isString_default", "val", "isTypeArray_default", "val", "isString_default", "isUndefined_default", "wq", "obj", "namespaces", "WQInternals", "_ns", "_wq", "from_default", "val", "castObject", "isArray_default", "isObject_default", "isEmpty_default", "isTypeArray_default", "get_default", "ctxt", "path", "trap", "reciever", "from_default", "_ctxt", "isUndefined_default", "isNull_default", "_key", "isTypeObject_default", "set_default", "obj", "path", "val", "buildTree", "trap", "_set", "target", "key", "isNumeric_default", "i", "isArray_default", "from_default", "isTypeObject_default", "isFunction_default", "branch", "get_default", "branchSuccess", "Scheduler", "window", "synthesis", "callback", "returnValue", "withPromise", "resolve", "onread", "onwrite", "prevTransaction", "readReturn", "callWrite", "writeReturn", "repeatTransaction", "isXpath", "expr", "xpathQuery", "window", "context", "subtree", "x", "nodes", "node", "result", "xpathMatch", "containsNode", "a", "b", "crossRoots", "testCache", "prevTest", "response", "val", "rootNodeA", "rootNodeB", "splitOuter", "str", "delim", "quote", "depth", "splits", "skip", "DOMSpec", "content", "isXpath", "splitOuter", "Realtime", "context", "namespace", "window", "args", "isFunction_default", "isObject_default", "DOMSpec", "from_default", "x", "s", "wq", "interceptionTiming", "record_s", "callback", "deferreds", "testCache", "registration", "deferred", "$records", "record", "containsNode", "signal", "objects", "disconnectable", "d", "AttrRealtime", "Realtime", "context", "args", "spec", "callback", "params", "originalFilterIsString", "DOMSpec", "records", "attrIntersection", "signalGenerator", "record", "flags", "disconnectable_live", "window", "webqit", "attrInterception", "disconnectable", "dedupAndIgnoreInternals", "rcd", "withAttrEventDetails", "dispatch", "registration", "$params", "a", "interceptionTiming", "registry", "rcds", "i", "wq", "atomics", "r", "$spec", "exclusion", "internalAttrInteraction", "value", "record_s", "node", "attrName", "savedAttrLocking", "_type", "attr", "target", "attributeName", "oldValue", "event", "timing", "document", "Element", "rm", "attrIntercept", "defaultAction", "returnValue", "originalApis", "apiName", "DOMRealtime", "Realtime", "context", "args", "filter", "callback", "params", "window", "AttrRealtime", "spec", "records", "getRecord", "target", "node", "s", "cssSelectors", "xpathQueries", "css", "xpath", "matches", "xpathQuery", "disconnectable", "signalGenerator", "record", "flags", "disconnectable_live", "webqit", "document", "domInterception", "dispatch", "registration", "withEventDetails", "disconnectable_attr", "staticSensitivity", "interceptionTiming", "mo", "registry", "elements", "parseDot", "selector", "parseHash", "parse", "x", "attrs", "entrants", "exits", "val", "_records", "matchesCache", "_record", "generation", "$deliveryCache", "nodesIntersection", "crossRoots", "sources", "deepIntersect", "match", "source", "xpathMatch", "collection", "containsNode", "_matches", "addedNodes", "removedNodes", "event", "from_default", "prev", "timing", "Node", "CharacterData", "Element", "HTMLElement", "HTMLTemplateElement", "DocumentFragment", "rm", "noRecurse", "method", "returnValue", "intercept", "defaultAction", "timeout", "_apiNames", "_apiOriginals", "all", "apis", "apiName", "DOMClassName", "_apiOriginal", "setter", "name", "$apiOriginals", "exec", "apiNameFinal", "tempNodeName", "temp", "value", "getScripts", "nodes", "scripts", "el", "t", "script", "$script", "attr", "polyfills_default", "CSS_escape", "Node_isConnected", "Element_matches", "window", "str", "s", "matches", "i", "src_default", "window", "polyfills_default", "args", "meta", "ready", "context", "namespace", "DOMRealtime", "AttrRealtime", "scheduler", "Scheduler", "type", "timing", "callback", "isString_default", "isFunction_default", "timings", "res", "state", "name", "_content", "_el", "v", "_metaVars", "directive", "directiveSplit", "d", "set_default", "isNumeric_default", "src_default"]
}
