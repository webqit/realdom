{
  "version": 3,
  "sources": ["../node_modules/@webqit/util/js/isObject.js", "../node_modules/@webqit/util/js/isArray.js", "../node_modules/@webqit/util/arr/intersect.js", "../node_modules/@webqit/util/js/internals.js", "../node_modules/@webqit/util/js/isTypeFunction.js", "../node_modules/@webqit/util/js/isNull.js", "../node_modules/@webqit/util/js/isUndefined.js", "../node_modules/@webqit/util/js/isTypeObject.js", "../node_modules/@webqit/util/js/isEmpty.js", "../node_modules/@webqit/util/js/isFunction.js", "../node_modules/@webqit/util/js/isNumber.js", "../node_modules/@webqit/util/js/isNumeric.js", "../node_modules/@webqit/util/js/isString.js", "../node_modules/@webqit/util/js/isTypeArray.js", "../node_modules/@webqit/util/arr/from.js", "../node_modules/@webqit/util/obj/get.js", "../node_modules/@webqit/util/obj/set.js", "../src/Scheduler.js", "../src/realtime/Xpath.js", "../src/realtime/DOMSpec.js", "../src/realtime/Realtime.js", "../src/realtime/AttrRealtime.js", "../src/realtime/DOMRealtime.js", "../src/polyfills.js", "../src/index.js", "../src/targets.browser.js"],
  "sourcesContent": ["\r\n/**\r\n * Tells if val is pure object.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn !Array.isArray(val) && typeof val === 'object' && val;\r\n};\r\n", "\r\n/**\r\n * Tells if val is of type \"array\".\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn Array.isArray(val);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\n\r\n/**\r\n * Returns the intersection of two arrays;\r\n * optionally using a custom matching function.\r\n *\r\n * @param array \tarr\r\n * @param array\t \tarr2\r\n * @param function \tcallback\r\n *\r\n * @return array\r\n */\r\nexport default function(arr, arr2, callback = null) {\r\n\treturn !_isArray(arr2) ? [] : arr.filter(val1 => callback \r\n\t\t? arr2.filter(val2 => callback(val1, val2)).length \r\n\t\t: arr2.indexOf(val1) !== -1\r\n\t);\r\n};\r\n", "/**\r\n * @imports\r\n */\r\nimport _intersect from '../arr/intersect.js';\r\n\r\n/**\r\n * Creates and/or returns an \"internals\" object for the given object.\r\n * \r\n * @param Any obj\r\n * @param String namespace\r\n * \r\n * @return Object\r\n */\r\nexport default function internals(obj, ...namespaces) {\r\n    if (!globalThis.webqit) { globalThis.webqit = {}; }\r\n    if (!globalThis.webqit.refs) {\r\n        Object.defineProperty(globalThis.webqit, 'refs', {value: new ObservableMap})\r\n    }\r\n    if (!arguments.length) return globalThis.webqit.refs;\r\n    let itnls = globalThis.webqit.refs.get(obj);\r\n    if (!itnls) {\r\n        itnls = new ObservableMap;\r\n        globalThis.webqit.refs.set(obj, itnls);\r\n    }\r\n    let _ns, _itnls;\r\n    while ((_ns = namespaces.shift())) {\r\n        if ((_itnls = itnls) && !(itnls = itnls.get(_ns))) {\r\n            itnls = new ObservableMap;\r\n            _itnls.set(_ns, itnls);\r\n        }\r\n    }\r\n    return itnls;\r\n}\r\n\r\nclass ObservableMap extends Map {\r\n    constructor( ...args ) {\r\n        super( ...args );\r\n        this.observers = new Set;\r\n    }\r\n    set( key, value ) {\r\n        let returnValue = super.set( key, value );\r\n        this.fire( 'set', key, value, key );\r\n        return returnValue;\r\n    }\r\n    delete( key ) {\r\n        let returnValue = super.delete( key );\r\n        this.fire( 'delete', key );\r\n        return returnValue;\r\n    }\r\n    has( key ) {\r\n        this.fire( 'has', key );\r\n        return super.has( key );\r\n    }\r\n    get( key ) {\r\n        this.fire( 'get', key );\r\n        return super.get( key );\r\n    }\r\n    keyNames() { return Array.from( super.keys() ); }\r\n    observe( type, key, callback ) {\r\n        const entry = { type, key, callback };\r\n        this.observers.add( entry );\r\n        return () => this.observers.delete( entry );\r\n    }\r\n    unobserve( type, key, callback ) {\r\n        if ( Array.isArray( type ) || Array.isArray( key ) ) {\r\n            throw new Error( `The \"type\" and \"key\" arguments can only be strings.` );\r\n        }\r\n        for ( let entry of this.observers ) {\r\n            if ( !( _intersection( [ type, '*' ], entry.type ) && _intersection( [ key, '*' ], entry.key ) && entry.callback === callback ) ) continue;\r\n            this.observers.delete( entry );\r\n        }\r\n    }\r\n    fire( type, key, ...args ) {\r\n        // IMPORTANT: Array.from() must be used so that new additions to this.observers\r\n        // during the loop aren't picked up!\r\n        for ( let entry of this.observers ) {\r\n            if ( !( _intersection( [ type, '*' ], entry.type ) && _intersection( [ key, '*' ], entry.key ) ) ) continue;\r\n            entry.callback( ...args );\r\n        }\r\n    }\r\n}\r\n\r\nconst _intersection = ( a, b ) => {\r\n    if ( Array.isArray( b ) ) return _intersect( a, b ).length;\r\n    return a.includes( b );\r\n}\r\n", "\r\n/**\r\n * Tells if val is of type \"function\".\r\n * This holds true for both regular functions and classes.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn typeof val === 'function';\r\n};\r\n", "\r\n/**\r\n * Tells if val is undefined or is null.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val === null || val === '';\r\n};\r\n", "\r\n/**\r\n * Tells if val is undefined or is of type \"undefined\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn arguments.length && (val === undefined || typeof val === 'undefined');\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeFunction from './isTypeFunction.js';\r\n\r\n/**\r\n * Tells if val is of type \"object\".\r\n * This holds true for anything object, including built-ins.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn Array.isArray(val) || (typeof val === 'object' && val) || _isTypeFunction(val);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isNull from './isNull.js';\r\nimport _isUndefined from './isUndefined.js';\r\nimport _isTypeObject from './isTypeObject.js';\r\n\r\n/**\r\n * Tells if val is empty in its own type.\r\n * This holds true for NULLs, UNDEFINED, FALSE, 0,\r\n * objects without keys, empty arrays.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isNull(val) || _isUndefined(val) || val === false || val === 0 \r\n\t\t|| (_isTypeObject(val) && !Object.keys(val).length);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeFunction from './isTypeFunction.js';\r\n\r\n/**\r\n * Tells if val is of type \"function\".\r\n *\r\n * @param object \t\tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isTypeFunction(val) || (val && {}.toString.call(val) === '[object function]');\r\n};\r\n", "\r\n/**\r\n * Tells if val is of type \"number\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val instanceof Number || (typeof val === 'number');\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isNumber from './isNumber.js';\r\n/**\r\n * Tells if val is of type \"string\" or a numeric string.\r\n * This holds true for both numbers and numeric strings.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isNumber(val) || (val !== true && val !== false && val !== null && val !== '' && !isNaN(val * 1));\r\n};\r\n", "\r\n/**\r\n * Tells if val is of type \"string\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val instanceof String || (typeof val === 'string' && val !== null);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isString from './isString.js';\r\nimport _isUndefined from './isUndefined.js';\r\n\r\n/**\r\n * Tells if val is \"array-like\".\r\n * This holds true for anything that has a length property.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn !_isString(val) && !_isUndefined(val.length);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isTypeArray from '../js/isTypeArray.js';\r\nimport _isEmpty from '../js/isEmpty.js';\r\nimport _isObject from '../js/isObject.js';\r\n\r\n/**\r\n * Casts an array-like object to an array.\r\n *\r\n * @param mixed \tval\r\n * @param bool\t \tcastObject\r\n *\r\n * @return array\r\n */\r\nexport default function(val, castObject = true) {\r\n\tif (_isArray(val)) {\r\n\t\treturn val;\r\n\t};\r\n\tif (!castObject && _isObject(val)) {\r\n\t\treturn [val];\r\n\t};\r\n\tif (val !== false && val !== 0 && _isEmpty(val)) {\r\n\t\treturn [];\r\n\t};\r\n\tif (_isTypeArray(val)) {\r\n\t\treturn Array.prototype.slice.call(val);\r\n\t};\r\n\tif (_isObject(val)) {\r\n\t\treturn Object.values(val);\r\n\t};\r\n\treturn [val];\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isUndefined from '../js/isUndefined.js';\r\nimport _isNull from '../js/isNull.js';\r\nimport _arrFrom from '../arr/from.js';\r\n\r\n/**\r\n * Retrieves the value at the given path.\r\n *\r\n * A return value of undefined is ambiguous, and can mean either that the\r\n * path does not exist, or that the path actually exists but with a value of undefined. If it is required to\r\n * know whether the path actually exists, pass an object as a third argument.\r\n * This object will have an \"exists\" key set to true/false.\r\n *\r\n * @param object \t\t\t\tctxt\r\n * @param array \t\t\t\tpath\r\n * @param object \t\t\t\ttrap\r\n * @param object \t\t\t\treciever\r\n *\r\n * @return mixed\r\n */\r\nexport default function(ctxt, path, trap = {}, reciever = {}) {\r\n\tpath = _arrFrom(path).slice();\r\n\tvar _ctxt = ctxt;\r\n\twhile(!_isUndefined(_ctxt) && !_isNull(_ctxt) && path.length) {\r\n\t\tvar _key = path.shift();\r\n\t\tif (!(trap.get ? trap.get(_ctxt, _key) : (_isTypeObject(_ctxt) ? _key in _ctxt : _ctxt[_key]))) {\r\n\t\t\treciever.exists = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t_ctxt = trap.get ? trap.get(_ctxt, _key) : _ctxt[_key];\r\n\t}\r\n\treciever.exists = true;\r\n\treturn _ctxt;\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isFunction from '../js/isFunction.js';\r\nimport _isNumeric from '../js/isNumeric.js';\r\nimport _isArray from '../js/isArray.js';\r\nimport _arrFrom from '../arr/from.js';\r\nimport _get from './get.js';\r\n\r\n/**\r\n * Sets a value to the given path.\r\n *\r\n * @param object \t\t\t\tobj\r\n * @param array \t\t\t\tpath\r\n * @param mixed \t\t\t\tval\r\n * @param object|function \t\tbuildTree\r\n * @param object \t\t\t\ttrap\r\n *\r\n * @return bool\r\n */\r\nexport default function(obj, path, val, buildTree = {}, trap = {}) {\r\n\tconst _set = (target, key, val) => {\r\n\t\tif (trap.set) {\r\n\t\t\treturn trap.set(target, key, val);\r\n\t\t} else {\r\n\t\t\tif (_isNumeric(path[i]) && _isArray(target)) {\r\n\t\t\t\ttarget.push(val);\r\n\t\t\t} else {\r\n\t\t\t\ttarget[key] = val;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\tpath = _arrFrom(path);\r\n\tvar target = obj;\r\n\tfor(var i = 0; i < path.length; i ++) {\r\n\t\tif (i < path.length - 1) {\r\n\t\t\tif (!target || (!_isTypeObject(target) && !_isFunction(target))) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar branch = _get(target, path[i], trap);\r\n\t\t\tif (!_isTypeObject(branch)) {\r\n\t\t\t\tif (trap.buildTree === false) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbranch = _isFunction(trap.buildTree) ? trap.buildTree(i) : (_isNumeric(path[i + 1]) ? [] : {});\r\n\t\t\t\tvar branchSuccess = _set(target, path[i], branch);\r\n\t\t\t\tif (!branchSuccess) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttarget = branch;\r\n\t\t} else {\r\n\t\t\treturn _set(target, path[i], val);\r\n\t\t}\r\n\t}\r\n};\r\n", "\n/**\n * ---------------------------\n * Binds callbacks to requestAnimationFrame()\n * to create a central \"read/write\" phases for Ctxt access.\n * ---------------------------\n */\n\t\t\t\nexport default class Scheduler {\n\n\t/**\n\t * Starts the loop.\n\t *\n\t * @return this\n\t */\n\tconstructor( window, asyncDOM = true ) {\n\t\tObject.defineProperty( this, 'window', { value: window } );\n\t\tObject.defineProperty( this, 'readCallbacks', { value: new Set } );\n\t\tObject.defineProperty( this, 'writeCallbacks', { value: new Set } );\n\t\tthis.async = asyncDOM;\n\t\tif ( this.window.requestAnimationFrame ) {\n\t\t\tthis._run();\n\t\t} else {\n\t\t\tthis.async = false;\n\t\t}\n\t}\n\n\t_run() {\n\t\tthis.window.requestAnimationFrame( () => {\n\t\t\tfor ( const callback of this.readCallbacks ) {\n\t\t\t\tcallback();\n\t\t\t\tthis.readCallbacks.delete( callback );\n\t\t\t}\n\t\t\tfor ( const callback of this.writeCallbacks ) {\n\t\t\t\tcallback();\n\t\t\t\tthis.writeCallbacks.delete( callback );\n\t\t\t}\n\t\t\tthis._run();\n\t\t} );\n\t}\n\t\n\t/**\n\t * Binds a callback to the \"read\" phase.\n\t *\n\t * @param function \tcallback\n\t * @param bool\t\twithPromise\n\t *\n\t * @return void\n\t */\n\tonread( callback, withPromise = false ) {\n\t\tif ( withPromise ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tif ( this.async === false ) {\n\t\t\t\t\tresolve( callback() );\n\t\t\t\t} else {\n\t\t\t\t\tthis.readCallbacks.add( () => {\n\t\t\t\t\t\tresolve( callback() );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\tif ( this.async === false ) {\n\t\t\tcallback();\n\t\t} else {\n\t\t\tthis.readCallbacks.add( callback );\n\t\t}\n\t}\n\t\n\t/**\n\t * Binds a callback to the \"write\" phase.\n\t *\n\t * @param function \tcallback\n\t * @param bool\t\twithPromise\n\t *\n\t * @return void\n\t */\n\tonwrite( callback, withPromise = false ) {\n\t\tif ( withPromise ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tif ( this.async === false ) {\n\t\t\t\t\tresolve( callback() );\n\t\t\t\t} else {\n\t\t\t\t\tthis.writeCallbacks.add( () => {\n\t\t\t\t\t\tresolve( callback() );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\tif ( this.async === false ) {\n\t\t\tcallback();\n\t\t} else {\n\t\t\tthis.writeCallbacks.add( callback );\n\t\t}\n\t}\n\t\n\t/**\n\t * A special construct for Ctxt manipulations that span\n\t * one or more read/write cycles.\n\t *\n\t * @param function \tread\n\t * @param function \twrite\n\t * @param mixed\t\tprevTransaction\n\t *\n\t * @return void|mixed\n\t */\n\tcycle( onread, onwrite, prevTransaction ) {\n\t\tthis.onread( () => {\n\t\t\t// Record initial values\n\t\t\tconst readReturn = onread( prevTransaction );\n\t\t\t// Call erite, the transation\n\t\t\tconst callWrite = ( readReturn ) => {\n\t\t\t\tif ( readReturn === undefined ) return;\n\t\t\t\tthis.onwrite( () => {\n\t\t\t\t\tconst writeReturn = onwrite( readReturn, prevTransaction );\n\t\t\t\t\t// Repeat transaction\n\t\t\t\t\tconst repeatTransaction = ( writeReturn ) => {\n\t\t\t\t\t\tif ( writeReturn === undefined ) return;\n\t\t\t\t\t\tthis.cycle( onread, onwrite, writeReturn );\n\t\t\t\t\t};\n\t\t\t\t\t// ---------------------------------------\n\t\t\t\t\t// If \"write\" returns a promise, we wait until it is resolved\n\t\t\t\t\t// ---------------------------------------\n\t\t\t\t\tif ( writeReturn instanceof Promise ) {\n\t\t\t\t\t\twriteReturn.then( repeatTransaction );\n\t\t\t\t\t} else {\n\t\t\t\t\t\trepeatTransaction( writeReturn );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t};\n\t\t\t// ---------------------------------------\n\t\t\t// If \"read\" returns a promise, we wait until it is resolved\n\t\t\t// ---------------------------------------\n\t\t\tif ( readReturn instanceof Promise ) {\n\t\t\t\treadReturn.then( callWrite );\n\t\t\t} else {\n\t\t\t\tcallWrite( readReturn );\n\t\t\t}\n\t\t} );\n\t}\n\n}", "\n\nexport function isXpath( expr ) { return ( expr = expr.trim() ) && expr.startsWith( '(' ) && expr.endsWith( ')' ) }\n\nexport function query( window, context, expr, subtree = true ) {\n    expr = ( Array.isArray( expr ) ? expr : [ expr ] ).map( x => ( x + '' ).replace( '(', subtree ? '(.//' : '(./' ) ).join( '|' );\n    const result = window.document.evaluate( expr, context, null, XPathResult.ANY_TYPE );\n    let nodes = [], node;\n    while ( node = result.iterateNext() ) nodes.push( node );\n    return nodes;\n}\n\nexport function match( window, node, expr ) {\n    expr = ( Array.isArray( expr ) ? expr : [ expr ] ).map( x => ( x + '' ).replace( '(', '(self::' ) ).join( '|' );\n    return window.document.evaluate( `${ expr }`, node, null, XPathResult.BOOLEAN_TYPE ).booleanValue;\n}\n\nexport function split( s, delim = '|' ) {\n    return [ ...s ].reduce( ( [ state, splits ], x ) => {\n        if ( x === delim && state === 0 ) return [ state, [ '' ].concat( splits ) ];\n        if ( [ '(', '[' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) state++;\n        if ( [ ')', ']' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) state--;\n        splits[ 0 ] += x;\n        return [ state, splits ]\n    }, [ 0, [ '' ] ] )[ 1 ].reverse();\n}\n", "\n/**\n * @imports\n */\nimport * as Xpath from './Xpath.js';\n\nexport default class DOMSpec {\n    constructor( content ) {\n        this.content = content;\n        this.type = typeof content === 'string' ? 'selector' : 'instance';\n        this.kind = this.type === 'instance' ? null : Xpath.isXpath( content ) ? 'xpath' : 'css';\n        if ( this.kind === 'xpath' ) {\n            this.isXpathAttr = Xpath.split( content.trim().slice( 1, -1 ), '@' ).length > 1;\n        }\n    }\n    toString() { return this.content; }\n}", "\n/**\n * @imports\n */\nimport { _isFunction, _isObject, _internals } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport DOMSpec from './DOMSpec.js';\n\n/**\n *\n * @class Realtime\n */\nexport default class Realtime {\n\n\t/**\n\t * @constructor\n\t *\n\t * @param document|Element\tcontext\n\t */\n\tconstructor( context, namespace, window ) {\n\t\tthis.context = context;\n\t\tthis.namespace = namespace;\n\t\tthis.window = context.defaultView || context.ownerDocument?.defaultView || window;\n\t\tthis.document = this.window.document;\n\t\tthis.webqit = this.window.webqit;\n\t\tObject.defineProperty( this, '#', { value: {} } );\n\t}\n\t\n\t/**\n\t * Resolves arguments\n\t * \n\t * @param Array \t\t\targs \n\t * \n\t * @returns Array\n\t */\n\tresolveArgs( args ) {\n\t\tif ( _isFunction( args[ 0 ] ) ) { args = [ [], ...args ]; }\n\t\telse if ( _isObject( args[ 0 ] ) && !( args[ 0 ] instanceof DOMSpec ) && args.length === 1 ) {\n\t\t\targs = [ [], undefined, args[ 0 ] ];\n\t\t} else if ( _isObject( args[ 1 ] ) && args.length === 2 ) {\n\t\t\targs = [ _arrFrom( args[ 0 ], false/*castObject*/ ), undefined, args[ 1 ] ];\n\t\t} else { args[ 0 ] = _arrFrom( args[ 0 ], false/*castObject*/ ); }\n\t\tif ( args[ 0 ].filter( x => typeof x !== 'string' && !( x instanceof DOMSpec ) && !( x instanceof this.window.Node ) ).length ) {\n\t\t\tthrow new Error( `Argument #2 must be either a string or a Node object, or a list of those.` );\n\t\t}\n\t\targs[ 0 ] = args[ 0 ].map( s => s instanceof DOMSpec ? s : new DOMSpec( s ) );\n\t\treturn args;\n\t}\n\n\t/**\n\t * @registry\n\t *\n\t * @param Array\t\t\t\t...args\n\t * \n\t * @returns Map\n\t */\n\tregistry( ...args ) {\n\t\treturn _internals( 'realdom.realtime', this.window, this.namespace, ...args );\n\t}\n\t\t\n\t/**\n\t * @createSignalGenerator\n\t * \n\t * @param Object \t\t\tmo \n\t * \n\t * @returns Object\n\t */\n\tcreateSignalGenerator() {\n\t\treturn {\n\t\t\tgenerate() {\n\t\t\t\t// Abort previous\n\t\t\t\tthis.lastController?.abort();\n\t\t\t\tthis.lastController = new AbortController;\n\t\t\t\tconst flags = { signal: this.lastController.signal };\n\t\t\t\treturn flags;\n\t\t\t},\n\t\t\tdisconnect() { this.lastController?.abort(); }\n\t\t}\n\t}\n\t\t\n\t/**\n\t * Loops through registration objects whose contexts match the event context.\n\t * \n\t * @param String \t\tinterceptionTiming\n\t * @param Object|Array \trecord_s\n\t * @param Function \t\tcallback \n\t * \n\t * @returns void\n\t */\n\tforEachMatchingContext( interceptionTiming, record_s, callback ) {\n\t\tconst { window } = this, records = Array.isArray( record_s ) ? record_s : [ record_s ];\n\t\tlet dispatchBatch = new Set;\n\t\tfor ( const [ depth, registries ] of this.registry( interceptionTiming ) ) {\n\t\t\tfor ( const [ context, registry ] of registries ) {\n\t\t\t\t// Ensure event target is/within context\n\t\t\t\tlet matches = records.filter( record => {\n\t\t\t\t\tif ( !context.contains( record.target ) ) return false;\n\t\t\t\t\treturn depth === 'subtree' || record.target === context;\n\t\t\t\t} );\n\t\t\t\tif ( !matches.length ) continue;\n\t\t\t\t// Records will be dispatched in their original form\n\t\t\t\tif ( !Array.isArray( record_s ) ) { matches = matches[ 0 ]; }\n\t\t\t\tfor ( const registration of registry ) {\n\t\t\t\t\tdispatchBatch.add( [ registration, matches, context ] );\n\t\t\t\t\t//callback.call( window, registration, matches, context );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Saving everything to dispatchBatch ensures that recursive modifications\n\t\t// to both this.registry( interceptionTiming ), registries, and registry aren't pciked up\n\t\tfor ( const [ registration, record_s, context ] of dispatchBatch ) {\n\t\t\tcallback.call( window, registration, record_s, context );\n\t\t}\n\t}\n\n\t/**\n\t * @disconnectables\n\t * \n\t * @param AbortSignal \t\tsignal\n\t * @param Array \t\t\t...objects \n\t * \n\t * @returns Object\n\t */\n\tdisconnectables( signal, ...objects ) {\n\t\tconst disconnectable = { disconnect() {\n\t\t\tobjects.forEach( d => (\n\t\t\t\td && _isFunction( d.disconnect ) && d.disconnect() \n\t\t\t\t|| _isFunction( d ) && d() \n\t\t\t\t|| _isObject( d ) && ( d.disconnected = true )\n\t\t\t) );\n\t\t} };\n\t\tif ( signal ) signal.addEventListener( 'abort', () => disconnectable.disconnect() );\n\t\treturn disconnectable;\n\t}\n}\n", "\n/**\n * @imports\n */\nimport Realtime from './Realtime.js';\nimport DOMSpec from './DOMSpec.js';\n\n/**\n *\n * @class AttrRealtime\n */\nexport default class AttrRealtime extends Realtime {\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor( context, ...args ) {\n\t\tsuper( context, 'attr', ...args );\n\t}\n\t\n\t/**\n\t * Runs a query.\n\t *\n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable|Void\n\t */\n\tget( spec, callback = undefined, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec = [], callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context } = this;\n\t\t// -------------\n\t\tconst records = attrIntersection( context, spec );\n\t\tif ( !callback ) return records;\n\t\tconst signalGenerator = params.lifecycleSignals && this.createSignalGenerator();\n\t\tif ( !originalFilterIsString ) {\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( records, flags, context );\n\t\t} else {\n\t\t\tfor ( const record of records ) {\n\t\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\t\tcallback( record, flags, context );\n\t\t\t}\n\t\t}\n\t\t// -------------\n\t\tif ( params.live ) {\n\t\t\tif ( signalGenerator ) { params = { ...params, signalGenerator }; }\n\t\t\tconst disconnectable_live = this.observe( originalFilterIsString ? spec[ 0 ] : spec, callback, { newValue: true, ...params } );\n\t\t\treturn this.disconnectables( params.signal, disconnectable_live );\n\t\t}\n\t}\n\n\t/**\n\t * Mutation Observer\n\t * \n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserve( spec, callback, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec = [], callback, params = {} ] = this.resolveArgs( arguments );\n\t\t// ------------------------\n\t\tif ( [ 'sync', 'intercept' ].includes( params.timing ) ) return this.observeSync( originalFilterIsString ? spec[ 0 ] : spec, callback, params );\n\t\tif ( params.timing && params.timing !== 'async' ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\t// ------------------------\n\t\tconst { context, window, webqit } = this;\n\t\t// ------------------\n\t\tif ( params.eventDetails && !webqit.realdom.attrInterceptionHooks?.intercepting ) {\n\t\t\tattrInterception.call( window, 'intercept', () => {} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = new window.MutationObserver( records => {\n\t\t\trecords = dedup( records ).map( rcd => withAttrEventDetails.call( window, rcd ) );\n\t\t\tdispatch.call( window, registration, records, context );\n\t\t} );\n\t\t// ------------------\n\t\tconst $params = { attributes: true, attributeOldValue: params.oldValue, subtree: params.subtree };\n\t\tif ( spec.length ) { $params.attributeFilter = spec.map( a => a + '' ); }\n\t\tdisconnectable.observe( context, $params );\n\t\t// -------------\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, atomics: new Map, originalFilterIsString, signalGenerator, disconnectable };\n\t\t// -------------\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\t\n\t/**\n\t * Mutation Interceptor\n\t * \n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserveSync( spec, callback, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context, window } = this;\n\t\t// -------------\n\t\tif ( params.timing && ![ 'sync', 'intercept' ].includes( params.timing ) ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\tconst interceptionTiming = params.timing === 'intercept' ? 'intercept' : 'sync';\n\t\tconst intersectionDepth = params.subtree ? 'subtree' : 'children';\n\t\tif ( !this.registry( interceptionTiming ).size ) {\n\t\t\t// One handler per intercept/sync registry\n\t\t\tattrInterception.call( window, interceptionTiming, records => {\n\t\t\t\tthis.forEachMatchingContext( interceptionTiming, records, dispatch );\n\t\t\t} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = { disconnect() {\n\t\t\tregistry.delete( registration );\n\t\t\tif ( !registry.size ) { registries.delete( context ); }\n\t\t} };\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, atomics: new Map, originalFilterIsString, signalGenerator, disconnectable };\n\t\t// -------------\n\t\tconst registries = this.registry( interceptionTiming, intersectionDepth );\n\t\tif ( !registries.has( context ) ) { registries.set( context, new Set ); }\n\t\tconst registry = registries.get( context );\n\t\tregistry.add( registration );\n\t\t// -------------\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n}\n\n/**\n * Deduplicates records.\n * \n * @param Array \t\t\trecords\n * \n * @returns Array\n */\nfunction dedup( records ) {\n\treturn records.reduce( ( rcds, rcd, i ) => {\n\t\tif ( rcds[ i - 1 ]?.attributeName === rcd.attributeName ) return rcds;\n\t\treturn rcds.concat( rcd );\n\t}, [] );\n}\n\n/**\n * Dispatches a mutation record if it matches the observed.\n * \n * @param Object \t\t\tregistration\n * @param Array \t\t\trecords\n * \n * @returns Void\n */\nfunction dispatch( registration, records ) {\n\tconst { context, spec, callback, params, atomics, originalFilterIsString, signalGenerator } = registration;\n\tconst $spec = spec.map( a => a + '' );\n\tif ( params.atomic && !atomics.size ) {\n\t\trecords = attrIntersection( context, spec, records );\n\t} else if ( params.timing !== 'async' && spec.length ) {\n\t\trecords = records.filter( r => $spec.includes( r.name ) );\n\t}\n\tif ( !records.length ) return;\n\t// Should we care about old / new values being present?\n\tif ( !( params.newValue === null && params.oldValue === null && params.eventDetails ) ) {\n\t\trecords = records.map( rcd => {\n\t\t\tlet exclusion;\n\t\t\tif ( !params.eventDetails ) {\n\t\t\t\t( { event: exclusion, ...rcd } = rcd );\n\t\t\t}\n\t\t\tif ( !params.oldValue && ( 'oldValue' in rcd ) ) {\n\t\t\t\t( { oldValue: exclusion, ...rcd } = rcd );\n\t\t\t}\n\t\t\tif ( !params.newValue && ( 'value' in rcd ) ) {\n\t\t\t\t( { value: exclusion, ...rcd } = rcd );\n\t\t\t} else if ( params.newValue && typeof rcd.value === 'undefined' ) {\n\t\t\t\trcd = {  ...rcd, value: rcd.target.getAttribute( rcd.name ) };\n\t\t\t}\n\t\t\treturn rcd;\n\t\t} );\n\t}\n\tif ( params.atomic ) {\n\t\trecords.forEach( record => atomics.set( record.name, record ) );\n\t\trecords = Array.from( atomics.entries() ).map( ( [ , value ] ) => value );\n\t}\n\tconst record_s = originalFilterIsString ? records[ 0 ] : records;\n\tconst flags = signalGenerator?.generate() || {};\n\tcallback( record_s, flags, context );\n}\n\n/**\n * Helper to determining which records to deliver.\n * \n * @param Object \t\t\tcontext\n * @param Array \t\t\tspec\n * @param Array \t\t\trecords\n * \n * @returns Array\n */\nfunction attrIntersection( context, spec, records = [] ) {\n\tconst _type = { event: null, type: 'attribute' };\n\tif ( spec.length ) {\n\t\treturn spec.map( attrName => {\n\t\t\tattrName = attrName + '';\n\t\t\treturn records.find( r => r.name === attrName ) || { target: context, name: attrName, value: context.getAttribute( attrName ), ..._type };\n\t\t} );\n\t}\n\tconst attrs = Array.from( context.attributes );\n\treturn attrs.map( attr => {\n\t\treturn records.find( r => r.name === attr.nodeName ) || { target: context, name: attr.nodeName, value: attr.nodeValue, ..._type };\n\t} );\n}\n\n/**\n * Determines the event for an attr mutation record.\n * \n * @param MutationRecord \t{ target, attributeName }\n * \n * @returns Object\n */\nfunction withAttrEventDetails( { target, attributeName, value, oldValue } ) {\n\tconst window = this, registry = window.webqit.realdom.attrInterceptionRecords?.get( target ) || {};\n\tconst event = registry[ attributeName ]?.[ 0 ] || 'mutation';\n\tconst record = { target, name: attributeName, value, oldValue, type: 'observation', event };\n\treturn record;\n}\n\n/**\n * Attributes intersection engine.\n * \n * @param String \t\t\ttiming \n * @param Function \t\t\tcallback \n * \n * @returns \n */\nfunction attrInterception( timing, callback ) {\n\tconst window = this;\n\tconst { webqit, document, Element } = window;\n\tif ( !webqit.realdom.attrInterceptionHooks ) { Object.defineProperty( webqit.realdom, 'attrInterceptionHooks', { value: new Map } ); }\n\tif ( !webqit.realdom.attrInterceptionHooks.has( timing ) ) { webqit.realdom.attrInterceptionHooks.set( timing, new Set ); }\n\twebqit.realdom.attrInterceptionHooks.get( timing ).add( callback );\n\tconst rm = () => webqit.realdom.attrInterceptionHooks.get( timing ).delete( callback );\n\tif ( webqit.realdom.attrInterceptionHooks?.intercepting ) return rm;\n\tconsole.warn( `Attr mutation APIs are now being intercepted.` );\n\twebqit.realdom.attrInterceptionHooks.intercepting = true;\n\tObject.defineProperty( webqit.realdom, 'attrInterceptionRecords', { value: new Map } );\n\n\t// Interception hooks\n\tconst attrIntercept = ( record, defaultAction ) => {\n\t\tif ( !webqit.realdom.attrInterceptionRecords.has( record.target ) ) { webqit.realdom.attrInterceptionRecords.set( record.target, {} ); }\n\t\tconst registry = webqit.realdom.attrInterceptionRecords.get( record.target );\n\t\t// ------------------\n\t\tregistry[ record.name ] = registry[ record.name ] || [];\n\t\tregistry[ record.name ].unshift( record.event );\n\t\t// ------------------\n\t\twebqit.realdom.attrInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( [ record ] ) );\n\t\tconst returnValue = defaultAction();\n\t\twebqit.realdom.attrInterceptionHooks.get( 'sync' )?.forEach( callback => callback( [ record ] ) );\n\t\treturn returnValue;\n\t};\n\n\t// Interception observer WILL need to know non-API-based mutations\n\tconst mo = new window.MutationObserver( records => {\n\t\trecords = records.filter( rcd => {\n\t\t\tconst registry = window.webqit.realdom.attrInterceptionRecords?.get( rcd.target ) || {};\n\t\t\treturn !registry[ rcd.attributeName ]?.shift();\n\t\t} );\n\t\trecords = dedup( records ).map( rcd => withAttrEventDetails.call( window, rcd ) );\n\t\tif ( !records.length ) return;\n\t\twebqit.realdom.attrInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( records ) );\n\t\twebqit.realdom.attrInterceptionHooks.get( 'sync' )?.forEach( callback => callback( records ) );\n\t} );\n\tmo.observe( document, { attributes: true, subtree: true, attributeOldValue: true } );\n\n\t// Intercept DOM attr mutation methods\n\tconst originalApis = Object.create( null );\n\t[ 'setAttribute', 'removeAttribute', 'toggleAttribute', ].forEach( apiName => {\n\t\toriginalApis[ apiName ] = Element.prototype[ apiName ];\n\t\tElement.prototype[ apiName ] = function( ...args ) {\n\t\t\tlet value, oldValue = this.getAttribute( args[ 0 ] );\n\t\t\tif ( [ 'setAttribute', 'toggleAttribute' ].includes( apiName ) ) { value = args[ 1 ]; }\n\t\t\tif ( apiName === 'toggleAttribute' && value === undefined ) {\n\t\t\t\tvalue = oldValue === null ? true : false;\n\t\t\t}\n\t\t\tconst record = { target: this, name: args[ 0 ], value, oldValue, type: 'interception', event: [ this, apiName ] };\n\t\t\tconst exec = () => originalApis[ apiName ].call( this, ...args );\n\t\t\treturn attrIntercept( record, exec );\n\t\t}\n\t} );\n\n\treturn rm;\n}\n", "\n/**\n * @imports\n */\nimport { _isObject } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport AttrRealtime from './AttrRealtime.js';\nimport Realtime from './Realtime.js';\nimport * as Xpath from './Xpath.js';\n\n/**\n *\n * @class DOMRealtime\n */\nexport default class DOMRealtime extends Realtime {\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor( context, ...args ) {\n\t\tsuper( context, 'tree', ...args );\n\t}\n\n\t/**\n\t * Alias for ( new AttrRealtime() ).all( ... )\n\t */\n\tattr( filter, callback = undefined, params = {} ) {\n\t\tconst { context, window } = this;\n\t\treturn ( new AttrRealtime( context, window ) ).get( ...arguments );\n\t}\n\n\t/**\n\t * Runs a query.\n\t *\n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable|Void\n\t */\n\tquery( spec, callback = undefined, params = {} ) {\n\t\t[ spec, callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context } = this;\n\t\t// ------------------\n\t\tconst records = new Map, getRecord = target => {\n\t\t\tif ( !records.has( target ) ) { records.set( target, { target, entrants: [], exits: [], type: 'query', event: null } ); }\n\t\t\treturn records.get( target );\n\t\t};\n\t\t// ------------------\n\t\tif ( !params.generation || params.generation === 'entrants' ) {\n\t\t\tif ( !spec.length ) {\n\t\t\t\t//if ( params.subtree ) throw new Error( `The subtree option requires a selector to work.` );\n\t\t\t\t[ ...context.children ].forEach( node => getRecord( context ).entrants.push( node ) );\n\t\t\t} else if ( spec.every( s => s.type === 'selector' ) ) {\n\t\t\t\tconst [ cssSelectors, xpathQueries ] = spec.reduce( ( [ css, xpath ], s ) => {\n\t\t\t\t\treturn s.kind === 'xpath' ? [ css, xpath.concat( s ) ] : [ css.concat( s ), xpath ];\n\t\t\t\t}, [ [], [] ] );\n\t\t\t\tconst matches = [];\n\t\t\t\tif ( params.subtree ) {\n\t\t\t\t\tif ( cssSelectors.length ) { matches.push( ...context.querySelectorAll( cssSelectors.join( ',' ) ) ); }\n\t\t\t\t\tif ( xpathQueries.length ) { matches.push( ...Xpath.query( this.window, context, xpathQueries ) ); }\n\t\t\t\t} else {\n\t\t\t\t\tif ( cssSelectors.length ) { matches.push( ...[ ...context.children ].filter( node => node.matches( cssSelectors ) ) ); }\n\t\t\t\t\tif ( xpathQueries.length ) { matches.push( ...Xpath.query( this.window, context, xpathQueries, false ) ); }\n\t\t\t\t}\n\t\t\t\tmatches.forEach( node => getRecord( node.parentNode || context ).entrants.push( node ) );\n\t\t\t}\n\t\t}\n\t\t// ------------------\n\t\tif ( !callback ) return records;\n\t\tconst disconnectable = { disconnected: false };\n\t\tconst signalGenerator = callback && params.lifecycleSignals && this.createSignalGenerator();\n\t\tfor ( const [ , record ] of records ) {\n\t\t\tif ( disconnectable.disconnected ) break;\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( record, flags, context );\n\t\t}\n\t\t// ------------------\n\t\tif ( params.live ) {\n\t\t\tif ( signalGenerator ) { params = { ...params, signalGenerator }; }\n\t\t\tconst disconnectable_live = this.observe( spec, callback, params );\n\t\t\treturn this.disconnectables( params.signal, disconnectable, disconnectable_live );\n\t\t}\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\n\t/**\n\t * Alias for query( ..., { subtree: false } )\n\t */\n\tchildren( spec, callback = undefined, params = {} ) {\n\t\t[ spec, callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\treturn this.query( spec, callback, { ...params, subtree: false } );\n\t}\n\n\t/**\n\t * Alias for query( ..., { subtree: true } )\n\t */\n\tsubtree( spec, callback = undefined, params = {} ) {\n\t\t[ spec, callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\treturn this.query( spec, callback, { ...params, subtree: true } );\n\t}\n\n\t/**\n\t * Mutation Observer\n\t * \n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserve( spec, callback, params = {} ) {\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\t// ------------------------\n\t\tif ( [ 'sync', 'intercept' ].includes( params.timing ) ) return this.observeSync( spec, callback, params );\n\t\tif ( params.timing && params.timing !== 'async' ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\t// ------------------------\n\t\tconst { context, window, webqit, document } = this;\n\t\t// ------------------\n\t\tif ( params.eventDetails ) { webqit.realdom.domInterceptionRecordsAlwaysOn = true; }\n\t\tif ( ( document.readyState === 'loading' || webqit.realdom.domInterceptionRecordsAlwaysOn ) && !webqit.realdom.domInterceptionHooks?.intercepting ) {\n\t\t\tdomInterception.call( window, 'sync', () => {} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = new window.MutationObserver( records => records.forEach( record => {\n\t\t\tdispatch.call( window, registration, withEventDetails.call( window, record ), context );\n\t\t} ) );\n\t\tdisconnectable.observe( context, { childList: true, subtree: params.subtree, } );\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, signalGenerator, disconnectable };\n\t\t// -------------\n\t\tif ( params.staticSensitivity ) {\n\t\t\tconst disconnectable_attr = staticSensitivity.call( window, registration );\n\t\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator, disconnectable_attr );\n\t\t}\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\t\n\t/**\n\t * Mutation Interceptor\n\t * \n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserveSync( spec, callback, params = {} ) {\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context, window } = this;\t\t\n\t\t// -------------\n\t\tif ( params.timing && ![ 'sync', 'intercept' ].includes( params.timing ) ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\tconst interceptionTiming = params.timing === 'intercept' ? 'intercept' : 'sync';\n\t\tconst intersectionDepth = params.subtree ? 'subtree' : 'children';\n\t\tif ( !this.registry( interceptionTiming ).size ) {\n\t\t\t// One handler per intercept/sync registry\n\t\t\tdomInterception.call( window, interceptionTiming, record => {\n\t\t\t\tthis.forEachMatchingContext( interceptionTiming, record, dispatch );\n\t\t\t} );\n\t\t}\n\t\tconst mo = new window.MutationObserver( records => records.forEach( record => {\n\t\t\tif ( Array.isArray( ( record = withEventDetails.call( window, record ) ).event ) ) return;\n\t\t\tdispatch.call( window, registration, record, context );\n\t\t} ) );\n\t\tmo.observe( context, { childList: true, subtree: params.subtree } );\n\t\t// -------------\n\t\tconst disconnectable = { disconnect() {\n\t\t\tmo.disconnect();\n\t\t\tregistry.delete( registration );\n\t\t\tif ( !registry.size ) { registries.delete( context ); }\n\t\t} };\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, signalGenerator, disconnectable };\n\t\t// -------------\n\t\tconst registries = this.registry( interceptionTiming, intersectionDepth );\n\t\tif ( !registries.has( context ) ) { registries.set( context, new Set ); }\n\t\tconst registry = registries.get( context );\n\t\tregistry.add( registration );\n\t\t// -------------\n\t\tif ( params.staticSensitivity ) {\n\t\t\tconst disconnectable_attr = staticSensitivity.call( window, registration );\n\t\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator, disconnectable_attr );\n\t\t}\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n}\n\n/**\n * Sensitivty for attribute changes for attribute spec.\n * \n * @param object registration\n * \n * @returns Disconnectable\n */\nfunction staticSensitivity( registration ) {\n\tconst window = this;\n\tconst { context, spec, callback, params, signalGenerator } = registration;\n\tconst cssSelectors = spec.filter( s => s.kind === 'css' );\n\tconst parseDot = selector => selector.match( /\\.([\\w-]+)/g )?.length ? [ 'class' ] : [];\n\tconst parseHash = selector => selector.match( /#([\\w-]+)/g )?.length ? [ 'id' ] : [];\n\tconst parse = selector => [ ...selector.matchAll( /\\[([^\\=\\]]+)(\\=[^\\]]+)?\\]/g ) ].map( x => x[ 1 ] ).concat( parseDot( selector ) ).concat( parseHash( selector ) );\n\tif ( !( registration.$attrs = Array.from( new Set( cssSelectors.filter( s => ( s + '' ).includes( '[' ) ).reduce( ( attrs, selector ) => attrs.concat( parse( selector + '' ) ), [] ) ) ) ).length ) return;\n\t// ---------\n\tconst entrants = new Set, exits = new Set;\n\tentrants.push = val => ( exits.delete( val ), entrants.add( val ) );\n\texits.push = val => ( entrants.delete( val ), exits.add( val ) );\n\tregistration.$deliveryCache = { entrants, exits };\n\t// ---------\n\treturn ( new AttrRealtime( context, window ) ).observe( registration.$attrs, _records => {\n\t\tconst records = new Map, getRecord = target => {\n\t\t\tif ( !records.has( target ) ) { records.set( target, { target, entrants: [], exits: [], type: 'static', event: null } ); }\n\t\t\treturn records.get( target );\n\t\t};\n\t\t// ---------\n\t\tconst matchesCache = new WeakMap;\n\t\tconst matches = node => {\n\t\t\tif ( !matchesCache.has( node ) ) { matchesCache.set( node, cssSelectors.some( s => node.matches( s + '' ) ) ); }\n\t\t\treturn matchesCache.get( node );\n\t\t};\n\t\t// ---------\n\t\tfor ( const _record of _records ) {\n\t\t\t[ 'entrants', 'exits' ].forEach( generation => {\n\t\t\t\tif ( params.generation && generation !== params.generation ) return;\n\t\t\t\tif ( registration.$deliveryCache[ generation ].has( _record.target ) || ( generation === 'entrants' ? !matches( _record.target ) : matches( _record.target ) ) ) return;\n\t\t\t\tregistration.$deliveryCache[ generation ].push( _record.target );\n\t\t\t\tgetRecord( _record.target )[ generation ].push( _record.target );\n\t\t\t\tgetRecord( _record.target ).event = _record.event;\n\t\t\t} );\n\t\t}\n\t\t// ---------\n\t\tfor ( const [ , record ] of records ) {\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( record, flags, context );\n\t\t}\n\t}, { subtree: params.subtree, timing: params.timing, eventDetails: params.eventDetails } );\n}\n\n/**\n * Dispatches a mutation record if it matches the observed.\n * \n * @param Object \t\t\tregistration \n * @param Object \t\t\trecord \n * \n * @returns Void\n */\nfunction dispatch( registration, _record ) {\n\tconst { context, spec, callback, params, signalGenerator, $deliveryCache } = registration;\n\t// ---------\n\tconst record = { ..._record, entrants: [], exits: [] };\n\tif ( !params.eventDetails ) { delete record.event; }\n\t[ 'entrants', 'exits' ].forEach( generation => {\n\t\tif ( params.generation && generation !== params.generation ) return;\n\t\tif ( spec.length ) {\n\t\t\trecord[ generation ] = nodesIntersection.call( this, spec, _record[ generation ], _record.event !== 'parse' );\n\t\t} else {\n\t\t\trecord[ generation ] = [ ..._record[ generation ] ];\n\t\t}\n\t\tif ( !$deliveryCache ) return;\n\t\tfor ( const node of record[ generation ] ) {\n\t\t\t$deliveryCache[ generation ].push( node );\n\t\t}\n\t} );\n\t// ---------\n\tif ( !record.entrants.length && !record.exits.length ) return;\n\tconst flags = signalGenerator?.generate() || {};\n\tcallback( record, flags, context );\n}\n\n/**\n * Aggregates instances of els in sources\n * \n * @param Array \t\t\tspec \n * @param Array \t\t\tsources \n * @param Bool \t\t\t\tdeepIntersect \n * \n * @returns \n */\nfunction nodesIntersection( spec, sources, deepIntersect ) {\n\tsources = Array.isArray( sources ) ? sources : [ ...sources ];\n\tconst match = ( sources, s ) => {\n\t\t// Filter out text nodes\n\t\tif ( s.type === 'selector' ) {\n\t\t\t// Is directly mutated...\n\t\t\tlet matches = s.isXpathAttr ? [] : sources.filter( source => s.kind === 'xpath' ? Xpath.match( this, source, s + '' ) : source.matches && source.matches( s + '' ) );\n\t\t\t// Is contextly mutated...\n\t\t\tif ( deepIntersect || s.isXpathAttr ) {\n\t\t\t\tmatches = sources.reduce( ( collection, source ) => {\n\t\t\t\t\tif ( s.kind === 'xpath' ) { return [ ...collection, ...Xpath.query( this, source, s, deepIntersect ) ]; }\n\t\t\t\t\treturn source.querySelectorAll ? [ ...collection, ...source.querySelectorAll( s + '' ) ] : collection;\n\t\t\t\t}, matches );\n\t\t\t}\n\t\t\tif ( matches.length ) return matches;\n\t\t} else {\n\t\t\t// Is directly mutated...\n\t\t\tif ( sources.includes( s.content ) || (\n\t\t\t\tdeepIntersect && sources.some( source => source.contains( s.content ) )\n\t\t\t) ) { return [ s.content ]; }\n\t\t}\n\t};\n\t// Search can be expensive...\n\t// Multiple listeners searching the same thing in the same list?\n\tif ( !sources.$$searchCache ) { sources.$$searchCache = new Map; }\n\treturn spec.reduce( ( matches, s ) => {\n\t\tlet _matches;\n\t\tif ( sources.$$searchCache.has( s.content ) ) {\n\t\t\t_matches = sources.$$searchCache.get( s.content );\n\t\t} else {\n\t\t\t_matches = match( sources, s ) || [];\n\t\t\tif ( s.type === 'instance' ) {\n\t\t\t\tsources.$$searchCache.set( s.content, _matches );\n\t\t\t}\n\t\t}\n\t\treturn matches.concat( _matches );\n\t}, [] );\n}\n\n/**\n * Determines the event for a mutation record\n * \n * @param MutationRecord \t{ target, entrants, exits }\n * \n * @returns Object\n */\nfunction withEventDetails( { target, addedNodes, removedNodes } ) {\n\tlet window = this, event;\n\tevent = _arrFrom( addedNodes ).reduce( ( prev, node ) => prev || window.webqit.realdom.domInterceptionRecords?.get( node ), null );\n\tevent = _arrFrom( removedNodes ).reduce( ( prev, node ) => prev || window.webqit.realdom.domInterceptionRecords?.get( node ), event );\n\tevent = event || window.document.readyState === 'loading' && 'parse' || 'mutation';\n\treturn { target, entrants: addedNodes, exits: removedNodes, type: 'observation', event };\n}\n\n/**\n * DOM intersection engine.\n * \n * @param String \t\t\ttiming \n * @param Function \t\t\tcallback \n * \n * @returns \n */\nfunction domInterception( timing, callback ) {\n\tconst window = this;\n\tconst { webqit, document, Node, CharacterData, Element, HTMLElement, HTMLTemplateElement, DocumentFragment } = window;\n\tif ( !webqit.realdom.domInterceptionHooks ) { Object.defineProperty( webqit.realdom, 'domInterceptionHooks', { value: new Map } ); }\n\tif ( !webqit.realdom.domInterceptionHooks.has( timing ) ) { webqit.realdom.domInterceptionHooks.set( timing, new Set ); }\n\twebqit.realdom.domInterceptionHooks.get( timing ).add( callback );\n\tconst rm = () => webqit.realdom.domInterceptionHooks.get( timing ).delete( callback );\n\tif ( webqit.realdom.domInterceptionHooks?.intercepting ) return rm;\n\tconsole.warn( `DOM mutation APIs are now being intercepted.` );\n\twebqit.realdom.domInterceptionHooks.intercepting = true;\n\tObject.defineProperty( webqit.realdom, 'domInterceptionRecords', { value: new Map } );\n\n\t// Interception hooks\n\tconst intercept = ( record, defaultAction ) => {\n\t\trecord.entrants.concat( record.exits ).forEach( node => {\n\t\t\tclearTimeout( webqit.realdom.domInterceptionRecords.get( node )?.timeout ); // Clear any previous that's still active\n\t\t\twebqit.realdom.domInterceptionRecords.set( node, record.event ); // Main: set event details... and next to timeout details\n\t\t\tconst timeout = setTimeout( () => { webqit.realdom.domInterceptionRecords.delete( node ); }, 0 );\n\t\t\tObject.defineProperty( record.event, 'timeout', { value: timeout, configurable: true } );\n\t\t} );\n\t\twebqit.realdom.domInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( record ) );\n\t\tconst returnValue = defaultAction();\n\t\twebqit.realdom.domInterceptionHooks.get( 'sync' )?.forEach( callback => callback( record ) );\n\t\treturn returnValue;\n\t};\n\n\t// Intercept DOM mutation methods\n\tconst _originalApis = { characterData: Object.create( null ), other: Object.create( null ) };\n\t[ 'insertBefore'/*Node*/, 'insertAdjacentElement', 'insertAdjacentHTML', 'setHTML',\n\t\t'replaceChildren', 'replaceWith', 'remove', 'replaceChild'/*Node*/, 'removeChild'/*Node*/, \n\t\t'before', 'after', 'append', 'prepend', 'appendChild'/*Node*/, \n\t].forEach( apiName => {\n\t\tfunction method( ...args ) {\n\t\t\tconst originalApis = this instanceof CharacterData ? _originalApis.characterData : _originalApis.other;\n\t\t\t// Instance of Node interface? Abort!\n\t\t\tconst exec = () => originalApis[ apiName ].call( this, ...args );\n\t\t\tif ( !( this instanceof CharacterData || this instanceof Element || this instanceof DocumentFragment ) ) return exec();\n\t\t\t// --------------\n\t\t\t// Obtain exits and entrants\n\t\t\tlet exits = [], entrants = [], target = this;\n\t\t\tif ( [ 'insertBefore' ].includes( apiName ) ) {\n\t\t\t\tentrants = [ args[ 0 ] ];\n\t\t\t} else if ( [ 'insertAdjacentElement', 'insertAdjacentHTML' ].includes( apiName ) ) {\n\t\t\t\tentrants = [ args[ 1 ] ];\n\t\t\t\tif ( [ 'beforebegin', 'afterend' ].includes( args[ 0 ] ) ) {\n\t\t\t\t\ttarget = this.parentNode;\n\t\t\t\t}\n\t\t\t} else if ( [ 'setHTML', 'replaceChildren' ].includes( apiName ) ) {\n\t\t\t\texits = [ ...this.childNodes ];\n\t\t\t\tentrants = apiName === 'replaceChildren' ? [ ...args ] : [ args[ 0 ] ];\n\t\t\t} else if ( [ 'replaceWith', 'remove' ].includes( apiName ) ) {\n\t\t\t\texits = [ this ];\n\t\t\t\tentrants = apiName === 'replaceWith' ? [ ...args ] : [];\n\t\t\t\ttarget = this.parentNode;\n\t\t\t} else if ( [ 'replaceChild' ].includes( apiName ) ) {\n\t\t\t\texits = [ args[ 1 ] ];\n\t\t\t\tentrants = [ args[ 0 ] ];\n\t\t\t} else if ( [ 'removeChild' ].includes( apiName ) ) {\n\t\t\t\texits = [ ...args ];\n\t\t\t} else {\n\t\t\t\t// 'before', 'after', 'append', 'prepend', 'appendChild'\n\t\t\t\tentrants = [ ...args ];\n\t\t\t\tif ( [ 'before', 'after' ].includes( apiName ) ) {\n\t\t\t\t\ttarget = this.parentNode;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\t// Parse HTML to entrants\n\t\t\tlet apiNameFinal = apiName;\n\t\t\tif ( [ 'insertAdjacentHTML', 'setHTML' ].includes( apiName ) ) {\n\t\t\t\tlet tempNodeName = this.nodeName;\n\t\t\t\tif ( apiName === 'insertAdjacentHTML' && [ 'beforebegin', 'afterend' ].includes( args[ 0 ] ) ) {\n\t\t\t\t\t// We can't handle this... and this is going to throw afterall\n\t\t\t\t\tif ( !this.parentNode ) return originalApis[ apiName ].call( this, ...args );\n\t\t\t\t\ttempNodeName = this.parentNode.nodeName;\n\t\t\t\t}\n\t\t\t\tconst temp = document.createElement( tempNodeName );\n\t\t\t\toriginalApis.setHTML.call( temp, entrants[ 0 ], apiName === 'setHTML' ? args[ 1 ] : {} );\n\t\t\t\tentrants = [ ...temp.childNodes ];\n\t\t\t\t// --------------  \n\t\t\t\tif ( apiName === 'insertAdjacentHTML' ) {\n\t\t\t\t\tapiNameFinal = 'insertAdjacentElement';\n\t\t\t\t\targs[ 1 ] = new DocumentFragment;\n\t\t\t\t\targs[ 1 ].______isTemp = true;\n\t\t\t\t\targs[ 1 ].append( ...temp.childNodes );\n\t\t\t\t} else {\n\t\t\t\t\tapiNameFinal = 'replaceChildren';\n\t\t\t\t\targs = [ ...temp.childNodes ];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\tconst record = { target, entrants, exits, type: 'interception', event: [ this, apiName ] };\n\t\t\treturn intercept( record, () => {\n\t\t\t\treturn originalApis[ apiNameFinal ].call( this, ...args );\n\t\t\t} );\n\t\t}\n\t\t// We'll be sure to monkey the correct interface\n\t\tif ( [ 'insertBefore', 'replaceChild', 'removeChild', 'appendChild' ].includes( apiName ) ) {\n\t\t\t_originalApis.other[ apiName ] = Node.prototype[ apiName ];\n\t\t\tNode.prototype[ apiName ] = method;\n\t\t} else {\n\t\t\t// Comment nodes have this methods too\n\t\t\tif ( [ 'after', 'before', 'remove', 'replaceWith' ].includes( apiName ) ) {\n\t\t\t\t_originalApis.characterData[ apiName ] = CharacterData.prototype[ apiName ];\n\t\t\t\tCharacterData.prototype[ apiName ] = method;\n\t\t\t}\n\t\t\t// In case newer methods like setHTML() are not supported\n\t\t\tif ( Element.prototype[ apiName ] ) {\n\t\t\t\t_originalApis.other[ apiName ] = Element.prototype[ apiName ];\n\t\t\t\tElement.prototype[ apiName ] = method;\n\t\t\t}\n\t\t}\n\t} );\n\n\tconst originalApis = Object.create( null );\n\t// Intercept DOM mutation properties\n\t[ 'outerHTML', 'outerText'/*HTMLElement*/, 'innerHTML', \n\t\t'innerText'/*HTMLElement*/,'textContent'/*Node*/, 'nodeValue'/*Node*/\n\t].forEach( apiName => {\n\t\t// We'll be sure to monkey the correct interface\n\t\tconst Interface = [ 'textContent', 'nodeValue' ].includes( apiName ) ? Node : (\n\t\t\t[ 'outerText', 'innerText' ].includes( apiName ) ? HTMLElement : Element\n\t\t);\n\t\toriginalApis[ apiName ] = Object.getOwnPropertyDescriptor( Interface.prototype, apiName );\n\t\tObject.defineProperty( Interface.prototype, apiName, { ...originalApis[ apiName ], set: function( value ) {\n\t\t\tlet exec = () => originalApis[ apiName ].set.call( this, value );\n\t\t\t// Instance of Node interface? Abort!\n\t\t\tif ( !( this instanceof Element ) ) return exec();\n\t\t\t// --------------\n\t\t\t// Obtain exits and entrants\n\t\t\tlet exits = [], entrants = [], target = this;\n\t\t\tif ( [ 'outerHTML', 'outerText' ].includes( apiName ) ) {\n\t\t\t\texits = [ this ];\n\t\t\t\ttarget = this.parentNode;\n\t\t\t} else {\n\t\t\t\t// 'innerHTML', 'innerText', 'textContent', 'nodeValue'\n\t\t\t\texits = /*this instanceof HTMLTemplateElement \n\t\t\t\t\t? [ ...this.content.childNodes ]\n\t\t\t\t\t: */[ ...this.childNodes ];\n\t\t\t}\n\t\t\t// --------------\n\t\t\t// Parse HTML to nodes\n\t\t\tif ( [ 'outerHTML', 'innerHTML' ].includes( apiName ) ) {\n\t\t\t\tlet tempNodeName = this.nodeName;\n\t\t\t\tif ( apiName === 'outerHTML' ) {\n\t\t\t\t\t// We can't handle this... and this is going to throw afterall\n\t\t\t\t\tif ( !this.parentNode ) return exec();\n\t\t\t\t\ttempNodeName = this.parentNode.nodeName;\n\t\t\t\t}\n\t\t\t\tconst temp = document.createElement( tempNodeName === 'TEMPLATE' ? 'div' : tempNodeName );\n\t\t\t\toriginalApis[ apiName ].set.call( temp, value );\n\t\t\t\tentrants = /*[ ...temp.childNodes ];*/this instanceof HTMLTemplateElement ? [] : [ ...temp.childNodes ];\n\t\t\t\t// -------------- \n\t\t\t\tif ( apiName === 'outerHTML' ) {\n\t\t\t\t\tvalue = new DocumentFragment;\n\t\t\t\t\tvalue.______isTemp = true;\n\t\t\t\t\tvalue.append( ...temp.childNodes );\n\t\t\t\t\texec = () => Element.prototype.replaceWith.call( this, value );\n\t\t\t\t} else {\n\t\t\t\t\tif ( this instanceof HTMLTemplateElement ) {\n\t\t\t\t\t\texec = () => this.content.replaceChildren( ...temp.childNodes );\n\t\t\t\t\t} else {\n\t\t\t\t\t\texec = () => Element.prototype.replaceChildren.call( this, ...temp.childNodes );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// -------------- \n\t\t\tconst record = { target, entrants, exits, type: 'interception', event: [ this, apiName ] };\n\t\t\treturn intercept( record, exec );\n\t\t} } );\n\t} );\n\n\t// Intercept document mutation methods\n\t[ 'append', 'prepend', 'replaceChildren' ].forEach( apiName => {\n\t\t[ document, DocumentFragment.prototype ].forEach( target => {\n\t\t\tconst originalApi = target[ apiName ];\n\t\t\ttarget[ apiName ] = function( ...args ) {\n\t\t\t\tif ( this.______isTemp ) return originalApi.call( this, ...args );\n\t\t\t\tconst exits = apiName === 'replaceChildren' ? [ ...this.childNodes ] : [];\n\t\t\t\tconst record = {\n\t\t\t\t\ttarget: this,\n\t\t\t\t\tentrants: args,\n\t\t\t\t\texits,\n\t\t\t\t\ttype: 'interception', \n\t\t\t\t\tevent: [ this, apiName ]\n\t\t\t\t};\n\t\t\t\treturn intercept( record, () => {\n\t\t\t\t\treturn originalApi.call( this, ...args );\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t} );\n\n\treturn rm;\n}\n", "\r\n/**\r\n * Applies all supported polyfills\r\n */\r\nexport default function() {\r\n    CSS_escape.call( this );\r\n    Node_isConnected.call( this );\r\n    Element_matches.call( this );\r\n}\r\n\r\n/**\r\n * Polyfills the window.CSS object.\r\n *  \r\n * @return void\r\n */\r\nexport function CSS_escape() {\r\n    const window = this;\r\n    if ( !window.CSS ) { window.CSS = {} }\r\n    if ( !window.CSS.escape ) {\r\n        /**\r\n         * Polyfills the window.CSS.escape() function.\r\n         *  \r\n         * @param string str \r\n         * \r\n         * @return string\r\n         */\r\n        window.CSS.escape = str => str.replace( /([\\:@\\~\\$\\&])/g, '\\\\$1' );\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Node.prototype.isConnected property\r\n * \r\n * @see MDN\r\n  *  \r\n * @return bool\r\n*/\r\nexport function Node_isConnected() {\r\n    const window = this;\r\n    if ( !( 'isConnected' in window.Node.prototype ) ) {\r\n        Object.defineProperty( window.Node.prototype, 'isConnected', { get: function() {\r\n            return !this.ownerDocument || !(\r\n                this.ownerDocument.compareDocumentPosition( this )\r\n                & this.DOCUMENT_POSITION_DISCONNECTED);\r\n        } } );\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Element.prototype.matches() method\r\n * \r\n * @see MDN\r\n  *  \r\n * @return void\r\n*/\r\nexport function Element_matches() {\r\n    const window = this;\r\n    if ( !window.Element.prototype.matches ) {\r\n        window.Element.prototype.matches = \r\n        window.Element.prototype.matchesSelector || \r\n        window.Element.prototype.mozMatchesSelector ||\r\n        window.Element.prototype.msMatchesSelector || \r\n        window.Element.prototype.oMatchesSelector || \r\n        window.Element.prototype.webkitMatchesSelector ||\r\n        function( s ) {\r\n            var matches = ( this.document || this.ownerDocument ).querySelectorAll( s ),\r\n                i = matches.length;\r\n            while ( --i >= 0 && matches.item( i ) !== this ) {}\r\n            return i > -1;            \r\n        }\r\n    }\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isNumeric, _isString, _isFunction } from '@webqit/util/js/index.js';\r\nimport { _set } from '@webqit/util/obj/index.js';\r\nimport Scheduler from './Scheduler.js';\r\nimport DOMRealtime from './realtime/DOMRealtime.js';\r\nimport AttrRealtime from './realtime/AttrRealtime.js';\r\nimport polyfill from './polyfills.js';\r\n\r\nexport default function() {\r\n    const window = this;\r\n    if ( !window.webqit ) window.webqit = {};\r\n    if ( window.webqit.realdom ) return window.webqit.realdom;\r\n    window.webqit.realdom = {};\r\n    polyfill.call( window );\r\n    // ------\r\n    window.webqit.realdom.meta = ( ...args ) => meta.call( window, ...args );\r\n    window.webqit.realdom.ready = ( ...args ) => ready.call( window, ...args );\r\n    // ------\r\n    window.webqit.realdom.realtime = ( context, namespace = 'dom' ) => {\r\n        if ( namespace === 'dom' ) return new DOMRealtime( context, window );\r\n        if ( namespace === 'attr' ) return new AttrRealtime( context, window );\r\n    };\r\n    // ------\r\n    const scheduler = new Scheduler( window );\r\n    window.webqit.realdom.schedule = ( type, ...args ) => {\r\n        return scheduler[ `on${ type }` ]( ...args );\r\n    };\r\n    // ------\r\n    return window.webqit.realdom;\r\n}\r\n\r\n\r\n/**\r\n * DOM-ready listeners.\r\n * \r\n * @param Function\t    \t\tcallback\r\n * \r\n * @return void\r\n */\r\nfunction ready( ...args ) {\r\n    let timing = 'interactive', callback;\r\n    if ( _isString( args[ 0 ] ) ) {\r\n        timing = args[ 0 ];\r\n        if ( _isFunction( args[ 1 ] ) ) { callback = args[ 1 ]; }\r\n    } else if ( _isFunction( args[ 0 ] ) ) { callback = args[ 0 ]; }\r\n    // --------------\r\n    const timings = { interactive: [ 'interactive', 'complete' ], complete: [ 'complete' ], };\r\n    if ( !timings[ timing ] ) throw new Error( `Invalid ready-state timing: ${ timing }.` );\r\n\tconst window = this;\r\n    // --------------\r\n    if ( !callback ) {\r\n        if ( !window.webqit.realdom.readyStatePromises ) {\r\n            window.webqit.realdom.readyStatePromises = {\r\n                interactive: new Promise( res => ready.call( this, 'interactive', res ) ),\r\n                complete: new Promise( res => ready.call( this, 'complete', res ) ),\r\n            };\r\n        }\r\n        return window.webqit.realdom.readyStatePromises[ timing ];\r\n    }\r\n    // --------------\r\n\tif ( timings[ timing ].includes( window.document.readyState ) ) return callback( window );\r\n    if ( !window.webqit.realdom.readyStateCallbacks ) {\r\n        window.webqit.realdom.readyStateCallbacks = { interactive: [], complete: [] };\r\n        window.document.addEventListener( 'readystatechange', () => {\r\n            const state = window.document.readyState;\r\n            for ( const callback of window.webqit.realdom.readyStateCallbacks[ state ].splice( 0 ) ) {\r\n                callback( window );\r\n            }\r\n        }, false );\r\n    }\r\n    window.webqit.realdom.readyStateCallbacks[ timing ].push( callback );\r\n}\r\n\r\n/**\r\n * A webqit's meta tag props reader.\r\n *  \r\n * @param String name\r\n * \r\n * @return Object\r\n */\r\nfunction meta( name ) {\r\n    const window = this;\r\n    let _content = {}, _el;\r\n    if ( _el = window.document.querySelector( `meta[name=\"${ name }\"]` ) ) {\r\n        _content = ( _el.content || '' ).split( ';' ).filter( v => v ).reduce( ( _metaVars, directive ) => {\r\n            const directiveSplit = directive.split( '=' ).map( d => d.trim() );\r\n            _set( _metaVars, directiveSplit[ 0 ].split( '.' ), directiveSplit[ 1 ] === 'true' ? true : (directiveSplit[ 1 ] === 'false' ? false : (\r\n                    _isNumeric( directiveSplit[ 1 ] ) ? parseInt( directiveSplit[ 1 ] ) : directiveSplit[ 1 ]\r\n                ) )\r\n            );\r\n            return _metaVars;\r\n        }, {} );\r\n    }\r\n    return { get name() { return name; }, get content() { return _el.content; }, json() {\r\n\t\treturn JSON.parse( JSON.stringify( _content ) );\r\n    } };\r\n}", "\n/**\n * @imports\n */\nimport init from './index.js';\n\ninit.call( window );"],
  "mappings": "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",
  "names": ["isObject_default", "val", "isArray_default", "val", "intersect_default", "arr", "arr2", "callback", "isArray_default", "val1", "val2", "internals", "obj", "namespaces", "ObservableMap", "itnls", "_ns", "_itnls", "args", "key", "value", "returnValue", "type", "callback", "entry", "_intersection", "a", "b", "intersect_default", "isTypeFunction_default", "val", "isNull_default", "val", "isUndefined_default", "val", "isTypeObject_default", "val", "isTypeFunction_default", "isEmpty_default", "val", "isNull_default", "isUndefined_default", "isTypeObject_default", "isFunction_default", "val", "isTypeFunction_default", "isNumber_default", "val", "isNumeric_default", "val", "isNumber_default", "isString_default", "val", "isTypeArray_default", "val", "isString_default", "isUndefined_default", "from_default", "val", "castObject", "isArray_default", "isObject_default", "isEmpty_default", "isTypeArray_default", "get_default", "ctxt", "path", "trap", "reciever", "from_default", "_ctxt", "isUndefined_default", "isNull_default", "_key", "isTypeObject_default", "set_default", "obj", "path", "val", "buildTree", "trap", "_set", "target", "key", "isNumeric_default", "i", "isArray_default", "from_default", "isTypeObject_default", "isFunction_default", "branch", "get_default", "branchSuccess", "Scheduler", "window", "asyncDOM", "callback", "withPromise", "resolve", "onread", "onwrite", "prevTransaction", "readReturn", "callWrite", "writeReturn", "repeatTransaction", "isXpath", "expr", "query", "window", "context", "subtree", "x", "result", "nodes", "node", "match", "split", "s", "delim", "state", "splits", "DOMSpec", "content", "isXpath", "split", "Realtime", "context", "namespace", "window", "args", "isFunction_default", "isObject_default", "DOMSpec", "from_default", "x", "s", "internals", "interceptionTiming", "record_s", "callback", "records", "dispatchBatch", "depth", "registries", "registry", "matches", "record", "registration", "signal", "objects", "disconnectable", "d", "AttrRealtime", "Realtime", "context", "args", "spec", "callback", "params", "originalFilterIsString", "DOMSpec", "records", "attrIntersection", "signalGenerator", "record", "flags", "disconnectable_live", "window", "webqit", "attrInterception", "disconnectable", "dedup", "rcd", "withAttrEventDetails", "dispatch", "registration", "$params", "a", "interceptionTiming", "intersectionDepth", "registry", "registries", "rcds", "i", "atomics", "$spec", "r", "exclusion", "value", "record_s", "_type", "attrName", "attr", "target", "attributeName", "oldValue", "event", "timing", "document", "Element", "rm", "attrIntercept", "defaultAction", "returnValue", "originalApis", "apiName", "DOMRealtime", "Realtime", "context", "args", "filter", "callback", "params", "window", "AttrRealtime", "spec", "records", "getRecord", "target", "node", "s", "cssSelectors", "xpathQueries", "css", "xpath", "matches", "query", "disconnectable", "signalGenerator", "record", "flags", "disconnectable_live", "webqit", "document", "domInterception", "dispatch", "registration", "withEventDetails", "disconnectable_attr", "staticSensitivity", "interceptionTiming", "intersectionDepth", "mo", "registry", "registries", "parseDot", "selector", "parseHash", "parse", "x", "attrs", "entrants", "exits", "val", "_records", "matchesCache", "_record", "generation", "$deliveryCache", "nodesIntersection", "sources", "deepIntersect", "match", "source", "collection", "_matches", "addedNodes", "removedNodes", "event", "from_default", "prev", "timing", "Node", "CharacterData", "Element", "HTMLElement", "HTMLTemplateElement", "DocumentFragment", "rm", "intercept", "defaultAction", "timeout", "returnValue", "_originalApis", "apiName", "method", "originalApis", "exec", "apiNameFinal", "tempNodeName", "temp", "Interface", "value", "originalApi", "polyfills_default", "CSS_escape", "Node_isConnected", "Element_matches", "window", "str", "s", "matches", "i", "src_default", "window", "polyfills_default", "args", "meta", "ready", "context", "namespace", "DOMRealtime", "AttrRealtime", "scheduler", "Scheduler", "type", "timing", "callback", "isString_default", "isFunction_default", "timings", "res", "state", "name", "_content", "_el", "v", "_metaVars", "directive", "directiveSplit", "d", "set_default", "isNumeric_default", "src_default"]
}
